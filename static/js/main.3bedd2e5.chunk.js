(this["webpackJsonpsql-gen2"]=this["webpackJsonpsql-gen2"]||[]).push([[0],{271:function(e,t,n){e.exports=n(574)},272:function(e,t,n){},277:function(e,t,n){},496:function(e,t,n){},497:function(e,t,n){},536:function(e,t,n){},571:function(e,t,n){},572:function(e,t,n){},573:function(e,t,n){},574:function(e,t,n){"use strict";n.r(t);n(272),n(148);var r,i=n(0),a=n.n(i),o=n(46),l=n.n(o),s=(n(277),n(10)),c=n(12),u=n(11),d=n.n(u),p=n(1),g=n(2),f=n(4),m=n(3),b=n(9);function h(){var e=Object(s.a)(["\n  min-width: 200px;\n  background: rgb(20, 20, 20);\n  flex-grow: 0;\n  flex-shrink: 0;\n"]);return h=function(){return e},e}(r||(r={})).Tray=b.default.div(h());var y,v=function(e){Object(f.a)(n,e);var t=Object(m.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(g.a)(n,[{key:"render",value:function(){return i.createElement(r.Tray,null,this.props.children)}}]),n}(i.Component);function O(){var e=Object(s.a)(["\n  color: white;\n  font-family: Helvetica, Arial;\n  padding: 5px;\n  margin: 0px 10px;\n  border: solid 1px ",";\n  border-radius: 5px;\n  margin-bottom: 2px;\n  cursor: pointer;\n"]);return O=function(){return e},e}!function(e){e.Tray=b.default.div(O(),(function(e){return e.color}))}(y||(y={}));var k=function(e){Object(f.a)(n,e);var t=Object(m.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(g.a)(n,[{key:"render",value:function(){var e=this;return i.createElement(y.Tray,{color:this.props.color,draggable:!0,onDragStart:function(t){t.dataTransfer.setData("storm-diagram-node",JSON.stringify(e.props.model))}},this.props.name)}}]),n}(i.Component),P=n(21),E=n.n(P),j=n(13);function N(){var e=Object(s.a)(["\n  height: 100%;\n  background-color: ",";\n  background-size: 50px 50px;\n  display: flex;\n  > * {\n    height: 100%;\n    min-height: 100%;\n    width: 100%;\n  }\n  background-image: linear-gradient(\n      0deg,\n      transparent 24%,\n      "," 25%,\n      "," 26%,\n      transparent 27%,\n      transparent 74%,\n      "," 75%,\n      "," 76%,\n      transparent 77%,\n      transparent\n    ),\n    linear-gradient(\n      90deg,\n      transparent 24%,\n      "," 25%,\n      "," 26%,\n      transparent 27%,\n      transparent 74%,\n      "," 75%,\n      "," 76%,\n      transparent 77%,\n      transparent\n    );\n"]);return N=function(){return e},e}var x=b.default.div(N(),(function(e){return e.background}),(function(e){return e.color}),(function(e){return e.color}),(function(e){return e.color}),(function(e){return e.color}),(function(e){return e.color}),(function(e){return e.color}),(function(e){return e.color}),(function(e){return e.color})),L=function(e){Object(f.a)(n,e);var t=Object(m.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(g.a)(n,[{key:"render",value:function(){return i.createElement(x,{background:this.props.background||"rgb(60, 60, 60)",color:this.props.color||"rgba(255,255,255, 0.05)"},this.props.children)}}]),n}(i.Component),I=n(23),w=function(e){Object(f.a)(n,e);var t=Object(m.a)(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(p.a)(this,n),t.call(this,Object(I.a)({type:"arrow",width:e.width||3,color:e.color||"gray",selectedColor:e.selectedColor||"rgb(0,192,255)",curvyness:0},e))}return n}(P.DefaultLinkModel),C=n(24),M=n(20),T=n(15),D=n(147),S=n(60),A=function(e){Object(f.a)(n,e);var t=Object(m.a)(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(p.a)(this,n),t.call(this,Object(I.a)({offsetY:null==e.offsetY?-23:e.offsetY,type:"default"},e))}return Object(g.a)(n,[{key:"setLabel",value:function(e){this.options.label=e}},{key:"deserialize",value:function(e){Object(C.a)(Object(M.a)(n.prototype),"deserialize",this).call(this,e),this.options.label=e.data.label}},{key:"serialize",value:function(){return Object(I.a)(Object(I.a)({},Object(C.a)(Object(M.a)(n.prototype),"serialize",this).call(this)),{},{label:this.options.label})}}]),n}(T.LabelModel),F=n(33),K=function(e){Object(f.a)(n,e);var t=Object(m.a)(n);function n(e,r,i){var a;return Object(p.a)(this,n),(a=t.call(this,{type:"default",name:r,color:i})).isLabel=e,a.portsIn=[],a}return Object(g.a)(n,[{key:"doClone",value:function(e,t){t.portsIn=[],t.portsOut=[],Object(C.a)(Object(M.a)(n.prototype),"doClone",this).call(this,e,t)}},{key:"removePort",value:function(e){Object(C.a)(Object(M.a)(n.prototype),"removePort",this).call(this,e)}},{key:"addPort",value:function(e){return Object(C.a)(Object(M.a)(n.prototype),"addPort",this).call(this,e),e.getOptions().in&&-1===this.portsIn.indexOf(e)&&this.portsIn.push(e),e}},{key:"deserialize",value:function(e){var t=this;Object(C.a)(Object(M.a)(n.prototype),"deserialize",this).call(this,e),this.options.name=e.data.name,this.options.color=e.data.color,this.portsIn=u.map(e.data.portsInOrder,(function(e){return t.getPortFromID(e)})),this.isLabel=e.data.isLabel}},{key:"serialize",value:function(){return Object(I.a)(Object(I.a)({},Object(C.a)(Object(M.a)(n.prototype),"serialize",this).call(this)),{},{name:this.options.name,color:this.options.color,isLabel:this.isLabel})}},{key:"getInPorts",value:function(){return this.portsIn}}]),n}(T.NodeModel),R=function(e){Object(f.a)(n,e);var t=Object(m.a)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0;if(Object(p.a)(this,n),(e=t.call(this,Object(I.a)({type:"default",width:r.width||3,color:r.color||"gray",selectedColor:r.selectedColor||"rgb(0,192,255)",curvyness:0},r))).addLabel("0,N"),e.addLabel("relation name  ".concat(a||1," \n")),e.addLabel("0,N"),i){var o=new T.PointModel({link:Object(S.a)(e)});o.setPosition(i.position.x,i.position.y),e.addPoint(o)}return e.relName="relation name",e.properties=new K(!1,"relNode","rgb(0,192,255)"),e}return Object(g.a)(n,[{key:"calculateControlOffset",value:function(e){return e.getOptions().alignment===T.PortModelAlignment.RIGHT?[this.options.curvyness,0]:e.getOptions().alignment===T.PortModelAlignment.LEFT?[-this.options.curvyness,0]:e.getOptions().alignment===T.PortModelAlignment.TOP?[0,-this.options.curvyness]:[0,this.options.curvyness]}},{key:"getSVGPath",value:function(){if(2===this.points.length){var e,t,n=new F.BezierCurve;if(n.setSource(this.getFirstPoint().getPosition()),n.setTarget(this.getLastPoint().getPosition()),n.setSourceControl(this.getFirstPoint().getPosition().clone()),n.setTargetControl(this.getLastPoint().getPosition().clone()),this.sourcePort)(e=n.getSourceControl()).translate.apply(e,Object(D.a)(this.calculateControlOffset(this.getSourcePort())));if(this.targetPort)(t=n.getTargetControl()).translate.apply(t,Object(D.a)(this.calculateControlOffset(this.getTargetPort())));return n.getSVGCurve()}}},{key:"serialize",value:function(){var e=this.properties&&this.properties.getPorts()&&Object.values(this.properties.getPorts()),t=e&&e.map((function(e){return{label:e.label,propertyType:e.propertyType,isPrimaryKey:e.isPrimaryKey,isNotNull:e.isNotNull,isAutoincremented:e.isAutoincremented,isUnique:e.isUnique}}));return Object(I.a)(Object(I.a)({},Object(C.a)(Object(M.a)(n.prototype),"serialize",this).call(this)),{},{width:this.options.width,color:this.options.color,curvyness:this.options.curvyness,selectedColor:this.options.selectedColor,relName:this.relName,properties:t})}},{key:"deserialize",value:function(e){var t=new K(!1,"relNode","rgb(0,192,255)");e.data.properties.forEach((function(e){t.addPort(new z(!1,e.label,!1,e.isPrimaryKey,!1,!1,e.isNotNull,e.isAutoincremented,e.isUnique,e.propertyType))})),Object(C.a)(Object(M.a)(n.prototype),"deserialize",this).call(this,e),this.options.color=e.data.color,this.options.width=e.data.width,this.options.curvyness=e.data.curvyness,this.options.selectedColor=e.data.selectedColor,this.properties=t,this.relName=e.data.relName}},{key:"addLabel",value:function(e){if(e instanceof T.LabelModel)return Object(C.a)(Object(M.a)(n.prototype),"addLabel",this).call(this,e);var t=new A;return t.setLabel(e),Object(C.a)(Object(M.a)(n.prototype),"addLabel",this).call(this,t)}},{key:"setWidth",value:function(e){this.options.width=e,this.fireEvent({width:e},"widthChanged")}},{key:"setColor",value:function(e){this.options.color=e,this.fireEvent({color:e},"colorChanged")}}]),n}(T.LinkModel),U=n(144),q=function(){function e(){Object(p.a)(this,e)}return Object(g.a)(e,null,[{key:"UID",value:function(){return e.TESTING?(e.TESTING_UID++,"".concat(e.TESTING_UID)):"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}},{key:"closest",value:function(e,t){return document.body.closest?e.closest(t):U(e,t)}}]),e}();q.TESTING=!1,q.TESTING_UID=0;var G,z=function(e){Object(f.a)(n,e);var t=Object(m.a)(n);function n(e,r,i,a,o,l,s,c,u,d,g,f,m,b){var h;return Object(p.a)(this,n),(h=t.call(this,{id:f||q.UID(),in:!0,name:r,label:r,propertyType:d,alignment:b,type:e?"arrow":"default"})).label=r,h.isNamePort=i,h.links={},h.isPrimaryKey=a,h.isForeignKey=o,h.isPartialKey=l,h.isNotNull=s,h.isUnique=u,h.isAutoincremented=c,h.propertyType=d,h.fkPortId=m,h.dEngine=g,h}return Object(g.a)(n,[{key:"deserialize",value:function(e){Object(C.a)(Object(M.a)(n.prototype),"deserialize",this).call(this,e),this.options.in=e.data.in,this.options.label=e.data.label,this.label=e.data.label,this.isNamePort=e.data.isNamePort,this.isPrimaryKey=e.data.isPrimaryKey,this.isPartialKey=e.data.isPartialKey,this.isForeignKey=e.data.isForeignKey,this.isNotNull=e.data.isNotNull,this.isUnique=e.data.isUnique,this.isAutoincremented=e.data.isAutoincremented,this.propertyType=e.data.propertyType,this.fkPortId=e.data.fkPortId}},{key:"serialize",value:function(){return Object(I.a)(Object(I.a)({},Object(C.a)(Object(M.a)(n.prototype),"serialize",this).call(this)),{},{in:this.in,label:this.label,isNamePort:this.isNamePort,isPrimaryKey:this.isPrimaryKey,isPartialKey:this.isPartialKey,isForeignKey:this.isForeignKey,isNotNull:this.isNotNull,isUnique:this.isUnique,isAutoincremented:this.isAutoincremented,propertyType:this.propertyType,fkPortId:this.fkPortId})}},{key:"updateOptionsLabel",value:function(e){this.options.label=e}},{key:"updateOptionsPropertyType",value:function(e){this.options.propertyType=e}},{key:"link",value:function(e,t){var n=this.createLinkModel(t);return n.setSourcePort(this),n.setTargetPort(e),n.removeMiddlePoints(),n}},{key:"canLinkToPort",value:function(e){return e!==this&&(e.getParent()===this.getParent()&&this.recursiveRelation(e),!0)}},{key:"createLinkModel",value:function(e){var t=Object(C.a)(Object(M.a)(n.prototype),"createLinkModel",this).call(this);if(!t&&e)return e.generateModel({});var r=d.a.keys(this.dEngine.getModel().getLinks()).length;return console.log(r),t||new R({},{position:{x:this.getPosition().x+40,y:this.getPosition().y-100}},r+1)}},{key:"recursiveRelation",value:function(e){return this.link(e),!1}}]),n}(T.PortModel),B=function(e){Object(f.a)(n,e);var t=Object(m.a)(n);function n(e,r,i,a,o,l,s,c,u,d,g,f){return Object(p.a)(this,n),t.call(this,!0,e,r,i,a,o,l,s,c,u,null,d,g,f)}return Object(g.a)(n,[{key:"link",value:function(e,t){var n=this.createLinkModel();return n.setSourcePort(e),n.setTargetPort(this),n}},{key:"canLinkToPort",value:function(e){if(e===this)return!1;var t=this.getParent(),r=e.getParent(),i=r.getPorts(),a=t.getPorts(),o=Object.keys(a).find((function(e){return a[e].fkPortId===r.getOptions().id})),l=Object.keys(i).find((function(e){return i[e].fkPortId===t.getOptions().id})),s=Object.keys(a).find((function(e){return a[e].isPrimaryKey}))||"Id";return o||l||(s?r.addPort(new n(t.getOptions().name+a[s].getOptions().name,!1,!1,!0,!0,!0,!1,!1,"INT",q.UID(),t.getOptions().id)):r.addPort(new n(t.getOptions().name+"Id",!1,!1,!0,!0,!0,!1,!1,"INT",q.UID(),t.getOptions().id))),!0}},{key:"createLinkModel",value:function(){return new w}}]),n}(z),V=n(29);function H(){var e=Object(s.a)(["\n        cursor: not-allowed !important;\n      "]);return H=function(){return e},e}function W(){var e=Object(s.a)(["\n        background-color: black;\n        border-width: 4px !important;\n      "]);return W=function(){return e},e}function Y(){var e=Object(s.a)(["\n    color: white;\n    font-family: Helvetica, Arial;\n    padding: 5px;\n    margin: 0px 10px;\n    border: solid 1px ",";\n    border-radius: 5px;\n    margin-bottom: 2px;\n    cursor: pointer;\n    margin-top: ",";\n\n    display: flex;\n    justify-content: space-between;\n  \n    ","\n  \n    ","\n  "]);return Y=function(){return e},e}!function(e){e.Tray=b.default.div(Y(),(function(e){return e.color}),(function(e){return e.marginTop}),(function(e){return e.isSelected&&Object(V.css)(W())}),(function(e){return e.isDisabled&&Object(V.css)(H())}))}(G||(G={}));var J,X=function(e){Object(f.a)(n,e);var t=Object(m.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(g.a)(n,[{key:"render",value:function(){var e,t=this.props,n=t.isDisabled,r=t.isSelected,a=t.marginTop,o=t.color,l=t.name;return i.createElement(G.Tray,Object.assign({},this.props,{isDisabled:n,isSelected:r,marginTop:a,color:o}),null!==(e=this.props.children)&&void 0!==e?e:l)}}]),n}(i.Component),Q=(n(496),function(e){Object(f.a)(n,e);var t=Object(m.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(g.a)(n,[{key:"render",value:function(){return i.createElement("div",{style:this.props.style,className:this.buildClassNameString()},this.props.children)}},{key:"buildClassNameString",value:function(){var e="ms-Grid";return null!=this.props.className&&(e+=" ".concat(this.props.className)),e}}]),n}(i.Component)),_=function(e){Object(f.a)(n,e);var t=Object(m.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(g.a)(n,[{key:"render",value:function(){return i.createElement("div",{className:this.buildClassNameString()},this.props.children)}},{key:"buildClassNameString",value:function(){var e="ms-Grid-row";return this.props.flex&&(e+=" grid-row-flex"),null!=this.props.className&&(e+=" ".concat(this.props.className)),e}}]),n}(i.Component),$=function(e){Object(f.a)(n,e);var t=Object(m.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(g.a)(n,[{key:"render",value:function(){return i.createElement("div",{className:this.buildClassNameString(),onDoubleClick:this.props.onDoubleClick},this.props.children)}},{key:"buildGridColConfigClassNames",value:function(e,t){if(null==t)return"";var n=" ms-".concat(e);return"string"===typeof t?n+=t:(n+=t.size,null!=t.pull&&(n+=" ms-".concat(e,"Pull").concat(t.pull)),null!=t.push&&(n+=" ms-".concat(e,"Push").concat(t.push)),null!=t.offset&&(n+=" ms-".concat(e,"Offset").concat(t.offset)),null!=t.order&&(n+=" grid-flex-order-".concat(e,"-").concat(t.order))),n}},{key:"buildClassNameString",value:function(){var e="ms-Grid-col";return null!=this.props.className&&(e+=" ".concat(this.props.className)),null!=this.props.hidden&&(e+=" ms-hidden".concat(this.props.hidden)),null!=this.props.order&&(e+=" grid-flex-order-".concat(this.props.order)),e+=this.buildGridColConfigClassNames("sm",this.props.sm),e+=this.buildGridColConfigClassNames("md",this.props.md),e+=this.buildGridColConfigClassNames("lg",this.props.lg),e+=this.buildGridColConfigClassNames("xl",this.props.xl),e+=this.buildGridColConfigClassNames("xxl",this.props.xxl),e+=this.buildGridColConfigClassNames("xxxl",this.props.xxxl)}}]),n}(i.Component);n(497);!function(e){e.BIT="BIT",e.TINYINT="TINYINT",e.SMALLINT="SMALLINT",e.INT="INT",e.BIGINT="BIGINT",e["DECIMAL()"]="DECIMAL()",e["NUMERIC()"]="NUMERIC()",e["FLOAT()"]="FLOAT()",e.REAL="REAL",e.DATE="DATE",e.TIME="TIME",e.DATETIME="DATETIME",e.TIMESTAMP="TIMESTAMP",e.YEAR="YEAR",e["CHAR()"]="CHAR()",e["VARCHAR()"]="VARCHAR()",e.TEXT="TEXT",e["NCHAR()"]="NCHAR()",e["NVARCHAR()"]="NVARCHAR()",e.NTEXT="NTEXT",e["BINARY()"]="BINARY()",e["VARBINARY()"]="VARBINARY()",e.IMAGE="IMAGE",e.CLOB="CLOB",e.BLOB="BLOB",e.XML="XML",e.JSON="JSON",e.MONEY="MONEY"}(J||(J={}));var Z,ee=n(267),te=n.n(ee);function ne(){var e=Object(s.a)(["\n    cursor: cell\n  "]);return ne=function(){return e},e}!function(e){e.AddNewAtributeButton=b.default.p(ne())}(Z||(Z={}));var re,ie=function(e){var t=a.a.useState(null),n=Object(c.a)(t,2),r=n[0],i=n[1],o=function(){var e=a.a.useState(0),t=Object(c.a)(e,2)[1];return function(){return t((function(e){return++e}))}}();a.a.useEffect((function(){return function(){s(),u()}})),a.a.useMemo((function(){i(e.selectedItem)}),[e.selectedItem]);var l=function(e,t){e.persist(),r.getPortFromID(t.getOptions().id).isPrimaryKey=!t.isPrimaryKey,r.getPortFromID(t.getOptions().id).isNotNull=!!t.isPrimaryKey,r.getPortFromID(t.getOptions().id).isAutoincremented=!!t.isPrimaryKey,r.getPortFromID(t.getOptions().id).isUnique=!!t.isPrimaryKey,function(){var e=r&&r.ports&&r.ports;Object.keys(e).map((function(t){return console.log(e[t].isPartialKey=!1)}))}(),o()},s=function(){var t=e.selectedItem.getPorts(),n=Object.values(t).map((function(e){return{label:e.label,id:e.getOptions().id}}));Object.values(t).map((function(e){return{label:e.getOptions().label,id:e.getOptions().id}})).forEach((function(t,r){t=n[r],e.selectedItem.getPortFromID(t.id).updateOptionsLabel(n[r].label)}))},u=function(){var t=e.selectedItem.getPorts(),n=Object.values(t).map((function(e){return{label:e.propertyType,id:e.getOptions().id}})),r=Object.values(t).map((function(e){return{label:e.getOptions().propertyType,id:e.getOptions().id}}));n.forEach((function(t,n){console.log(t.label,t.label.endsWith(")"),t.label[t.label.length-1],"("===t.label[t.label.length-1]),t.label.endsWith(")")&&"("===t.label[t.label.length-2]&&(e.selectedItem.getPortFromID(t.id).propertyType=r[n].label)})),r.forEach((function(t,r){t=n[r],e.selectedItem.getPortFromID(t.id).updateOptionsPropertyType(n[r].label)})),o(),console.log(n,r)},p=[{key:"Property Name",dataField:"label",text:"Property Name",formatter:function(t,n){return a.a.createElement("div",{className:"input"},a.a.createElement("input",{style:{width:"100px"},className:"darkInput",type:"text",defaultValue:n.label,onChange:function(t){return function(t,n){t.persist();var i=e.selectedItem.getPorts(),a=Object.values(i).map((function(e){return e.label.toLowerCase().trim()}));d.a.keys(e.selectedItem.getPorts()).length;if(a.includes(t.target.value.toLowerCase().trim())?r.getPortFromID(n.getOptions().id).label=r.getPortFromID(n.getOptions().id).getOptions().label:r.getPortFromID(n.getOptions().id).label=t.target.value.trim(),e.relView){var o=null!==e.link.properties&&e.link.properties.getPorts(),l="";if(Object.keys(o).length>0)Object.keys(o).map((function(e){return l+="".concat(o[e].label," ").concat(o[e].propertyType," \n")})),e.link.getLabels()[1].getOptions().label="".concat(e.relationName,"\n").concat(l)}}(t,n)}}))}},{style:{paddingLeft:0},dataField:"propertyType",text:"Property Type",key:"Property Type",formatter:function(e,t){return a.a.createElement("div",{className:"input"},a.a.createElement("input",{style:{width:"100px"},type:"text",list:"types",className:"darkInput",onChange:function(e){return function(e,t){e.persist(),r.getPortFromID(t.getOptions().id).propertyType=e.target.value}(e,t)},defaultValue:t.propertyType}),a.a.createElement("datalist",{id:"types"},Object.values(J).map((function(e){return a.a.createElement("option",{key:e,value:e},e)}))))}},{dataField:"isPrimaryKey",text:"Is Primary Key",key:"Is Primary Key",formatter:function(e,t){return a.a.createElement("div",{className:"checkbox"},a.a.createElement("label",null,a.a.createElement("input",{type:"checkbox",checked:t.isPrimaryKey,onChange:function(e){return l(e,t)}})))}},{dataField:"isForeignKey",text:"Is Foreign Key",key:"Is Foreign Key",formatter:function(e,t){return a.a.createElement("div",{className:"checkbox"},a.a.createElement("label",null,a.a.createElement("input",{type:"checkbox",checked:t.isForeignKey,onChange:function(e){return function(e,t){e.persist(),r.getPortFromID(t.getOptions().id).isForeignKey=!t.isForeignKey,r.getPortFromID(t.getOptions().id).isNotNull=!!t.isForeignKey,o()}(e,t)}})))}},{dataField:"isPartialKey",text:"Is Partial Key",key:"Is Partial Key",formatter:function(e,t){return a.a.createElement("div",{className:"checkbox"},a.a.createElement("label",null,a.a.createElement("input",{type:"checkbox",checked:t.isPartialKey,onChange:function(e){return function(e,t){e.persist(),r.getPortFromID(t.getOptions().id).isPartialKey=!t.isPartialKey,r.getPortFromID(t.getOptions().id).isNotNull=!!t.isPartialKey,o()}(e,t)}})))}},{dataField:"isNotNull",text:"Not Null",key:"Not Null",formatter:function(e,t){return a.a.createElement("div",{className:"checkbox"},a.a.createElement("label",null,a.a.createElement("input",{disabled:t.isPrimaryKey||t.isForeignKey,type:"checkbox",checked:t.isNotNull,onChange:function(e){return function(e,t){e.persist(),r.getPortFromID(t.getOptions().id).isNotNull=!t.isNotNull,o()}(e,t)}})))}},{dataField:"isAutoincremented",text:"Is Auto Incremented",key:"Is Auto Incremented",formatter:function(e,t){return a.a.createElement("div",{className:"checkbox"},a.a.createElement("label",null,a.a.createElement("input",{disabled:t.isPrimaryKey,type:"checkbox",checked:t.isAutoincremented,onChange:function(e){return function(e,t){e.persist(),r.getPortFromID(t.getOptions().id).isAutoincremented=!t.isAutoincremented,o()}(e,t)}})))}},{dataField:"isUnique",text:"Is Unique",key:"Is Unique",formatter:function(e,t){return a.a.createElement("div",{className:"checkbox"},a.a.createElement("label",null,a.a.createElement("input",{disabled:t.isPrimaryKey,type:"checkbox",checked:t.isUnique,onChange:function(e){return function(e,t){e.persist(),r.getPortFromID(t.getOptions().id).isUnique=!t.isUnique,o()}(e,t)}})))}},{dataField:"remove",text:"Remove",key:"Remove",formatter:function(t,n){return a.a.createElement("div",{className:"checkbox"},a.a.createElement("label",null,a.a.createElement("span",{onClick:function(){return function(t){if(console.log("port: ",t),r.removePort(t),e.link){console.log("linkports: ",e.link);var n=null!==e.link.properties&&e.link.properties.getPorts(),i="";if(Object.keys(n).length>0){Object.keys(n).filter((function(e){return e!==t.getID()})).map((function(e){return i+="".concat(n[e].label," ").concat(n[e].propertyType," \n")}));var a=e.link.getLabels(),l=a[1].getOptions().label;a[1].getOptions().label=l.slice(0,l.indexOf("\n")),a[1].getOptions().label+="\n".concat(i)}}o()}(n)},className:"mi mi-Delete red onhoverPointer"})))}}],g=r&&r.ports&&r.ports,f=g&&Object.keys(g).map((function(e){return g[e]})).filter((function(e){return!e.isNamePort})),m=p;return!(!f||!f.find((function(e){return e.isPrimaryKey})))&&(m=m.filter((function(e){return"isPartialKey"!==e.dataField}))),e.isLogic||(m=m.filter((function(e){return"isForeignKey"!==e.dataField}))),a.a.createElement("div",{className:"".concat(!e.relView&&"relView")},a.a.createElement(te.a,{keyField:"id",data:f,columns:e.relView?m.filter((function(e){return"isPrimaryKey"!==e.dataField&&"isPartialKey"!==e.dataField})):m,bordered:!1}),a.a.createElement(Z.AddNewAtributeButton,{onClick:function(){return function(t){(r.addPort(new B("new atribute ".concat(t),!1,!1,!1,!1,!1,!1,!1,"INT",q.UID())),e.relView)&&(e.link.getLabels()[1].getOptions().label+="".concat("new atribute ".concat(t)," INT \n"));o()}(f.length)}},"Add new atribute"))};function ae(){var e=Object(s.a)(["\n        font-size: ","px;\n        margin-top: 15px;\n        width: 90%;\n    "]);return ae=function(){return e},e}function oe(){var e=Object(s.a)(["\n    background-color: #3E3E3E;\n    color: #E9F7F7;\n    margin-top: 7px;\n    width: 150px;\n    margin-right: 0px;\n    padding-right: 0px;\n\n    ","\n  "]);return oe=function(){return e},e}!function(e){e.Input=b.default.input(oe(),(function(e){var t=e.fontSize;return Object(V.css)(ae(),t)}))}(re||(re={}));var le=function(e){Object(f.a)(n,e);var t=Object(m.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(g.a)(n,[{key:"render",value:function(){return i.createElement(re.Input,this.props,this.props.children)}}]),n}(i.Component);function se(){var e=i.useState(0),t=Object(c.a)(e,2)[1];return function(){return t((function(e){return++e}))}}var ce,ue=function(e){var t=i.useState(null),n=Object(c.a)(t,2),r=n[0],a=n[1],o=i.useState(""),l=Object(c.a)(o,2),s=l[0],u=l[1],d=i.useState(""),p=Object(c.a)(d,2),g=p[0],f=p[1],m=i.useState(!1),b=Object(c.a)(m,2),h=b[0],y=b[1],v=se();i.useMemo((function(){a(e.selectedItem),f(e.selectedItem.getOptions().name),u(e.selectedItem.getOptions().name)}),[e.selectedItem]),i.useEffect((function(){return e.selectedItem.setLocked(),function(){e.selectedItem.setLocked(!1)}}));var O=function(t){(t.persist(),""!=t.target.value)&&(e.diagramEngine.getModel().getNodes().map((function(e){return e.getOptions().name.toLowerCase().trim()})).includes(t.target.value.toLowerCase().trim())?r.getOptions().name=s:r.getOptions().name=t.target.value.trim());v()};return r?i.createElement("div",{className:"trayBottom"},i.createElement(Q,null,i.createElement(_,null,i.createElement($,null,h?e.selectedItem.isLabel?i.createElement("textarea",{style:{height:"200px"},className:"darkInput fs-28",defaultValue:g,onChange:function(e){return O(e)}}):i.createElement(le,{fontSize:28,type:"text",defaultValue:g,onChange:function(e){return O(e)}}):i.createElement("h1",{style:{wordBreak:"break-all"},onDoubleClick:function(){return y(!0)}},g)),r.isLabel?null:i.createElement(ie,{update:e.update,selectedItem:e.selectedItem,diagramEngine:e.diagramEngine,isLogic:e.isLogic})))):null},de=n(105),pe=n.n(de),ge=n(268),fe=(n(536),n(36)),me=n(145),be=n.n(me),he=n(74),ye=n.n(he),ve=function(e){var t=Object(i.useState)("DatabaseName"),n=Object(c.a)(t,2),r=n[0],o=n[1],l=Object(i.useState)(!1),s=Object(c.a)(l,2),u=s[0],d=s[1],p=e.mssqlString&&be.a.format(e.mssqlString,{language:"sql",indent:"  "}),g=e.mysqlString&&be.a.format(e.mysqlString,{language:"db2",indent:"  "});return a.a.createElement(fe.a,{modal:!0,closeOnDocumentClick:!0,open:e.isOpen,closeOnEscape:!0},a.a.createElement("div",{className:"sql-result-dialog"},a.a.createElement("input",{style:{marginRight:"10px"},type:"text",onChange:function(e){return o(e.target.value)},value:r}),a.a.createElement("button",{style:{marginRight:"10px"},onClick:function(){console.log(u),e.generateScript(r,u?"mysql":"mssql")}},"Generate"),a.a.createElement("button",{className:"".concat(u?"":"selected-sql"),onClick:function(){d(!1)}},"MSSQL"),a.a.createElement("button",{className:"".concat(u?"selected-sql":""),onClick:function(){d(!0)}},"MySQL"),a.a.createElement("textarea",{style:{marginTop:"5px"},readOnly:!0,value:u?g:p,contentEditable:!1}),a.a.createElement("button",{style:{marginRight:"10px"},disabled:!e.mssqlString,onClick:function(){var t=new Blob([p],{type:"text/plain;charset=utf-8"});ye.a.saveAs(t,"".concat(r,".sql")),e.update()}},"Download MSSQL"),a.a.createElement("button",{style:{marginRight:"10px"},disabled:!e.mysqlString,onClick:function(){var t=new Blob([g],{type:"text/plain;charset=utf-8"});ye.a.saveAs(t,"".concat(r,".sql")),e.update()}},"Download mySQL")))},Oe=n(146),ke=n.n(Oe),Pe=function(e){var t=Object(i.useState)(""),n=Object(c.a)(t,2),r=n[0],o=n[1],l=Object(i.useState)(""),s=Object(c.a)(l,2),u=s[0],d=s[1];Object(i.useEffect)((function(){return o("")}),[e.isOpen]);var p=function(){var t=Object(ge.a)(pe.a.mark((function t(n,r){var i,a,l,s,c,u,p,g,f,m,b;return pe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=e.serializeDiagram(),a=i.layers[1].models,l=Object.keys(a).map((function(e){return a[e]})),s=i.layers[0].models,c=Object.keys(s).map((function(e){return s[e]})),u={nodes:l,links:c},p=JSON.stringify(u,null,2),"mssql"!==r){t.next=15;break}return console.log("mssql"),t.next=11,ke.a.post("https://sql-generator.pl/api/setjob/mssql",{SerializedModel:p,DatabaseName:n,RelationType:e.isUml?"UML":"CHEN"});case 11:200===(g=t.sent).status?o(g.data):(o(f="There was an error while processing your request"),console.log(f)),t.next=20;break;case 15:return console.log("mysql"),t.next=18,ke.a.post("https://sql-generator.pl/api/setjob/mysql",{SerializedModel:p,DatabaseName:n,RelationType:e.isUml?"UML":"CHEN"});case 18:200===(m=t.sent).status?d(m.data):(d(b="There was an error while processing your request"),console.log(b));case 20:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}();return a.a.createElement(ve,{update:e.update,mssqlString:r,mysqlString:u,generateScript:function(e,t){return p(e,t)},isOpen:e.isOpen})},Ee=(n(571),function(e){var t,n=Object(i.useState)(""),r=Object(c.a)(n,2),o=r[0],l=r[1],s=function(e){var n=t.result;l(n)};return a.a.createElement(fe.a,{modal:!0,closeOnDocumentClick:!0,open:e.isOpen,closeOnEscape:!0,onClose:function(){return e.update()}},a.a.createElement("div",{className:"sql-result-dialog"},a.a.createElement("input",{type:"file",onChange:function(e){return n=e.target.files[0],(t=new FileReader).onloadend=s,void t.readAsText(n);var n},accept:".dbjson"}),a.a.createElement("button",{onClick:function(){return e.loadDiagram(o)}},"Load")))}),je=function(e){return a.a.createElement(Ee,{update:e.update,loadDiagram:function(t){return function(t){var n=e.app.getDiagramEngine();try{var r=JSON.parse(t);console.log(r),e.setIsUml(r.isUml);var i=new P.DiagramModel,a=new P.DiagramModel;r.conceptualDiagram&&(i.deserializeModel(r.conceptualDiagram,n),i.getLinks().forEach((function(e){e.getLabels().splice(0,3)})),e.app.loadConceptualModel(i),e.setIsLogic(!1)),r.logicalDiagram&&(a.deserializeModel(r.logicalDiagram,n),a.getLinks().forEach((function(e){e.getLabels().splice(0,3)})),e.app.loadLogicModel(a),e.setIsLogic(!0)),n.repaintCanvas(),e.update()}catch(o){console.log(o)}}(t)},isOpen:e.isOpen})},Ne=(n(572),function(e){var t=Object(i.useState)("diagram"),n=Object(c.a)(t,2),r=n[0],o=n[1];return a.a.createElement(fe.a,{modal:!0,closeOnDocumentClick:!0,open:e.isOpen,closeOnEscape:!0,onClose:function(){return e.update()}},a.a.createElement("div",{className:"sql-result-dialog"},a.a.createElement("input",{type:"text",onChange:function(e){return o(e.target.value)},value:r}),a.a.createElement("button",{onClick:function(){var t=JSON.stringify({conceptualDiagram:e.diagramModel.serialize(),logicalDiagram:u.isEmpty(e.secondModel.getActiveNodeLayer().getNodes())?null:e.secondModel.serialize(),isUml:e.isUml});console.log("do zapisu",e.secondModel,e.secondModel.getActiveNodeLayer().getNodes());var n=new Blob([t],{type:"text/plain;charset=utf-8"});ye.a.saveAs(n,"".concat(r,".dbjson")),e.update()}},"save")))}),xe=(n(573),n(269)),Le=n.n(xe),Ie=function(e){var t=Object(i.useState)("diagram"),n=Object(c.a)(t,2),r=n[0],o=n[1];return a.a.createElement(fe.a,{modal:!0,closeOnDocumentClick:!0,open:e.isOpen,closeOnEscape:!0,onClose:function(){return e.update()}},a.a.createElement("div",{className:"sql-result-dialog"},a.a.createElement("input",{type:"text",onChange:function(e){return o(e.target.value)},value:r}),a.a.createElement("button",{onClick:function(){Le.a.toJpeg(document.getElementById("diagram-layer"),{quality:.95}).then((function(t){var n=document.createElement("a");n.download="".concat(r,".jpeg"),n.href=t,n.click(),e.update()}))}},"save")))};function we(){var e=Object(s.a)(["\n    background-color: rgba(255, 255, 255, 0.274);\n    padding: 10px;\n    text-align: center;\n  "]);return we=function(){return e},e}function Ce(){var e=Object(s.a)(["\n    display: grid;\n    grid-template-columns: auto auto auto;\n  "]);return Ce=function(){return e},e}!function(e){e.GridContainer=b.default.div(Ce()),e.GridItem=b.default.div(we())}(ce||(ce={}));var Me,Te=function(e){var t=Object(i.useState)("1, N"),n=Object(c.a)(t,2),r=n[0],o=n[1],l=Object(i.useState)("1, N"),s=Object(c.a)(l,2),u=s[0],d=s[1],p=Object(i.useState)(""),g=Object(c.a)(p,2),f=(g[0],g[1]),m=Object(i.useState)("relation name"),b=Object(c.a)(m,2),h=b[0],y=b[1];a.a.useEffect((function(){var t=e.link&&e.link.getLabels().length>2&&e.link.getLabels()[0].getOptions().label,n=(e.link&&e.link.getLabels().length>2&&e.link.getLabels()[1].getOptions().label,e.link&&e.link.getLabels().length>2&&e.link.getLabels()[2].getOptions().label);o(t||"1, N"),d(n||"1, N")}),[e.link]);var v=function(){var t=O(),n=e.link.getLabels();n[0].getOptions().label=r,n[2].getOptions().label=u,n[1].getOptions().label=h+t,e.link.relName=h;for(var i=e.link.getPoints(),a=1;a<i.length-1;a++){i[a].remove()}f(t),e.update()},O=function(){console.log(e.link.relName);var t=null!==e.link.properties&&e.link.properties.getPorts(),n="";return Object.keys(t).length>0?(Object.keys(t).map((function(e){return n+="".concat(t[e].label," ").concat(t[e].propertyType," \n")})),"\n"+n):""},k=e.link&&e.link.getSourcePort()&&e.link.getSourcePort().getParent(),P=e.link&&e.link.getTargetPort()&&e.link.getTargetPort().getParent(),E=function(){var t=e.link&&e.link.getSourcePort(),n=e.link&&e.link.getTargetPort();if(t.removeLink(e.link),n.removeLink(e.link),e.diagramEngine.getModel().removeLink(e.link),e.isLogic){var r=e.link.getTargetPort().getParent(),i=e.link.getSourcePort().getParent(),a=i.getPorts(),o=r.getPorts(),l=Object.keys(o).filter((function(e){return o[e].fkPortId===i.getOptions().id}))[0],s=Object.keys(a).filter((function(e){return a[e].fkPortId===r.getOptions().id}))[0];l?r.removePort(o[l]):i.removePort(a[s])}e.update()},j=a.a.createElement(a.a.Fragment,null,a.a.createElement("option",{value:"0, N"},"0, N"),a.a.createElement("option",{value:"1, N"},"1, N"),a.a.createElement("option",{value:"0, 1"},"0, 1"),a.a.createElement("option",{value:"1, 1"},"1, 1"),a.a.createElement("option",{value:"N, N"},"N, N")),N=function(e){return a.a.createElement(ce.GridItem,null,a.a.createElement("select",{className:"darkSelect",onChange:function(t){return"left"===e?o(t.target.value):d(t.target.value)},value:"left"===e?r:u},j))};return e.isLogic?a.a.createElement(fe.a,{modal:!0,closeOnDocumentClick:!0,open:e.isOpen,closeOnEscape:!0},a.a.createElement(a.a.Fragment,null,a.a.createElement(ce.GridItem,null,a.a.createElement("button",{onClick:E},"Remove")),a.a.createElement(ce.GridItem,null,a.a.createElement("button",{onClick:function(){var t=e.link.getTargetPort().getParent(),n=e.link.getSourcePort().getParent(),r=n.getPorts(),i=t.getPorts(),a=Object.keys(i).filter((function(e){return i[e].fkPortId===n.getOptions().id}))[0],o=Object.keys(r).filter((function(e){return r[e].fkPortId===t.getOptions().id}))[0];if(a){t.removePort(i[a]);var l=Object.keys(i).filter((function(e){return i[e].isPrimaryKey}))[0];n.addPort(new B(t.getOptions().name+i[l].getOptions().name,!1,!1,!1,!0,!1,!0,!0,"INT",q.UID(),t.getOptions().id))}else{n.removePort(r[o]);var s=Object.keys(r).filter((function(e){return r[e].isPrimaryKey}))[0];n.addPort(new B(n.getOptions().name+r[s].getOptions().name,!1,!1,!1,!0,!1,!0,!0,"INT",q.UID(),n.getOptions().id))}var c=e.link.getTargetPort(),u=e.link.getSourcePort(),d=e.diagramEngine.getModel();d.removeLink(e.link);var p=new w({type:"arrow"});p.setSourcePort(c),p.setTargetPort(u),d.addLink(p),e.update()}},"Reverse")))):a.a.createElement(fe.a,{modal:!0,closeOnDocumentClick:!0,open:e.isOpen,closeOnEscape:!0,onClose:e.update},a.a.createElement(a.a.Fragment,null,a.a.createElement(ce.GridContainer,null,a.a.createElement(ce.GridItem,null,a.a.createElement("p",null,k&&k.getOptions().name)),a.a.createElement(ce.GridItem,null,a.a.createElement("input",{type:"text",defaultValue:h,onChange:function(e){return y(e.target.value)}})),a.a.createElement(ce.GridItem,null,a.a.createElement("p",null,P&&P.getOptions().name)),N("left"),a.a.createElement(ce.GridItem,null,a.a.createElement("button",{onClick:v},"SAVE")),N("right"),a.a.createElement(ce.GridItem,null),a.a.createElement(ce.GridItem,null,a.a.createElement("button",{onClick:E},"Remove"))),e.link&&a.a.createElement("div",null,a.a.createElement("h3",{style:{margin:0}},"Atributes:"),a.a.createElement(ie,{relationName:h,update:v,relView:!0,link:e.link,diagramEngine:e.diagramEngine,selectedItem:e.link.properties,isLogic:e.isLogic}))))};function De(){var e=Object(s.a)(["\n    display: inline-block;\n    padding-top: 3px;\n    padding-right: 5px;\n  "]);return De=function(){return e},e}function Se(){var e=Object(s.a)(["\n    position: relative;\n    flex-grow: 1;\n  "]);return Se=function(){return e},e}function Ae(){var e=Object(s.a)(["\n    display: flex;\n    flex-grow: 1;\n  "]);return Ae=function(){return e},e}function Fe(){var e=Object(s.a)(["\n    display: flex;\n    background: rgb(30, 30, 30);\n    flex-grow: 0;\n    flex-shrink: 0;\n    color: white;\n    font-family: Helvetica, Arial, sans-serif;\n    padding: 12px;\n    align-items: center;\n  "]);return Fe=function(){return e},e}function Ke(){var e=Object(s.a)(["\n    flex-grow: 1;\n    display: flex;\n    flex-direction: column;\n    min-height: 100%;\n  "]);return Ke=function(){return e},e}!function(e){e.Body=b.default.div(Ke()),e.Header=b.default.div(Fe()),e.Content=b.default.div(Ae()),e.Layer=b.default.div(Se()),e.DropdownIcon=b.default.span(De())}(Me||(Me={}));var Re,Ue=function(e){var t=i.useState(!1),n=Object(c.a)(t,2),r=n[0],a=n[1],o=i.useState(!1),l=Object(c.a)(o,2),s=l[0],d=l[1],p=i.useState(!1),g=Object(c.a)(p,2),f=g[0],m=g[1],b=i.useState(!1),h=Object(c.a)(b,2),y=h[0],O=h[1],E=i.useState(!1),N=Object(c.a)(E,2),x=N[0],I=N[1],w=i.useState(!1),C=Object(c.a)(w,2),M=C[0],T=C[1],D=i.useState(null),S=Object(c.a)(D,2),A=S[0],F=S[1],R=i.useState(null),U=Object(c.a)(R,2),q=U[0],G=U[1],V=i.useState(!0),H=Object(c.a)(V,2),W=H[0],Y=H[1],J=i.useState(!1),Q=Object(c.a)(J,2),_=Q[0],$=Q[1],Z=se();i.useEffect((function(){F(null),G(null)}),[]);var ee=function(){e.app.getDiagramEngine().getModel().getLinks().forEach((function(e){var t=e.getLabels()[0].getOptions().label.substring(0,1),n=e.getLabels()[2].getOptions().label.substring(0,1);e.getLabels()[0].getOptions().label=n+e.getLabels()[0].getOptions().label.substring(1),e.getLabels()[2].getOptions().label=t+e.getLabels()[2].getOptions().label.substring(1)}))},te=function(){G(null),F(null),a(!1),O(!1),I(!1),T(!1),m(!1),d(!1)};return i.createElement(Me.Body,null,i.createElement(Me.Header,null,"DB Diagram Scripter"),i.createElement(Me.Content,null,i.createElement(v,null,i.createElement(k,{model:{type:"default"},name:_?"Relation":"Entity",color:"rgb(0,192,255)"}),i.createElement(k,{model:{type:"label"},name:"Label",color:"rgb(192,255,0)"}),i.createElement(X,{name:"Load Diagram",color:"rgb(255,123,0)",marginTop:"75px",onClick:function(){m(!0),F(null)}}),i.createElement(X,{color:"rgb(255,123,0)",onClick:function(){T(!M),F(null)}},i.createElement(i.Fragment,null,"Save",i.createElement(Me.DropdownIcon,{className:"mi ".concat(M?"mi-ArrowUp8":"mi-ArrowDown8")}))),M&&i.createElement(X,{name:"File",color:"rgb(255,123,0)",onClick:function(){O(!0),F(null)}}),M&&i.createElement(X,{name:"JPEG",color:"rgb(255,123,0)",onClick:function(){I(!0),F(null)}}),i.createElement(X,{isSelected:!_,name:"Conceptual View",color:"rgb(0,50,100)",marginTop:"75px",onClick:function(){_&&(e.app.setConceptualModel(),$(!1))}}),i.createElement(X,{isSelected:_,name:"Logical View",color:"rgb(0,50,100)",onClick:function(){_||(e.app.setLogicModel(),$(!0))}}),i.createElement(X,{isDisabled:_,isSelected:W,name:"UML",color:"rgb(152,50,100)",marginTop:"75px",onClick:function(){_||W||(ee(),Y(!0))}}),i.createElement(X,{isDisabled:_,isSelected:!W,name:"Chen",color:"rgb(152,50,100)",onClick:function(){!_&&W&&(ee(),Y(!1))}}),i.createElement(X,{name:"Create DB Code",color:"rgb(255,0,0)",marginTop:"60px",onClick:function(){a(!0),F(null)}})),i.createElement(Me.Layer,{id:"diagram-layer",onDrop:function(t){var n,r=JSON.parse(t.dataTransfer.getData("storm-diagram-node")),i=e.app.getDiagramEngine().getModel().getNodes().map((function(e){return e.getOptions().name.toLowerCase().trim()})),a=u.keys(e.app.getDiagramEngine().getModel().getNodes()).length,o=i.includes("Entity".concat(a+1).toLowerCase().trim())?"Entity".concat(a+1,"_").concat(a+1):"Entity".concat(a+1);"default"===r.type?(n=new K(!1,o,"rgb(0,192,255)"),_?(n.addPort(new B("Id",!1,!0,!1,!1,!0,!0,!0,"INT")),n.addPort(new B("",!0,!1,!1,!1,!1,!1,!1,"INT")),n.addPort(new B("1",!0,!1,!1,!1,!1,!1,!1,"INT"))):(n.addPort(new z(_,"Id",!1,!0,!1,!1,!0,!0,!0,"INT",e.app.getDiagramEngine())),n.addPort(new z(_,"",!0,!1,!1,!1,!1,!1,!1,"INT",e.app.getDiagramEngine())),n.addPort(new z(_,"1",!0,!1,!1,!1,!1,!1,!1,"INT",e.app.getDiagramEngine())))):n=new K(!0,"Label ","rgb(192,255,0)");var l=e.app.getDiagramEngine().getRelativeMousePoint(t);n.setPosition(l),e.app.getDiagramEngine().getModel().addNode(n),Z()},onDragOver:function(e){e.preventDefault()},onClick:function(t){(t.preventDefault(),t.ctrlKey&&e.app.getDiagramEngine().getModel().getSelectedEntities()[0]instanceof P.PointModel)&&(e.app.getDiagramEngine().getModel().getSelectedEntities()[0].remove(),Z());te()},onDoubleClick:function(t){if(t.preventDefault(),e.app.getDiagramEngine().getModel().getSelectedEntities()[0]instanceof P.PointModel)G(e.app.getDiagramEngine().getModel().getSelectedEntities()[0].getParent()),d(!0),F(null);else if(e.app.getDiagramEngine().getModel().getSelectedEntities()[0]instanceof K){te();var n=e.app.getDiagramEngine().getModel().getSelectedEntities()[0];F(n)}}},i.createElement(L,null,i.createElement(j.CanvasWidget,{className:"srd-demo-canvas",engine:e.app.getDiagramEngine()}))),null!=A?i.createElement(ue,{update:te,isLogic:_,selectedItem:A,diagramEngine:e.app.getDiagramEngine()}):null,i.createElement(Pe,{isUml:W,isLogic:_,update:te,isOpen:r,serializeDiagram:function(){return _||(e.app.setLogicModel(),$(!0)),e.app.getDiagramEngine().getModel().serialize()}}),i.createElement(je,{update:te,isOpen:f,app:e.app,setIsUml:Y,setIsLogic:$}),i.createElement(Ne,{update:te,diagramModel:e.app.getActiveDiagram(),secondModel:e.app.getLogicDiagram(),isOpen:y,isUml:W}),i.createElement(Ie,{update:te,diagramModel:e.app.getActiveDiagram(),isOpen:x}),i.createElement(Te,{diagramEngine:e.app.getDiagramEngine(),update:te,isOpen:s,link:q,isLogic:_})))},qe=function(e){var t=e.point,n=e.previousPoint,r=a.a.useState(!1),i=Object(c.a)(r,2)[1],o=90+180*Math.atan2(t.getPosition().y-n.getPosition().y,t.getPosition().x-n.getPosition().x)/Math.PI;return a.a.createElement("g",{className:"arrow",transform:"translate("+t.getPosition().x+", "+t.getPosition().y+")"},a.a.createElement("g",{style:{transform:"rotate("+o+"deg)"}},a.a.createElement("g",{transform:"translate(0, -3)"},a.a.createElement("polygon",{points:"0,10 8,30 -8,30",fill:e.color,onMouseLeave:function(){return i(!1)},onMouseEnter:function(){return i(!0)},"data-id":t.getID(),"data-linkid":t.getLink().getID()}))))},Ge=function(e){Object(f.a)(n,e);var t=Object(m.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(g.a)(n,[{key:"generateArrow",value:function(e,t){return a.a.createElement(qe,{key:e.getID(),point:e,previousPoint:t,colorSelected:this.props.link.getOptions().selectedColor,color:this.props.link.getOptions().color})}},{key:"render",value:function(){var e=this,t=this.props.link.getPoints(),n=[];this.refPaths=[];for(var r=function(r){n.push(e.generateLink(P.LinkWidget.generateLinePath(t[r],t[r+1]),{"data-linkid":e.props.link.getID(),"data-point":r,onMouseDown:function(t){e.addPointToLink(t,r+1)}},r))},i=0;i<t.length-1;i++)r(i);n.push(this.generateArrow(t[0],t[1]));for(var o=1;o<t.length-1;o++)n.push(this.generatePoint(t[o]));return n.push(this.generatePoint(t[t.length-1])),a.a.createElement("g",{"data-default-link-test":this.props.link.getOptions().testName},n)}}]),n}(P.DefaultLinkWidget),ze=function(e){Object(f.a)(n,e);var t=Object(m.a)(n);function n(){return Object(p.a)(this,n),t.call(this,"arrow")}return Object(g.a)(n,[{key:"generateModel",value:function(){return new w}},{key:"generateReactWidget",value:function(e){return a.a.createElement(Ge,{link:e.model,diagramEngine:this.engine})}}]),n}(P.DefaultLinkFactory);function Be(){var e=Object(s.a)(["\n   margin-right: 5px;\n  "]);return Be=function(){return e},e}function Ve(){var e=Object(s.a)(["\n    display: none;\n  "]);return Ve=function(){return e},e}function He(){var e=Object(s.a)(["\n    display: inline-block;\n    margin-right: 5px;\n  "]);return He=function(){return e},e}function We(){var e=Object(s.a)(["\n    display: flex;\n    justify-content: flex-end;\n  "]);return We=function(){return e},e}function Ye(){var e=Object(s.a)(["\n    padding:  3px 5px;\n    color: black;\n    font-weight: 800;\n  "]);return Ye=function(){return e},e}function Je(){var e=Object(s.a)(["\n  width: 15px;\n  height: 15px;\n  background: rgba(255, 255, 255, 0.1);\n\n  &:hover {\n    background: rgb(192, 255, 0);\n  }\n  "]);return Je=function(){return e},e}function Xe(){var e=Object(s.a)(["\n  flex-grow: 1;\n"]);return Xe=function(){return e},e}function Qe(){var e=Object(s.a)(["\n  display: flex;\n  margin-top: 1px;\n  align-items: center;\n"]);return Qe=function(){return e},e}!function(e){e.PortLabel=b.default.div(Qe()),e.Label=b.default.div(Xe()),e.Port=b.default.div(Je()),e.PrimaryKeyIcon=b.default.span(Ye()),e.PortContainer=b.default.div(We());var t=e.PortItem=b.default.div(He());e.HiddenPort=Object(b.default)(t)(Ve()),e.NamedPort=Object(b.default)(t)(Be())}(Re||(Re={}));var _e,$e=function(e){var t=e.port,n=e.engine;t.isNamePort||t.setLocked();var r=i.createElement(T.PortWidget,{engine:n,port:t},i.createElement(Re.Port,null)),a=i.createElement(Re.PortLabel,null,i.createElement("div",null,t.label," ",t.propertyType)),o=t.isPrimaryKey&&i.createElement(Re.PrimaryKeyIcon,{className:"mi mi-Permissions"});return t.isNamePort?i.createElement(Re.NamedPort,null,r):i.createElement(Re.PortContainer,null,i.createElement(Re.PortItem,null,o),i.createElement(Re.PortItem,null,a),i.createElement(Re.HiddenPort,null,r))};function Ze(){var e=Object(s.a)(["\n    margin-top: 5px\n  "]);return Ze=function(){return e},e}function et(){var e=Object(s.a)(["\n    margin-top: 5px;\n    margin-left: 5px\n  "]);return et=function(){return e},e}function tt(){var e=Object(s.a)(["\n    flex-grow: 1;\n    display: flex;\n    flex-direction: column;\n\n    &:first-of-type {\n      margin-right: 10px;\n    }\n\n    &:only-child {\n      margin-right: 0px;\n    }\n  "]);return tt=function(){return e},e}function nt(){var e=Object(s.a)(["\n    display: flex;\n    background-image: linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.2));\n  "]);return nt=function(){return e},e}function rt(){var e=Object(s.a)(["\n    flex-grow: 1;\n    padding: 5px 5px;\n  "]);return rt=function(){return e},e}function it(){var e=Object(s.a)(["\n    background: rgba(0, 0, 0, 0.3);\n    display: flex;\n    white-space: nowrap;\n\n    justify-items: center;\n  "]);return it=function(){return e},e}function at(){var e=Object(s.a)(["\n    background-color: ",";\n    border-radius: 5px;\n    font-family: sans-serif;\n    color: white;\n    border: solid 2px black;\n    overflow: visible;\n    font-size: 11px;\n    border: solid 2px ",";\n  "]);return at=function(){return e},e}!function(e){e.Node=b.default.div(at(),(function(e){return e.background}),(function(e){return e.selected?"rgb(0,192,255)":"black"})),e.Title=b.default.div(it()),e.TitleName=b.default.div(rt()),e.Ports=b.default.div(nt()),e.PortsContainer=b.default.div(tt()),e.NamedPortLeft=b.default.div(et()),e.NamedPortRight=b.default.div(Ze())}(_e||(_e={}));var ot,lt=function(e){var t=function(t){return i.createElement($e,{engine:e.engine,port:t,key:t.options.id})},n=e.node,r=n.getPorts(),a=u.map(r,t),o=a.filter((function(e){return e.props.port.isNamePort})),l=a.filter((function(e){return!e.props.port.isNamePort}));return i.createElement(_e.Node,{"data-default-node-name":n.getOptions().name,selected:n.isSelected(),background:n.getOptions().color},i.createElement(_e.Title,null,0!==o.length&&i.createElement(_e.NamedPortLeft,null,t(o[1].props.port)),i.createElement(_e.TitleName,null,n.getOptions().name),0!==o.length&&i.createElement(_e.NamedPortRight,null,t(o[0].props.port))),i.createElement(_e.Ports,null,i.createElement(_e.PortsContainer,null,l)))},st=function(e){Object(f.a)(n,e);var t=Object(m.a)(n);function n(){return Object(p.a)(this,n),t.call(this,"default")}return Object(g.a)(n,[{key:"generateReactWidget",value:function(e){return i.createElement(lt,{engine:this.engine,node:e.model})}},{key:"generateModel",value:function(e){return new K(!1,"Entity","rgb(0,192,255)")}}]),n}(j.AbstractReactFactory);function ct(){var e=Object(s.a)(["\n  background: rgba(0, 0, 0, 0.8);\n  border-radius: 5px;\n  color: white;\n  font-size: 12px;\n  padding: 4px 8px;\n  font-family: sans-serif;\n  user-select: none;\n\n  max-width: 200px;\n  white-space: pre-wrap;\n"]);return ct=function(){return e},e}!function(e){e.Label=b.default.div(ct())}(ot||(ot={}));var ut=function(e){Object(f.a)(n,e);var t=Object(m.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(g.a)(n,[{key:"render",value:function(){return i.createElement(ot.Label,null,this.props.model.getOptions().label)}}]),n}(i.Component),dt=function(e){Object(f.a)(n,e);var t=Object(m.a)(n);function n(){return Object(p.a)(this,n),t.call(this,"default")}return Object(g.a)(n,[{key:"generateReactWidget",value:function(e){return i.createElement(ut,{model:e.model})}},{key:"generateModel",value:function(e){return new A}}]),n}(j.AbstractReactFactory),pt=function(e){Object(f.a)(n,e);var t=Object(m.a)(n);function n(){return Object(p.a)(this,n),t.call(this,"default")}return Object(g.a)(n,[{key:"generateModel",value:function(){return new z(!1,"port",!0,!1)}}]),n}(j.AbstractModelFactory);function gt(){var e=Object(s.a)(["\n  pointer-events: all;\n"]);return gt=function(){return e},e}var ft=b.default.circle(gt()),mt=function(e){Object(f.a)(n,e);var t=Object(m.a)(n);function n(e){var r;return Object(p.a)(this,n),(r=t.call(this,e)).state={selected:!1},r}return Object(g.a)(n,[{key:"render",value:function(){var e=this,t=this.props.point;return i.createElement("g",null,i.createElement("circle",{cx:t.getPosition().x,cy:t.getPosition().y,r:5,fill:this.state.selected||this.props.point.isSelected()?this.props.colorSelected:this.props.color}),i.createElement(ft,{className:"point",onMouseLeave:function(){e.setState({selected:!1})},onMouseEnter:function(){e.setState({selected:!0})},"data-id":t.getID(),"data-linkid":t.getLink().getID(),cx:t.getPosition().x,cy:t.getPosition().y,r:15,opacity:0}))}}]),n}(i.Component),bt=function(e){Object(f.a)(n,e);var t=Object(m.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(g.a)(n,[{key:"render",value:function(){var e=this,t=i.cloneElement(this.props.factory.generateLinkSegment(this.props.link,this.props.selected||this.props.link.isSelected(),this.props.path),{ref:this.props.forwardRef}),n=i.cloneElement(t,Object(I.a)(Object(I.a)({strokeLinecap:"round",onMouseLeave:function(){e.props.onSelection(!1)},onMouseEnter:function(){e.props.onSelection(!0)}},this.props.extras),{},{ref:null,"data-linkid":this.props.link.getID(),strokeOpacity:this.props.selected?.1:0,strokeWidth:20,fill:"none",onContextMenu:function(t){e.props.link.isLocked()||(t&&t.preventDefault(),e.props.link.remove())}}));return i.createElement("g",null,t,n)}}]),n}(i.Component),ht=function(e){Object(f.a)(n,e);var t=Object(m.a)(n);function n(e){var r;return Object(p.a)(this,n),(r=t.call(this,e)).refPaths=[],r.state={selected:!1},r}return Object(g.a)(n,[{key:"componentDidUpdate",value:function(){this.props.link.setRenderedPaths(this.refPaths.map((function(e){return e.current})))}},{key:"componentDidMount",value:function(){this.props.link.setRenderedPaths(this.refPaths.map((function(e){return e.current})))}},{key:"componentWillUnmount",value:function(){this.props.link.setRenderedPaths([])}},{key:"addPointToLink",value:function(e,t){var n=this;if(!e.shiftKey&&!this.props.link.isLocked()&&this.props.link.getPoints().length-1<=this.props.diagramEngine.getMaxNumberPointsPerLink()){var r=new T.PointModel({link:this.props.link,position:this.props.diagramEngine.getRelativeMousePoint(e)});this.props.link.addPoint(r,t),e.persist(),e.stopPropagation(),this.forceUpdate((function(){n.props.diagramEngine.getActionEventBus().fireAction({event:e,model:r})}))}}},{key:"generatePoint",value:function(e){return i.createElement(mt,{key:e.getID(),point:e,colorSelected:this.props.link.getOptions().selectedColor,color:this.props.link.getOptions().color})}},{key:"generateLink",value:function(e,t,n){var r=this,a=i.createRef();return this.refPaths.push(a),i.createElement(bt,{key:"link-".concat(n),path:e,selected:this.state.selected,diagramEngine:this.props.diagramEngine,factory:this.props.diagramEngine.getFactoryForLink(this.props.link),link:this.props.link,forwardRef:a,onSelection:function(e){r.setState({selected:e})},extras:t})}},{key:"render",value:function(){var e=this,t=this.props.link.getPoints(),n=[];if(this.refPaths=[],2===t.length)n.push(this.generateLink(this.props.link.getSVGPath(),{onMouseDown:function(t){e.addPointToLink(t,1)}},"0")),null==this.props.link.getTargetPort()&&n.push(this.generatePoint(t[1]));else{for(var r=function(r){n.push(e.generateLink(T.LinkWidget.generateLinePath(t[r],t[r+1]),{"data-linkid":e.props.link.getID(),"data-point":r,onMouseDown:function(t){e.addPointToLink(t,r+1)}},r))},a=0;a<t.length-1;a++)r(a);for(var o=1;o<t.length-1;o++)n.push(this.generatePoint(t[o]));null==this.props.link.getTargetPort()&&n.push(this.generatePoint(t[t.length-1]))}return i.createElement("g",{"data-default-link-test":this.props.link.getOptions().testName},n)}}]),n}(i.Component);function yt(){var e=Object(s.a)(["\n  ",";\n  fill: none;\n  pointer-events: all;\n"]);return yt=function(){return e},e}function vt(){var e=Object(s.a)(["\n  stroke-dasharray: 10, 2;\n  animation: "," 1s linear infinite;\n"]);return vt=function(){return e},e}function Ot(){var e=Object(s.a)(["\n\t\tfrom {\n\t\t\tstroke-dashoffset: 24;\n\t\t}\n\t\tto {\n\t\t\tstroke-dashoffset: 0;\n\t\t}\n\t"]);return Ot=function(){return e},e}var kt,Pt=Object(V.keyframes)(Ot()),Et=Object(V.css)(vt(),Pt),jt=b.default.path(yt(),(function(e){return e.selected&&Et})),Nt=function(e){Object(f.a)(n,e);var t=Object(m.a)(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";return Object(p.a)(this,n),t.call(this,e)}return Object(g.a)(n,[{key:"generateReactWidget",value:function(e){return i.createElement(ht,{link:e.model,diagramEngine:this.engine})}},{key:"generateModel",value:function(e){return new R}},{key:"generateLinkSegment",value:function(e,t,n){return i.createElement(jt,{selected:t,stroke:t?e.getOptions().selectedColor:e.getOptions().color,strokeWidth:e.getOptions().width,d:n})}}]),n}(j.AbstractReactFactory);function xt(){var e=Object(s.a)(["\n  flex-grow: 1;\n  padding: 5px 5px;\n"]);return xt=function(){return e},e}function Lt(){var e=Object(s.a)(["\n  background: rgba(0, 0, 0, 0.3);\n  display: flex;\n  white-space: nowrap;\n  justify-items: center;\n"]);return Lt=function(){return e},e}function It(){var e=Object(s.a)(["\n  background-color: ",";\n  border-radius: 5px;\n  font-family: sans-serif;\n  color: white;\n  border: solid 2px black;\n  overflow: visible;\n  font-size: 11px;\n  border: solid 2px ",";\n"]);return It=function(){return e},e}!function(e){e.Node=b.default.div(It(),(function(e){return e.background}),(function(e){return e.selected?"rgb(0,192,255)":"black"})),e.Title=b.default.div(Lt()),e.TitleName=b.default.div(xt())}(kt||(kt={}));var wt=function(e){var t=e.node;return i.createElement(kt.Node,{"data-default-node-name":t.getOptions().name,selected:t.isSelected(),background:t.getOptions().color},i.createElement(kt.Title,null,i.createElement(kt.TitleName,null,t.getOptions().name)))},Ct=function(e){Object(f.a)(n,e);var t=Object(m.a)(n);function n(){return Object(p.a)(this,n),t.call(this,"label")}return Object(g.a)(n,[{key:"generateReactWidget",value:function(e){return i.createElement(wt,{engine:this.engine,node:e.model})}},{key:"generateModel",value:function(e){return new K(!0,"Label","rgb(192,255,0)")}}]),n}(j.AbstractReactFactory),Mt=function(e){Object(f.a)(n,e);var t=Object(m.a)(n);function n(){return Object(p.a)(this,n),t.call(this,"arrow")}return Object(g.a)(n,[{key:"generateModel",value:function(){return new B("port",!0,!1)}}]),n}(j.AbstractModelFactory),Tt=function(){function e(){Object(p.a)(this,e),this.diagramEngine=E()(),this.diagramEngine.getNodeFactories().registerFactory(new Ct),this.diagramEngine.getNodeFactories().registerFactory(new st),this.diagramEngine.getLabelFactories().registerFactory(new dt),this.diagramEngine.getPortFactories().registerFactory(new pt),this.diagramEngine.getPortFactories().registerFactory(new Mt),this.diagramEngine.getLinkFactories().registerFactory(new ze),this.diagramEngine.getLinkFactories().registerFactory(new Nt);var t=this.diagramEngine.getStateMachine().getCurrentState();t instanceof P.DefaultDiagramState&&(t.dragNewLink.config.allowLooseLinks=!1),this.newModel()}return Object(g.a)(e,[{key:"newModel",value:function(){this.activeModel=new P.DiagramModel,this.logicModel=new P.DiagramModel,this.diagramEngine.setModel(this.activeModel)}},{key:"getActiveDiagram",value:function(){return this.activeModel}},{key:"getLogicDiagram",value:function(){return this.logicModel}},{key:"getDiagramEngine",value:function(){return this.diagramEngine}},{key:"setLogicModel",value:function(){var e=this,t=this.activeModel.getNodes();Object.keys(t).forEach((function(n){var r=t[n].clone(),i=t[n].getPorts();Object.keys(i).filter((function(e){return i[e].isNamePort})).forEach((function(e){var t=i[e],n=new B(t.label,t.isNamePort,t.isPrimaryKey,t.isForeignKey,t.isPartialKey,t.isNotNull,t.isAutoincremented,t.isUnique,t.propertyType);r.addPort(n)})),e.logicModel.addNode(r)}));var n=this.logicModel.getNodes(),r=[];n.map((function(e){var t=e.getPorts();0===d.a.values(t).filter((function(e){return e.isPrimaryKey})).length&&r.push(e)}));var i=this.activeModel.getLinks(),a=[];i.filter((function(e){var t=e.getSourcePort().getParent(),n=e.getTargetPort().getParent();(r.map((function(e){return e.getOptions().name})).includes(t.getOptions().name)||r.map((function(e){return e.getOptions().name})).includes(n.getOptions().name))&&a.push(e)})),console.log("priorityLinks ",a);var o=a.filter((function(e){var t=e.getLabels()[0].getOptions().label,n=e.getLabels()[2].getOptions().label;return t.includes("N")&&n.includes("N")})),l=a.filter((function(e){var t=e.getLabels()[0].getOptions().label,n=e.getLabels()[2].getOptions().label;return t.includes("N")&&!n.includes("N")})),s=a.filter((function(e){var t=e.getLabels()[0].getOptions().label,n=e.getLabels()[2].getOptions().label;return!t.includes("N")&&n.includes("N")})),c=a.filter((function(e){var t=e.getLabels()[0].getOptions().label,n=e.getLabels()[2].getOptions().label;return!t.includes("N")&&!n.includes("N")}));this.convertTargetPorts(s),this.convertSourceLinks(l),this.convertM2MLink(o),this.convertSourceLinks(c);var u=this.activeModel.getLinks().filter((function(e){return!a.includes(e)})),p=u.filter((function(e){var t=e.getLabels()[0].getOptions().label,n=e.getLabels()[2].getOptions().label;return t.includes("N")&&n.includes("N")})),g=u.filter((function(e){var t=e.getLabels()[0].getOptions().label,n=e.getLabels()[2].getOptions().label;return t.includes("N")&&!n.includes("N")})),f=u.filter((function(e){var t=e.getLabels()[0].getOptions().label,n=e.getLabels()[2].getOptions().label;return!t.includes("N")&&n.includes("N")})),m=u.filter((function(e){var t=e.getLabels()[0].getOptions().label,n=e.getLabels()[2].getOptions().label;return!t.includes("N")&&!n.includes("N")}));this.convertTargetPorts(f),this.convertSourceLinks(g),this.convertM2MLink(p),this.convertSourceLinks(m),this.diagramEngine.setModel(this.logicModel)}},{key:"setConceptualModel",value:function(){this.logicModel=null,this.logicModel=new P.DiagramModel;var e=new P.DiagramModel,t=this.activeModel.getNodes();Object.keys(t).forEach((function(n){e.addNode(t[n])}));var n=this.activeModel.getLinks();Object.keys(n).forEach((function(t){e.addLink(n[t])})),this.activeModel=e,this.diagramEngine.setModel(this.activeModel)}},{key:"loadConceptualModel",value:function(e){this.activeModel=e,this.diagramEngine.setModel(this.activeModel)}},{key:"loadLogicModel",value:function(e){this.logicModel=e,this.diagramEngine.setModel(this.logicModel)}},{key:"convertM2MLink",value:function(e){var t=this;Object.keys(e).forEach((function(n){var r=t.logicModel.getNodes(),i=e[n].sourcePort.getParent(),a=r.filter((function(e){return e.getOptions().name===i.getOptions().name}))[0].getOptions().id,o=e[n].targetPort.getParent(),l=r.filter((function(e){return e.getOptions().name===o.getOptions().name}))[0].getOptions().id,s=e[n].properties.clone();s.getOptions().name=s.getOptions().name=e[n].relName,s.setPosition(i.getPosition().x+150,i.getPosition().y-100),s.addPort(new B("Id",!1,!0,!1,!1,!0,!0,!0,"INT")),s.addPort(new B("",!0,!1,!1,!1,!1,!1,!1,"INT")),s.addPort(new B("1",!0,!1,!1,!1,!1,!1,!1,"INT"));var c=r.filter((function(e){return e.getOptions().id===a}))[0].getPorts(),u=d.a.keys(c).filter((function(e){return c[e].isPrimaryKey||c[e].isPartialKey})).map((function(e){return c[e]})),p=r.filter((function(e){return e.getOptions().id===l}))[0].getPorts(),g=d.a.keys(p).filter((function(e){return p[e].isPrimaryKey||p[e].isPartialKey})).map((function(e){return p[e]})),f=d.a.keys(p).filter((function(e){return p[e].isPrimaryKey})).map((function(e){return p[e]})),m=d.a.keys(c).filter((function(e){return c[e].isPrimaryKey})).map((function(e){return c[e]})),b=1;u.forEach((function(e){s.addPort(new B(i.getOptions().name+e.label+"".concat(i===o?b:""),!1,!(m.length>0),m.length>0,!1,!0,!1,!1,"INT",q.UID(),a)),b++})),g.forEach((function(e){s.addPort(new B(o.getOptions().name+e.label,!1,!(f.length>0),f.length>0,!1,!0,!1,!1,"INT",q.UID(),l))})),t.logicModel.addNode(s);var h=r.filter((function(e){return e.getOptions().id===a}))[0].getPorts()[1],y=s.getPorts()[""],v=new w({type:"arrow"});v.setSourcePort(h),v.setTargetPort(y);var O=r.filter((function(e){return e.getOptions().id===l}))[0],k=s.getPorts()[1],P=O.getPorts()[""],E=new w({type:"arrow"});E.setSourcePort(P),E.setTargetPort(k),t.logicModel.addAll(v,E)}))}},{key:"convertSourceLinks",value:function(e){var t=this;Object.keys(e).forEach((function(n){var r=t.logicModel.getNodes(),i=e[n].sourcePort.getParent(),a=r.filter((function(e){return e.getOptions().name===i.getOptions().name}))[0].getOptions().id,o=e[n].targetPort.getParent(),l=r.filter((function(e){return e.getOptions().name===o.getOptions().name}))[0].getOptions().id,s=r.filter((function(e){return e.getOptions().id===l}))[0].getPorts(),c=d.a.keys(s).filter((function(e){return s[e].isPrimaryKey||s[e].isPartialKey})).map((function(e){return s[e]})),u=r.filter((function(e){return e.getOptions().id===a}))[0],p=u.getPorts(),g=d.a.keys(p).filter((function(e){return p[e].isPrimaryKey})).map((function(e){return p[e]}));c.forEach((function(e){u.addPort(new B(o.getOptions().name+e.label,!1,!(g.length>0),g.length>0,!1,!0,!1,!1,"INT",q.UID(),l))}));var f=u.getPorts();d.a.keys(f).filter((function(e){return f[e].isPartialKey})).map((function(e){return f[e]})).map((function(e){return e.isPrimaryKey=!0}));var m=e[n].properties.clone().getPorts();d.a.values(m).map((function(e){var t=new B(e.label,e.isNamePort,e.isPrimaryKey,e.isForeignKey,e.isPartialKey,e.isNotNull,e.isAutoincremented,e.isUnique,e.propertyType);u.addPort(t)}));var b=r.filter((function(e){return e.getOptions().id===l}))[0],h=u.getPorts()[1],y=b.getPorts()[""],v=new w({type:"arrow"});v.setSourcePort(y),v.setTargetPort(h),t.logicModel.addLink(v)}))}},{key:"convertTargetPorts",value:function(e){var t=this;Object.keys(e).forEach((function(n){var r=t.logicModel.getNodes(),i=e[n].sourcePort.getParent(),a=r.filter((function(e){return e.getOptions().name===i.getOptions().name}))[0].getOptions().id,o=e[n].targetPort.getParent(),l=r.filter((function(e){return e.getOptions().name===o.getOptions().name}))[0].getOptions().id,s=r.filter((function(e){return e.getOptions().id===a}))[0].getPorts(),c=d.a.keys(s).filter((function(e){return s[e].isPrimaryKey||s[e].isPartialKey})).map((function(e){return s[e]})),u=r.filter((function(e){return e.getOptions().id===l}))[0],p=u.getPorts(),g=d.a.keys(p).filter((function(e){return p[e].isPrimaryKey})).map((function(e){return p[e]}));c.forEach((function(e){u.addPort(new B(i.getOptions().name+e.label,!1,!(g.length>0),g.length>0,!1,!0,!1,!1,"INT",q.UID(),a))}));var f=u.getPorts();d.a.keys(f).filter((function(e){return f[e].isPartialKey})).map((function(e){return f[e]})).map((function(e){return e.isPrimaryKey=!0}));var m=e[n].properties.clone().getPorts();d.a.values(m).map((function(e){var t=new B(e.label,e.isNamePort,e.isPrimaryKey,e.isForeignKey,e.isPartialKey,e.isNotNull,e.isAutoincremented,e.isUnique,e.propertyType);u.addPort(t)}));var b=r.filter((function(e){return e.getOptions().id===a}))[0],h=u.getPorts()[""],y=b.getPorts()[1],v=new w({type:"arrow"});v.setSourcePort(y),v.setTargetPort(h),t.logicModel.addLink(v)}))}}]),e}(),Dt=function(){var e=new Tt;return i.createElement("div",{className:"content"},i.createElement(Ue,{app:e}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(a.a.createElement(Dt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[271,1,2]]]);
//# sourceMappingURL=main.3bedd2e5.chunk.js.map