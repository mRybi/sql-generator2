{"version":3,"sources":["components/TrayWidget.tsx","components/TrayItemWidget.tsx","helpers/DemoCanvasWidget.tsx","infrastructure/models/ArrowLinkModel.ts","infrastructure/models/DefaultLabelModel.tsx","infrastructure/models/DefaultNodeModel.ts","infrastructure/models/DefaultLinkModel.ts","infrastructure/Toolkit.ts","infrastructure/models/DefaultPortModel.ts","infrastructure/models/ArrowPortModel.ts","components/TrayItemDiv.tsx","infrastructure/models/PropertyType.ts","components/grid/Grid.tsx","components/grid/Row.tsx","components/grid/Col.tsx","components/PropertyTable/PropertyTable.tsx","components/DarkInput.tsx","components/NodeProperties/NodeProperties.tsx","components/popups/ResultPopup/ResultPopup.tsx","handlers/GenerationHandler.tsx","components/popups/LoadFilePopup/LoadFilePopup.tsx","handlers/LoadFileHandler.tsx","components/popups/SaveToFilePopup/SaveToFilePopup.tsx","components/popups/SaveToJpegPopup/SaveToJpegPopup.tsx","components/popups/RealtionPopup/RelationPopup.tsx","components/BodyWidget.tsx","infrastructure/widgets/ArrowLinkWidget.tsx","infrastructure/factories/ArrowLinkFactory.tsx","infrastructure/widgets/DefaultPortLabelWidget.tsx","infrastructure/widgets/DefaultNodeWidget.tsx","infrastructure/factories/DefaultNodeFactory.tsx","infrastructure/widgets/DefaultLabelWidget.tsx","infrastructure/factories/DefaultLabelFactory.tsx","infrastructure/factories/DefaultPortFactory.tsx","infrastructure/widgets/DefaultLinkPointWidget.tsx","infrastructure/widgets/DefaultLinkSegmentWidget.tsx","infrastructure/widgets/DefaultLinkWidget.tsx","infrastructure/factories/DefaultLinkFactory.tsx","infrastructure/widgets/CustomLabelWidget.tsx","infrastructure/factories/CustomLabelFactory.tsx","infrastructure/factories/ArrowPortFactory.tsx","components/Application.ts","App.tsx","serviceWorker.ts","index.tsx"],"names":["S","styled","div","TrayWidget","Tray","this","props","children","React","p","color","TrayItemWidget","draggable","onDragStart","event","dataTransfer","setData","JSON","stringify","model","name","Container","background","DemoCanvasWidget","ArrowLinkModel","options","type","width","selectedColor","curvyness","DefaultLinkModel","DefaultLabelModel","offsetY","label","data","LabelModel","DefaultNodeModel","isLabel","portsIn","lookupTable","clone","portsOut","port","getOptions","in","indexOf","push","_","portsInOrder","id","getPortFromID","NodeModel","withPoint","number","addLabel","point","PointModel","link","setPosition","position","x","y","addPoint","relName","properties","alignment","PortModelAlignment","RIGHT","LEFT","TOP","points","length","curve","BezierCurve","setSource","getFirstPoint","getPosition","setTarget","getLastPoint","setSourceControl","setTargetControl","sourcePort","getSourceControl","translate","calculateControlOffset","getSourcePort","targetPort","getTargetControl","getTargetPort","getSVGCurve","relPorts","getPorts","Object","values","map","a","propertyType","isPrimaryKey","isNotNull","isAutoincremented","isUnique","propertiesNode","forEach","rel","addPort","DefaultPortModel","labelOb","setLabel","fireEvent","LinkModel","Toolkit","TESTING","TESTING_UID","replace","c","r","Math","random","toString","element","selector","document","body","closest","logic","isNamePort","isForeignKey","isPartialKey","engine","fkPortId","alignemnt","UID","links","dEngine","factory","createLinkModel","setSourcePort","setTargetPort","removeMiddlePoints","getParent","recursiveRelation","generateModel","linksCount","keys","getModel","getLinks","console","log","PortModel","AdvancedPortModel","thisParent","portNode","portNodePorts","thisParentPorts","czyMaPortZPKjakoFk","find","czyMaPortZPKjakoFk2","pk","marginTop","isSelected","css","isDisabled","PropertyType","TrayItemDiv","Grid","style","className","buildClassNameString","Row","flex","Col","onDoubleClick","size","config","pull","offset","order","hidden","buildGridColConfigClassNames","sm","md","lg","xl","xxl","xxxl","PropertyTable","useState","updatedItem","setUpdatedItem","forceUpdate","setValue","value","useForceUpdate","useMemo","selectedItem","handleChangePK","row","persist","ports","clearPartialKeys","columns","key","dataField","text","formatter","cellContent","defaultValue","onChange","allPorts","names","toLowerCase","trim","includes","target","relView","relationAtributes","attString","getLabels","relationName","handleChangePortLabel","paddingLeft","list","handleChangepPropType","obj","checked","handleChangeFK","handleChangePartialKey","disabled","handleChangeNull","handleChangeAutoInc","handleChangeUnique","onClick","removePort","filter","getID","labels","oldLabel","slice","portsTable","cols","col","isLogic","keyField","bordered","AddNewAtributeButton","newPortNumber","addNewPort","input","fontSize","DarkInput","Input","NodeProperties","defaultName","setDefaultName","setName","showInput","setShowInput","setLocked","handleNameChange","diagramEngine","getNodes","node","height","wordBreak","update","ResultPopup","dbName","setDbName","mySQLView","setmySQLView","formatedMSSQL","mssqlString","sqlFormatter","format","language","indent","formatedMySQL","mysqlString","modal","closeOnDocumentClick","open","isOpen","closeOnEscape","marginRight","generateScript","readOnly","contentEditable","blob","Blob","FileSaver","saveAs","GenerationHandler","sqlString","setSqlString","setMySqlString","useEffect","dbms","serDiagram","serializeDiagram","dNodes","nodes","dLinks","diagramJson","diagram","axios","post","SerializedModel","DatabaseName","RelationType","isUml","response","status","errorMessage","responseMy","LoadFilePopup","fileReader","fileContent","setFileContent","handleFileRead","e","content","result","onClose","files","FileReader","onloadend","readAsText","accept","loadDiagram","LoadFileHandler","app","getDiagramEngine","parse","setIsUml","consceptual","DiagramModel","conceptualDiagram","deserializeModel","splice","loadConceptualModel","setIsLogic","logicalDiagram","loadLogicModel","repaintCanvas","error","SaveToFilePopup","fileName","setFileName","diagramModel","serialize","secondModel","getActiveNodeLayer","SaveToJpegPopup","domtoimage","toJpeg","getElementById","quality","then","dataUrl","createElement","download","href","click","RelationPopup","left","setLeft","right","setRight","setRelationAtributes","relationNameOnly","setRelationNameOnly","leftLabel","rightLabel","handleRelationNameChenge","getPoints","index","remove","sourceP","targetP","removeLink","renderOptionPicker","side","GridItem","newSourceP","newTargetP","addLink","GridContainer","margin","span","BodyWidget","showDialog","setShowDialog","showRelationDialog","setShowRelationDialog","showLoadFileDialog","setShowLoadFileDialog","showSaveFileDialog","setSaveFileDialog","showSaveJPEGDialog","setSaveJPEGDialog","showSaveOptions","setSaveOptions","selectedNode","setSelectedNode","selectedLink","setSelectedLink","isLogicModel","setIsLogicModel","changeRelation","temp","substring","temp2","refreshPopups","Body","Header","Content","DropdownIcon","setConceptualModel","setLogicModel","Layer","onDrop","getData","nodesCount","newNodeName","getRelativeMousePoint","addNode","onDragOver","preventDefault","ctrlKey","getSelectedEntities","getActiveDiagram","getLogicDiagram","CustomLinkArrowWidget","previousPoint","setSelected","angle","atan2","PI","transform","fill","onMouseLeave","onMouseEnter","data-id","data-linkid","getLink","ArrowLinkWidget","colorSelected","paths","refPaths","j","generateLink","LinkWidget","generateLinePath","onMouseDown","addPointToLink","generateArrow","i","generatePoint","data-default-link-test","testName","DefaultLinkWidget","ArrowLinkFactory","DefaultLinkFactory","PortItem","DefaultPortLabel","portJSX","Port","PortLabel","PrimaryKeyIcon","NamedPort","PortContainer","HiddenPort","selected","DefaultNodeWidget","generatePort","portsJSX","namedPortsJSX","notNamedPortsJSX","Node","data-default-node-name","Title","NamedPortLeft","TitleName","NamedPortRight","Ports","PortsContainer","DefaultNodeFactory","AbstractReactFactory","DefaultLabelWidget","Label","DefaultLabelFactory","DefaultPortFactory","AbstractModelFactory","PointTop","circle","DefaultLinkPointWidget","state","cx","cy","setState","opacity","DefaultLinkSegmentWidget","Bottom","generateLinkSegment","path","ref","forwardRef","Top","strokeLinecap","onSelection","extras","strokeOpacity","strokeWidth","onContextMenu","isLocked","setRenderedPaths","current","shiftKey","getMaxNumberPointsPerLink","stopPropagation","getActionEventBus","fireAction","extraProps","getFactoryForLink","getSVGPath","Keyframes","keyframes","Path","stroke","d","CustomLabelWidget","CustomLabelFactory","ArrowPortFactory","Application","createEngine","getNodeFactories","registerFactory","getLabelFactories","getPortFactories","getLinkFactories","getStateMachine","getCurrentState","DefaultDiagramState","dragNewLink","allowLooseLinks","newModel","activeModel","logicModel","setModel","concNodes","k","nodePorts","logicPort","nodesWithoutPK","n","priorityLinks","sourceNode","targetNode","priom2mLinks","sourceLabel","targetLabel","priosourceLinks","priotargetLinks","priooneToOneLinks","convertTargetPorts","convertSourceLinks","convertM2MLink","concLinks","m2mLinks","sourceLinks","targetLinks","oneToOneLinks","activeModelCopy","logicNodes","sourceNodeId","targetNodeId","relNode","sourceNodePorts","sourceNodePKPort","targetNodePorts","targetNodePKPort","targetNodePrimaryKeysPorts","sourceNodePrimaryKeysPorts","node2","targetP2","sourceP2","link2","addAll","tNode","Boolean","window","location","hostname","match","ReactDOM","render","App","navigator","serviceWorker","ready","registration","unregister","catch","message"],"mappings":"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","file":"static/js/main.8230ce41.chunk.js","sourcesContent":["import * as React from \"react\";\nimport styled from \"@emotion/styled\";\n\nnamespace S {\n  export const Tray = styled.div`\n  min-width: 200px;\n  background: rgb(20, 20, 20);\n  flex-grow: 0;\n  flex-shrink: 0;\n`;\n}\n\nexport class TrayWidget extends React.Component {\n  render() {\n    return <S.Tray>{this.props.children}</S.Tray>;\n  }\n}\n","import * as React from \"react\";\nimport styled from \"@emotion/styled\";\n\nexport interface TrayItemWidgetProps {\n  model: any;\n  color: string;\n  name: string;\n}\nnamespace S {\n  export const Tray = styled.div<{ color: string }>`\n  color: white;\n  font-family: Helvetica, Arial;\n  padding: 5px;\n  margin: 0px 10px;\n  border: solid 1px ${(p) => p.color};\n  border-radius: 5px;\n  margin-bottom: 2px;\n  cursor: pointer;\n`;\n}\n\nexport class TrayItemWidget extends React.Component<TrayItemWidgetProps> {\n  render() {\n    return (\n      <S.Tray\n        color={this.props.color}\n        draggable={true}\n        onDragStart={(event) => {\n          event.dataTransfer.setData(\n            \"storm-diagram-node\",\n            JSON.stringify(this.props.model)\n          );\n        }}\n      >\n        {this.props.name}\n      </S.Tray>\n    );\n  }\n}\n","import * as React from \"react\";\nimport styled from \"@emotion/styled\";\n\nexport interface DemoCanvasWidgetProps {\n  color?: string;\n  background?: string;\n}\n\nexport const Container = styled.div<{ color: string; background: string }>`\n  height: 100%;\n  background-color: ${(p) => p.background};\n  background-size: 50px 50px;\n  display: flex;\n  > * {\n    height: 100%;\n    min-height: 100%;\n    width: 100%;\n  }\n  background-image: linear-gradient(\n      0deg,\n      transparent 24%,\n      ${(p) => p.color} 25%,\n      ${(p) => p.color} 26%,\n      transparent 27%,\n      transparent 74%,\n      ${(p) => p.color} 75%,\n      ${(p) => p.color} 76%,\n      transparent 77%,\n      transparent\n    ),\n    linear-gradient(\n      90deg,\n      transparent 24%,\n      ${(p) => p.color} 25%,\n      ${(p) => p.color} 26%,\n      transparent 27%,\n      transparent 74%,\n      ${(p) => p.color} 75%,\n      ${(p) => p.color} 76%,\n      transparent 77%,\n      transparent\n    );\n`;\n\nexport class DemoCanvasWidget extends React.Component<DemoCanvasWidgetProps> {\n  render() {\n    return (\n      <Container\n        background={this.props.background || \"rgb(60, 60, 60)\"}\n        color={this.props.color || \"rgba(255,255,255, 0.05)\"}\n      >\n        {this.props.children}\n      </Container>\n    );\n  }\n}\n","import { DefaultLinkModelOptions } from \"./DefaultLinkModel\";\nimport { DefaultLinkModel } from \"@projectstorm/react-diagrams\";\n\nexport class ArrowLinkModel extends DefaultLinkModel {\n  constructor(options: DefaultLinkModelOptions = {}) {\n    super({\n      type: \"arrow\",\n      width: options.width || 3,\n      color: options.color || \"gray\",\n      selectedColor: options.selectedColor || \"rgb(0,192,255)\",\n      curvyness: 0,\n      ...options,\n    });\n    \n    \n  }\n}\n","import {\n  LabelModel,\n  LabelModelGenerics,\n  LabelModelOptions,\n} from \"@projectstorm/react-diagrams-core\";\nimport { DeserializeEvent } from \"@projectstorm/react-canvas-core\";\n\nexport interface DefaultLabelModelOptions extends LabelModelOptions {\n  label?: string;\n}\n\nexport interface DefaultLabelModelGenerics extends LabelModelGenerics {\n  OPTIONS: DefaultLabelModelOptions;\n}\n\nexport class DefaultLabelModel extends LabelModel<DefaultLabelModelGenerics> {\n  constructor(options: DefaultLabelModelOptions = {}) {\n    super({\n      offsetY: options.offsetY == null ? -23 : options.offsetY,\n      type: \"default\",\n      ...options,\n    });\n  }\n\n  setLabel(label: string) {\n    this.options.label = label;\n  }\n\n  deserialize(event: DeserializeEvent<this>) {\n    super.deserialize(event);\n    this.options.label = event.data.label;\n  }\n\n  serialize() {\n    return {\n      ...super.serialize(),\n      label: this.options.label,\n    };\n  }\n}\n","import * as _ from \"lodash\";\nimport { DefaultPortModel } from \"../models/DefaultPortModel\";\nimport {\n  NodeModel,\n  NodeModelGenerics,\n} from \"@projectstorm/react-diagrams-core\";\nimport {\n  BasePositionModelOptions,\n  DeserializeEvent,\n} from \"@projectstorm/react-canvas-core\";\n\nexport interface DefaultNodeModelOptions extends BasePositionModelOptions {\n  name?: string;\n  color?: string;\n}\n\nexport interface DefaultNodeModelGenerics extends NodeModelGenerics {\n  OPTIONS: DefaultNodeModelOptions;\n}\n\nexport class DefaultNodeModel extends NodeModel<DefaultNodeModelGenerics> {\n  isLabel: boolean;\n\n  protected portsIn: DefaultPortModel[];\n\n  constructor(isLabel: boolean, name: string, color: string) {\n    super({\n      type: \"default\",\n      name,\n      color,\n    });\n    this.isLabel = isLabel;\n    this.portsIn = [];\n  }\n\n  doClone(lookupTable: {}, clone: any): void {\n    clone.portsIn = [];\n    clone.portsOut = [];\n    super.doClone(lookupTable, clone);\n  }\n\n  removePort<T extends DefaultPortModel>(port: T): void {\n    super.removePort(port);\n  }\n\n  addPort<T extends DefaultPortModel>(port: T): T {\n    super.addPort(port);\n    if (port.getOptions().in) {\n      if (this.portsIn.indexOf(port) === -1) {\n        this.portsIn.push(port);\n      }\n    }\n    return port;\n  }\n\n  deserialize(event: DeserializeEvent<this>) {\n    super.deserialize(event);\n    this.options.name = event.data.name;\n    this.options.color = event.data.color;\n    this.portsIn = _.map(event.data.portsInOrder, (id) => {\n      return this.getPortFromID(id);\n    }) as DefaultPortModel[];\n    this.isLabel = event.data.isLabel;\n  }\n\n  serialize(): any {\n    return {\n      ...super.serialize(),\n      name: this.options.name,\n      color: this.options.color,\n      isLabel: this.isLabel\n    };\n  }\n\n  getInPorts(): DefaultPortModel[] {\n    return this.portsIn;\n  }\n}\n","import {\n  LabelModel,\n  LinkModel,\n  LinkModelGenerics,\n  LinkModelListener,\n  PortModel,\n  PortModelAlignment,\n  PointModel,\n} from \"@projectstorm/react-diagrams-core\";\nimport { DefaultLabelModel } from \"../models/DefaultLabelModel\";\nimport { BezierCurve } from \"@projectstorm/geometry\";\nimport {\n  BaseEntityEvent,\n  BaseModelOptions,\n  DeserializeEvent,\n} from \"@projectstorm/react-canvas-core\";\nimport { DefaultNodeModel } from \"./DefaultNodeModel\";\nimport { PropertyType } from \"./PropertyType\";\nimport { DefaultPortModel } from \"./DefaultPortModel\";\nimport _ from \"lodash\";\n\nexport interface DefaultLinkModelListener extends LinkModelListener {\n  colorChanged?(\n    event: BaseEntityEvent<DefaultLinkModel> & { color: null | string }\n  ): void;\n\n  widthChanged?(\n    event: BaseEntityEvent<DefaultLinkModel> & { width: 0 | number }\n  ): void;\n}\n\nexport interface LinkWithPointOptions extends BaseModelOptions {\n  position: {x: number, y: number};\n}\n\n\nexport interface DefaultLinkModelOptions extends BaseModelOptions {\n  width?: number;\n  color?: string;\n  selectedColor?: string;\n  curvyness?: number;\n  type?: string;\n  testName?: string;\n}\n\nexport interface DefaultLinkModelGenerics extends LinkModelGenerics {\n  LISTENER: DefaultLinkModelListener;\n  OPTIONS: DefaultLinkModelOptions;\n}\n\nclass RelationProperties {\n  label: string;\n  isPrimaryKey: boolean;\n  isAutoincremented: boolean;\n  isNotNull: boolean;\n  isUnique: boolean;\n  propertyType: PropertyType;\n}\n\nexport class DefaultLinkModel extends LinkModel<DefaultLinkModelGenerics> {\n  properties: DefaultNodeModel;\n  relName: string;\n\n  constructor(options: DefaultLinkModelOptions = {}, withPoint?: LinkWithPointOptions, number?: number) {\n    super({\n      type: \"default\",\n      width: options.width || 3,\n      color: options.color || \"gray\",\n      selectedColor: options.selectedColor || \"rgb(0,192,255)\",\n      curvyness: 0,\n      ...options,\n    });\n\n    this.addLabel(\"0,N\");\n    this.addLabel(`relation name  ${number || 1} \\n`);\n    this.addLabel(\"0,N\");\n\n\n    if(withPoint) {\n      let point = new PointModel({link: this});\n      point.setPosition(withPoint.position.x ,withPoint.position.y)\n      this.addPoint(point);\n    }\n\n\n    this.relName = \"relation name\";\n\n    this.properties = new DefaultNodeModel(false, \"relNode\", \"rgb(0,192,255)\");\n  }\n\n  calculateControlOffset(port: PortModel): [number, number] {\n    if (port.getOptions().alignment === PortModelAlignment.RIGHT) {\n      return [this.options.curvyness, 0];\n    } else if (port.getOptions().alignment === PortModelAlignment.LEFT) {\n      return [-this.options.curvyness, 0];\n    } else if (port.getOptions().alignment === PortModelAlignment.TOP) {\n      return [0, -this.options.curvyness];\n    }\n    return [0, this.options.curvyness];\n  }\n\n  getSVGPath(): string {\n\n    if (this.points.length === 2) {\n      const curve = new BezierCurve();\n      curve.setSource(this.getFirstPoint().getPosition());\n      curve.setTarget(this.getLastPoint().getPosition());\n      curve.setSourceControl(this.getFirstPoint().getPosition().clone());\n      curve.setTargetControl(this.getLastPoint().getPosition().clone());\n\n      if (this.sourcePort) {\n        curve\n          .getSourceControl()\n          .translate(...this.calculateControlOffset(this.getSourcePort()));\n      }\n\n      if (this.targetPort) {\n        curve\n          .getTargetControl()\n          .translate(...this.calculateControlOffset(this.getTargetPort()));\n      }\n      return curve.getSVGCurve();\n    }\n  }\n\n  serialize() {\n    let relPorts =\n      this.properties &&\n      this.properties.getPorts() &&\n      Object.values(this.properties.getPorts());\n    let properties =\n      relPorts &&\n      relPorts.map((a: DefaultPortModel) => {\n        return {\n          label: a.label,\n          propertyType: a.propertyType,\n          isPrimaryKey: a.isPrimaryKey,\n          isNotNull: a.isNotNull,\n          isAutoincremented: a.isAutoincremented,\n          isUnique: a.isUnique,\n        };\n      });\n\n    return {\n      ...super.serialize(),\n      width: this.options.width,\n      color: this.options.color,\n      curvyness: this.options.curvyness,\n      selectedColor: this.options.selectedColor,\n      relName: this.relName,\n      properties,\n    };\n  }\n\n  deserialize(event: DeserializeEvent<this>) {\n    let propertiesNode = new DefaultNodeModel(\n      false,\n      \"relNode\",\n      \"rgb(0,192,255)\"\n    );\n    event.data.properties.forEach((rel: RelationProperties) => {\n      propertiesNode.addPort(\n        new DefaultPortModel(\n          false,\n          rel.label,\n          false,\n          rel.isPrimaryKey,\n          false,\n          false,\n          rel.isNotNull,\n          rel.isAutoincremented,\n          rel.isUnique,\n          rel.propertyType\n        )\n      );\n    });\n\n    super.deserialize(event);\n    this.options.color = event.data.color;\n    this.options.width = event.data.width;\n    this.options.curvyness = event.data.curvyness;\n    this.options.selectedColor = event.data.selectedColor;\n    this.properties = propertiesNode;\n    this.relName = event.data.relName;\n  }\n\n  addLabel(label: LabelModel | string) {\n    if (label instanceof LabelModel) {\n      return super.addLabel(label);\n    }\n    let labelOb = new DefaultLabelModel();\n    labelOb.setLabel(label);\n    return super.addLabel(labelOb);\n  }\n\n  setWidth(width: number) {\n    this.options.width = width;\n    this.fireEvent({ width }, \"widthChanged\");\n  }\n\n  setColor(color: string) {\n    this.options.color = color;\n    this.fireEvent({ color }, \"colorChanged\");\n  }\n}\n","import * as closest from \"closest\";\n\nexport class Toolkit {\n  static TESTING: boolean = false;\n  static TESTING_UID = 0;\n\n  /**\n   * Generats a unique ID (thanks Stack overflow :3)\n   * @returns {String}\n   */\n  public static UID(): string {\n    if (Toolkit.TESTING) {\n      Toolkit.TESTING_UID++;\n      return `${Toolkit.TESTING_UID}`;\n    }\n    return \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g, (c) => {\n      const r = (Math.random() * 16) | 0;\n      const v = c === \"x\" ? r : (r & 0x3) | 0x8;\n      return v.toString(16);\n    });\n  }\n\n  /**\n   * Finds the closest element as a polyfill\n   */\n  public static closest(element: Element, selector: string) {\n    if (document.body.closest) {\n      return element.closest(selector);\n    }\n    return closest(element, selector);\n  }\n}\n","import {\n  LinkModel,\n  PortModel,\n  PortModelAlignment,\n  PortModelGenerics,\n  PortModelOptions,\n  PointModel,\n  DiagramEngine,\n} from \"@projectstorm/react-diagrams-core\";\nimport { DefaultLinkModel } from \"../models/DefaultLinkModel\";\nimport { AbstractModelFactory } from \"@projectstorm/react-canvas-core\";\nimport { Toolkit } from \"../Toolkit\";\nimport _ from \"lodash\";\n\nexport interface DefaultPortModelOptions extends PortModelOptions {\n  label?: string;\n  in?: boolean;\n}\n\nexport interface DefaultPortModelGenerics extends PortModelGenerics {\n  OPTIONS: DefaultPortModelOptions;\n}\n\nexport class DefaultPortModel extends PortModel<DefaultPortModelGenerics> {\n  in: boolean;\n  isNamePort: boolean;\n  label: string;\n  isPrimaryKey: boolean;\n  isPartialKey: boolean;\n  isForeignKey: boolean;\n  isAutoincremented: boolean;\n  isNotNull: boolean;\n  isUnique: boolean;\n  propertyType: string;\n  fkPortId: string;\n\n  dEngine: DiagramEngine;\n\n  constructor(\n    logic: boolean,\n    name: string,\n    isNamePort: boolean,\n    isPrimaryKey?: boolean,\n    isForeignKey?: boolean,\n    isPartialKey?: boolean,\n    isNotNull?: boolean,\n    isAutoincremented?: boolean,\n    isUnique?: boolean,\n    propertyType?: string,\n    engine?: DiagramEngine,\n    id?: string,\n    fkPortId?: string,\n    alignemnt?: PortModelAlignment,\n  ) {\n    super({\n      id: id || Toolkit.UID(),\n      in: true,\n      name,\n      label: name,\n      alignment: alignemnt,\n      type: logic ? \"arrow\" : \"default\",\n    });\n\n    this.label = name;\n    this.isNamePort = isNamePort;\n    this.links = {};\n\n    this.isPrimaryKey = isPrimaryKey;\n    this.isForeignKey = isForeignKey;\n    this.isPartialKey = isPartialKey;\n\n    this.isNotNull = isNotNull;\n    this.isUnique = isUnique;\n    this.isAutoincremented = isAutoincremented;\n\n    this.propertyType = propertyType;\n    this.fkPortId = fkPortId;\n\n    this.dEngine = engine;\n  }\n\n  deserialize(event: any) {\n    super.deserialize(event);\n    this.options.in = event.data.in;\n    this.options.label = event.data.label;\n\n    this.label = event.data.label;\n    this.isNamePort = event.data.isNamePort;\n\n    this.isPrimaryKey = event.data.isPrimaryKey;\n    this.isPartialKey = event.data.isPartialKey;\n\n    this.isForeignKey = event.data.isForeignKey;\n    this.isNotNull = event.data.isNotNull;\n    this.isUnique = event.data.isUnique;\n    this.isAutoincremented = event.data.isAutoincremented;\n    this.propertyType = event.data.propertyType;\n    this.fkPortId = event.data.fkPortId;\n  }\n\n  serialize() {\n    return {\n      ...super.serialize(),\n      in: this.in,\n      label: this.label,\n      isNamePort: this.isNamePort,\n      isPrimaryKey: this.isPrimaryKey,\n      isPartialKey: this.isPartialKey,\n\n      isForeignKey: this.isForeignKey,\n      isNotNull: this.isNotNull,\n      isUnique: this.isUnique,\n      isAutoincremented: this.isAutoincremented,\n      propertyType: this.propertyType,\n      fkPortId: this.fkPortId,\n    };\n  }\n\n  link<T extends LinkModel>(\n    port: PortModel,\n    factory?: AbstractModelFactory<T>\n  ): T {\n    let link = this.createLinkModel(factory);\n    link.setSourcePort(this);\n    link.setTargetPort(port);\n    link.removeMiddlePoints()\n    return link as T;\n  }\n\n  canLinkToPort(port: PortModel): boolean {\n    if (port === this) {\n      return false;\n    }\n    if( port.getParent() === this.getParent()) {\n      this.recursiveRelation(port);\n    }\n\n    return true;\n  }\n\n  createLinkModel(factory?: AbstractModelFactory<LinkModel>): LinkModel {\n    let link = super.createLinkModel();\n    if (!link && factory) {\n      return factory.generateModel({});\n    }\n    var linksCount = _.keys(\n      this.dEngine.getModel().getLinks()\n    ).length;\n\n    console.log(linksCount);\n\n    return link || new DefaultLinkModel({}, {position: {x: this.getPosition().x + 40, y: this.getPosition().y - 100 }}, linksCount + 1);\n\n  }\n\n  recursiveRelation(port: PortModel) {\n    this.link(port);\n\n    return false;\n  }\n}\n","import {\n  LinkModel,\n  LinkModelGenerics,\n  PortModel,\n  PortModelAlignment,\n  DiagramEngine,\n} from \"@projectstorm/react-diagrams\";\nimport { ArrowLinkModel } from \"./ArrowLinkModel\";\nimport { DefaultPortModel } from \"./DefaultPortModel\";\nimport { DefaultNodeModel } from \"./DefaultNodeModel\";\nimport { Toolkit } from \"../Toolkit\";\nimport { AbstractModelFactory } from \"@projectstorm/react-canvas-core\";\n\nexport class AdvancedPortModel extends DefaultPortModel {\n  constructor(\n    name: string,\n    isNamePort: boolean,\n    isPrimaryKey?: boolean,\n    isForeignKey?: boolean,\n    isPartialKey?: boolean,\n    isNotNull?: boolean,\n    isAutoincremented?: boolean,\n    isUnique?: boolean,\n    propertyType?: string,\n    id?: string,\n    fkPortId?: string,\n    alignemnt?: PortModelAlignment\n  ) {\n    super(\n      true,\n      name,\n      isNamePort,\n      isPrimaryKey,\n      isForeignKey,\n      isPartialKey,\n      isNotNull,\n      isAutoincremented,\n      isUnique,\n      propertyType,\n      null,\n      id,\n      fkPortId,\n      alignemnt\n    );\n  }\n\n  link<T extends LinkModel>(\n    port: PortModel,\n    \n    factory?: AbstractModelFactory<T>\n  ): T {\n    let link = this.createLinkModel();\n    link.setSourcePort(port);\n    link.setTargetPort(this);\n    return link as T;\n  }\n\n  canLinkToPort(port: PortModel): boolean {\n    if (port === this) {\n      return false;\n    }\n\n    let thisParent = this.getParent() as DefaultNodeModel;\n    let portNode = port.getParent() as DefaultNodeModel;\n\n    let portNodePorts = portNode.getPorts() as {\n      [s: string]: AdvancedPortModel;\n    };\n    let thisParentPorts = thisParent.getPorts() as {\n      [s: string]: AdvancedPortModel;\n    };\n\n    let czyMaPortZPKjakoFk = Object.keys(thisParentPorts).find(\n      (id) => thisParentPorts[id].fkPortId === portNode.getOptions().id\n    );\n    let czyMaPortZPKjakoFk2 = Object.keys(portNodePorts).find(\n      (id) => portNodePorts[id].fkPortId === thisParent.getOptions().id\n    );\n\n    let pk =\n      Object.keys(thisParentPorts).find(\n        (id) => thisParentPorts[id].isPrimaryKey\n      ) || \"Id\";\n\n    if (!czyMaPortZPKjakoFk && !czyMaPortZPKjakoFk2) {\n      if (pk) {\n        portNode.addPort(\n          new AdvancedPortModel(\n            thisParent.getOptions().name +\n              thisParentPorts[pk].getOptions().name,\n            false,\n            false,\n            true,\n            true,\n            true,\n            false,\n            false,\n            \"INT\",\n            \n            Toolkit.UID(),\n            thisParent.getOptions().id\n          )\n        );\n      } else {\n        portNode.addPort(\n          new AdvancedPortModel(\n            thisParent.getOptions().name + \"Id\",\n            false,\n            false,\n            true,\n            true,\n            true,\n            false,\n            false,\n            \"INT\",\n            Toolkit.UID(),\n            thisParent.getOptions().id\n          )\n        );\n      }\n    }\n\n    return true;\n  }\n\n  createLinkModel(): ArrowLinkModel | LinkModel<LinkModelGenerics> {\n    return new ArrowLinkModel();\n  }\n}\n","import * as React from \"react\";\nimport styled from \"@emotion/styled\";\nimport { css } from \"@emotion/core\";\n\nexport interface TrayItemDivProps {\n  color: string;\n  name?: string;\n  onClick: () => void;\n  marginTop?: string;\n  isSelected?: boolean;\n  isDisabled?: boolean;\n}\nnamespace S {\n  export const Tray = styled.div<{\n    color: string;\n    marginTop: string;\n    isSelected: boolean;\n    isDisabled: boolean;\n  }>`\n    color: white;\n    font-family: Helvetica, Arial;\n    padding: 5px;\n    margin: 0px 10px;\n    border: solid 1px ${({color}) => color};\n    border-radius: 5px;\n    margin-bottom: 2px;\n    cursor: pointer;\n    margin-top: ${({marginTop}) => marginTop};\n\n    display: flex;\n    justify-content: space-between;\n  \n    ${({isSelected}) =>\n      isSelected &&\n      css`\n        background-color: black;\n        border-width: 4px !important;\n      `}\n  \n    ${({isDisabled}) =>\n      isDisabled &&\n      css`\n        cursor: not-allowed !important;\n      `}\n  `;\n}\n\nexport class TrayItemDiv extends React.Component<TrayItemDivProps> {\n  render() {\n    let { isDisabled,isSelected, marginTop, color, name } = this.props;\n\n    return (\n      <S.Tray\n        {...this.props}\n        isDisabled={isDisabled}\n        isSelected={isSelected}\n        marginTop={marginTop}\n        color={color}\n      >\n        {this.props.children ?? name}\n      </S.Tray>\n    );\n  }\n}\n","export enum PropertyType {\n  BIT = \"BIT\",\n  TINYINT = \"TINYINT\",\n  SMALLINT = \"SMALLINT\",\n  INT = \"INT\",\n  BIGINT = \"BIGINT\",\n  \"DECIMAL()\" = \"DECIMAL()\",\n  \"NUMERIC()\" = \"NUMERIC()\",\n  \"FLOAT()\" = \"FLOAT()\",\n  REAL = \"REAL\",\n  DATE = \"DATE\",\n  TIME = \"TIME\",\n  DATETIME = \"DATETIME\",\n  TIMESTAMP = \"TIMESTAMP\",\n  YEAR = \"YEAR\",\n  \"CHAR()\" = \"CHAR()\",\n  \"VARCHAR()\" = \"VARCHAR()\",\n  TEXT = \"TEXT\",\n  \"NCHAR()\" = \"NCHAR()\",\n  \"NVARCHAR()\" = \"NVARCHAR()\",\n  NTEXT = \"NTEXT\",\n  \"BINARY()\" = \"BINARY()\",\n  \"VARBINARY()\" = \"VARBINARY()\",\n  IMAGE = \"IMAGE\",\n  CLOB = \"CLOB\",\n  BLOB = \"BLOB\",\n  XML = \"XML\",\n  JSON = \"JSON\",\n  MONEY = \"MONEY\",\n}\n","import * as React from \"react\";\n\nimport { GridProps } from \"./\";\n\nexport default class Grid extends React.Component<GridProps> {\n  render() {\n    return (\n      <div style={this.props.style} className={this.buildClassNameString()}>\n        {this.props.children}\n      </div>\n    );\n  }\n\n  buildClassNameString() {\n    let className = \"ms-Grid\";\n\n    if (this.props.className != null) {\n      className += ` ${this.props.className}`;\n    }\n\n    return className;\n  }\n}\n","import * as React from \"react\";\n\nimport { GridRowProps } from \"./\";\n\nexport default class Row extends React.Component<GridRowProps> {\n  render() {\n    return (\n      <div className={this.buildClassNameString()}>{this.props.children}</div>\n    );\n  }\n\n  buildClassNameString() {\n    let className = \"ms-Grid-row\";\n\n    if (this.props.flex) {\n      className += \" grid-row-flex\";\n    }\n\n    if (this.props.className != null) {\n      className += ` ${this.props.className}`;\n    }\n\n    return className;\n  }\n}\n","import * as React from \"react\";\n\nimport { GridColProps, GridColConfigProp } from \"./\";\n\nexport default class Col extends React.Component<GridColProps> {\n  render() {\n    return (\n      <div\n        className={this.buildClassNameString()}\n        onDoubleClick={this.props.onDoubleClick}\n      >\n        {this.props.children}\n      </div>\n    );\n  }\n\n  buildGridColConfigClassNames(size: string, config: GridColConfigProp) {\n    if (config == null) return \"\";\n\n    let className = ` ms-${size}`;\n\n    if (typeof config === \"string\") {\n      className += config;\n    } else {\n      className += config.size;\n\n      if (config.pull != null) {\n        className += ` ms-${size}Pull${config.pull}`;\n      }\n\n      if (config.push != null) {\n        className += ` ms-${size}Push${config.push}`;\n      }\n\n      if (config.offset != null) {\n        className += ` ms-${size}Offset${config.offset}`;\n      }\n\n      if (config.order != null) {\n        className += ` grid-flex-order-${size}-${config.order}`;\n      }\n    }\n\n    return className;\n  }\n\n  buildClassNameString() {\n    let className = \"ms-Grid-col\";\n\n    if (this.props.className != null) {\n      className += ` ${this.props.className}`;\n    }\n\n    if (this.props.hidden != null) {\n      className += ` ms-hidden${this.props.hidden}`;\n    }\n\n    if (this.props.order != null) {\n      className += ` grid-flex-order-${this.props.order}`;\n    }\n\n    className += this.buildGridColConfigClassNames(\"sm\", this.props.sm);\n    className += this.buildGridColConfigClassNames(\"md\", this.props.md);\n    className += this.buildGridColConfigClassNames(\"lg\", this.props.lg);\n    className += this.buildGridColConfigClassNames(\"xl\", this.props.xl);\n    className += this.buildGridColConfigClassNames(\"xxl\", this.props.xxl);\n    className += this.buildGridColConfigClassNames(\"xxxl\", this.props.xxxl);\n\n    return className;\n  }\n}\n","import \"./PropertyTable.scss\";\nimport \"react-bootstrap-table-next/dist/react-bootstrap-table2.min.css\";\nimport React from \"react\";\nimport { PropertyType } from \"../../infrastructure/models/PropertyType\";\nimport { DefaultPortModel } from \"../../infrastructure/models/DefaultPortModel\";\nimport BootstrapTable from \"react-bootstrap-table-next\";\nimport { DefaultNodeModel } from \"../../infrastructure/models/DefaultNodeModel\";\nimport { DiagramEngine } from \"@projectstorm/react-diagrams\";\nimport { AdvancedPortModel } from \"../../infrastructure/models/ArrowPortModel\";\nimport styled from \"@emotion/styled\";\nimport { DarkInput } from \"../DarkInput\";\nimport { Toolkit } from \"../../infrastructure/Toolkit\";\nimport { DefaultLinkModel } from \"../../infrastructure/models/DefaultLinkModel\";\nimport { DefaultLabelModel } from \"../../infrastructure/models/DefaultLabelModel\";\nimport _ from \"lodash\";\n\nnamespace S {\n  export const AddNewAtributeButton = styled.p`\n    cursor: cell\n  `;\n}\n\nclass Props {\n  relationName?: string;\n  update: () => void;\n  selectedItem: DefaultNodeModel;\n  diagramEngine: DiagramEngine;\n  relView?: boolean;\n  link?: DefaultLinkModel;\n  isLogic: boolean;\n}\n\nexport function useForceUpdate() {\n  const [, setValue] = React.useState(0);\n  return () => setValue((value) => ++value);\n}\n\nexport const PropertyTable = (props: Props) => {\n  const [updatedItem, setUpdatedItem] = React.useState(null);\n\n  const forceUpdate = useForceUpdate();\n\n  React.useMemo(() => {\n    setUpdatedItem(props.selectedItem);\n  }, [props.selectedItem]);\n\n  const clearPartialKeys = () => {\n    let ports =\n      updatedItem &&\n      updatedItem.ports &&\n      (updatedItem.ports as { [s: string]: DefaultPortModel });\n\n    Object.keys(ports).map((p) => console.log((ports[p].isPartialKey = false)));\n  };\n\n  const handleChangePK = (\n    event: React.ChangeEvent<HTMLInputElement>,\n    row: DefaultPortModel\n  ) => {\n    event.persist();\n    (updatedItem.getPortFromID(\n      row.getOptions().id\n    ) as DefaultPortModel).isPrimaryKey = !row.isPrimaryKey;\n\n    (updatedItem.getPortFromID(\n      row.getOptions().id\n    ) as DefaultPortModel).isNotNull = row.isPrimaryKey ? true : false;\n\n    (updatedItem.getPortFromID(\n      row.getOptions().id\n    ) as DefaultPortModel).isAutoincremented = row.isPrimaryKey ? true : false;\n\n    (updatedItem.getPortFromID(\n      row.getOptions().id\n    ) as DefaultPortModel).isUnique = row.isPrimaryKey ? true : false;\n\n    clearPartialKeys();\n    forceUpdate();\n  };\n\n  const handleChangeFK = (\n    event: React.ChangeEvent<HTMLInputElement>,\n    row: DefaultPortModel\n  ) => {\n    event.persist();\n    (updatedItem.getPortFromID(\n      row.getOptions().id\n    ) as DefaultPortModel).isForeignKey = !row.isForeignKey;\n\n    (updatedItem.getPortFromID(\n      row.getOptions().id\n    ) as DefaultPortModel).isNotNull = row.isForeignKey ? true : false;\n\n    forceUpdate();\n  };\n\n  const handleChangeNull = (\n    event: React.ChangeEvent<HTMLInputElement>,\n    row: DefaultPortModel\n  ) => {\n    event.persist();\n    (updatedItem.getPortFromID(\n      row.getOptions().id\n    ) as DefaultPortModel).isNotNull = !row.isNotNull;\n    forceUpdate();\n  };\n\n  const handleChangePartialKey = (\n    event: React.ChangeEvent<HTMLInputElement>,\n    row: DefaultPortModel\n  ) => {\n    event.persist();\n    (updatedItem.getPortFromID(\n      row.getOptions().id\n    ) as DefaultPortModel).isPartialKey = !row.isPartialKey;\n\n    (updatedItem.getPortFromID(\n      row.getOptions().id\n    ) as DefaultPortModel).isNotNull = row.isPartialKey ? true : false;\n    forceUpdate();\n  };\n\n  const handleChangeUnique = (\n    event: React.ChangeEvent<HTMLInputElement>,\n    row: DefaultPortModel\n  ) => {\n    event.persist();\n    (updatedItem.getPortFromID(\n      row.getOptions().id\n    ) as DefaultPortModel).isUnique = !row.isUnique;\n    forceUpdate();\n  };\n\n  const handleChangeAutoInc = (\n    event: React.ChangeEvent<HTMLInputElement>,\n    row: DefaultPortModel\n  ) => {\n    event.persist();\n    (updatedItem.getPortFromID(\n      row.getOptions().id\n    ) as DefaultPortModel).isAutoincremented = !row.isAutoincremented;\n    forceUpdate();\n  };\n\n  const handleChangepPropType = (\n    event: React.ChangeEvent<HTMLInputElement>,\n    row: DefaultPortModel\n  ) => {\n    event.persist();\n\n    (updatedItem.getPortFromID(\n      row.getOptions().id\n    ) as DefaultPortModel).propertyType = event.target.value;\n  };\n\n  const handleChangePortLabel = (\n    event: React.ChangeEvent<HTMLInputElement>,\n    row: DefaultPortModel\n  ) => {\n    event.persist();\n\n    let allPorts = props.selectedItem.getPorts() as {[s: string]: DefaultPortModel};\n\n    let names = Object.values(allPorts).map((port) =>\n      port.label.toLowerCase().trim()\n    );\n\n    var propertiesCount = _.keys(\n      props.selectedItem.getPorts() \n    ).length;\n\n\n    names.includes(event.target.value.toLowerCase().trim())\n    ? ((updatedItem.getPortFromID(row.getOptions().id) as DefaultPortModel).label = ((updatedItem.getPortFromID(row.getOptions().id)) as DefaultPortModel).getOptions().name)// `${defaultName} ${propertiesCount - 4}`)\n    : (updatedItem.getPortFromID(row.getOptions().id) as DefaultPortModel).label = event.target.value.trim();\n\n    if(props.relView) {\n      let relationAtributes = props.link.properties !== null && props.link.properties.getPorts() as {[s: string]: DefaultPortModel};\n      let attString = '';\n  \n      if(Object.keys(relationAtributes).length > 0) {\n        Object.keys(relationAtributes).map(id => attString += `${relationAtributes[id].label} ${relationAtributes[id].propertyType} \\n`);\n        \n  \n        let labels = props.link.getLabels() as DefaultLabelModel[];\n        labels[1].getOptions().label = `${props.relationName}\\n${attString}`;\n    \n      }\n    }\n  };\n\n  const addNewPort = (newPortNumber: number) => {\n    (updatedItem as DefaultNodeModel).addPort(\n      new AdvancedPortModel(\n        `new atribute ${newPortNumber}`,\n        false,\n        false,\n        false,\n        false,\n        false,\n        false,\n        false,\n        \"INT\",\n        Toolkit.UID()\n      )\n    );\n\n    if(props.relView) {\n      let {link} = props;\n      let labels = link.getLabels() as DefaultLabelModel[];\n      \n      labels[1].getOptions().label += `${`new atribute ${newPortNumber}`} INT \\n`;\n    }\n\n    forceUpdate();\n  };\n\n  const removePort = (port: DefaultPortModel) => {\n    console.log('port: ', port);\n    updatedItem.removePort(port);\n\n    if(props.link) {\n    console.log('linkports: ', props.link);\n\n      let relationAtributes = props.link.properties !== null && props.link.properties.getPorts() as {[s: string]: DefaultPortModel};\n      let attString = '';\n  \n      if(Object.keys(relationAtributes).length > 0) {\n        Object.keys(relationAtributes).filter(id => id !== port.getID()).map(id => attString += `${relationAtributes[id].label} ${relationAtributes[id].propertyType} \\n`);\n        \n        let labels = props.link.getLabels() as DefaultLabelModel[];\n        let oldLabel = labels[1].getOptions().label;\n        labels[1].getOptions().label = oldLabel.slice(0, oldLabel.indexOf('\\n'));\n        labels[1].getOptions().label += `\\n${attString}`;\n      }\n    }\n\n    forceUpdate();\n  };\n\n  const preparePropertyTypes = () => {\n    return Object.values(PropertyType).map((obj) => (\n      <option key={obj} value={obj}>\n        {obj}\n      </option>\n    ));\n  };\n\n  const columns: any[] = [\n    {\n      key: \"Property Name\",\n      dataField: \"label\",\n      text: \"Property Name\",\n      formatter: (cellContent: any, row: DefaultPortModel) => (\n        <div className=\"input\">\n          {/* Emotion test - plan is to replace all .scss styles with emotion styled components */}\n          {/* <DarkInput \n            type=\"text\" \n            defaultValue={row.label} \n            onChange={(event) => handleChangePortLabel(event, row)}\n          ></DarkInput> */}\n\n          <input\n            style={{ width: \"100px\" }}\n            className=\"darkInput\"\n            type=\"text\"\n            defaultValue={row.label}\n            onChange={(event) => handleChangePortLabel(event, row)}\n          ></input>\n        </div>\n      ),\n    },\n    {\n      style: { paddingLeft: 0 },\n      dataField: \"propertyType\",\n      text: \"Property Type\",\n      key: \"Property Type\",\n      formatter: (cellContent: any, row: DefaultPortModel) => (\n        <div className=\"input\">\n          <input\n            style={{ width: \"100px\" }}\n            type=\"text\"\n            list=\"types\"\n            className=\"darkInput\"\n            onChange={(event) => handleChangepPropType(event, row)}\n            defaultValue={row.propertyType}\n          />\n          <datalist id=\"types\">{preparePropertyTypes()}</datalist>\n        </div>\n      ),\n    },\n    {\n      dataField: \"isPrimaryKey\",\n      text: \"Is Primary Key\",\n      key: \"Is Primary Key\",\n      formatter: (cellContent: any, row: DefaultPortModel) => (\n        <div className=\"checkbox\">\n          <label>\n            <input\n              type=\"checkbox\"\n              checked={row.isPrimaryKey}\n              onChange={(event) => handleChangePK(event, row)}\n            />\n          </label>\n        </div>\n      ),\n    },\n    {\n      dataField: \"isForeignKey\",\n      text: \"Is Foreign Key\",\n      key: \"Is Foreign Key\",\n      formatter: (cellContent: any, row: DefaultPortModel) => (\n        <div className=\"checkbox\">\n          <label>\n            <input\n              type=\"checkbox\"\n              checked={row.isForeignKey}\n              onChange={(event) => handleChangeFK(event, row)}\n            />\n          </label>\n        </div>\n      ),\n    },\n    {\n      dataField: \"isPartialKey\",\n      text: \"Is Partial Key\",\n      key: \"Is Partial Key\",\n      formatter: (cellContent: any, row: DefaultPortModel) => (\n        <div className=\"checkbox\">\n          <label>\n            <input\n              type=\"checkbox\"\n              checked={row.isPartialKey}\n              onChange={(event) => handleChangePartialKey(event, row)}\n            />\n          </label>\n        </div>\n      ),\n    },\n    {\n      dataField: \"isNotNull\",\n      text: \"Not Null\",\n      key: \"Not Null\",\n      formatter: (cellContent: any, row: DefaultPortModel) => (\n        <div className=\"checkbox\">\n          <label>\n            <input\n              disabled={row.isPrimaryKey || row.isForeignKey}\n              type=\"checkbox\"\n              checked={row.isNotNull}\n              onChange={(event) => handleChangeNull(event, row)}\n            />\n          </label>\n        </div>\n      ),\n    },\n    {\n      dataField: \"isAutoincremented\",\n      text: \"Is Auto Incremented\",\n      key: \"Is Auto Incremented\",\n      formatter: (cellContent: any, row: DefaultPortModel) => (\n        <div className=\"checkbox\">\n          <label>\n            <input\n              disabled={row.isPrimaryKey}\n              type=\"checkbox\"\n              checked={row.isAutoincremented}\n              onChange={(event) => handleChangeAutoInc(event, row)}\n            />\n          </label>\n        </div>\n      ),\n    },\n    {\n      dataField: \"isUnique\",\n      text: \"Is Unique\",\n      key: \"Is Unique\",\n      formatter: (cellContent: any, row: DefaultPortModel) => (\n        <div className=\"checkbox\">\n          <label>\n            <input\n              disabled={row.isPrimaryKey}\n              type=\"checkbox\"\n              checked={row.isUnique}\n              onChange={(event) => handleChangeUnique(event, row)}\n            />\n          </label>\n        </div>\n      ),\n    },\n    {\n      dataField: \"remove\",\n      text: \"Remove\",\n      key: \"Remove\",\n      formatter: (cellContent: any, row: DefaultPortModel) => (\n        <div className=\"checkbox\">\n          <label>\n            <span\n              onClick={() => removePort(row)}\n              className=\"mi mi-Delete red onhoverPointer\"\n            />\n          </label>\n        </div>\n      ),\n    },\n  ];\n\n  let ports =\n    updatedItem &&\n    updatedItem.ports &&\n    (updatedItem.ports as { [s: string]: DefaultPortModel });\n\n  let portsTable: DefaultPortModel[] =\n    ports &&\n    Object.keys(ports)\n      .map((x) => {\n        return ports[x];\n      })\n      .filter((p) => !p.isNamePort);\n\n  let ispk =\n    portsTable && portsTable.find((p) => p.isPrimaryKey) ? true : false;\n\n  let cols = columns;\n\n  if (ispk) {\n    cols = cols.filter((col) => col.dataField !== \"isPartialKey\");\n  }\n\n  if (!props.isLogic) {\n    cols = cols.filter((c) => c.dataField !== \"isForeignKey\");\n  }\n\n  return (\n    <div className={`${!props.relView && 'relView'}`}>\n      <BootstrapTable\n        keyField=\"id\"\n        data={portsTable}\n        columns={\n          props.relView\n            ? cols.filter(\n                (col) =>\n                  col.dataField !== \"isPrimaryKey\" &&\n                  col.dataField !== \"isPartialKey\"\n              )\n            : cols\n        }\n        bordered={false}\n      />\n      <S.AddNewAtributeButton onClick={() => addNewPort(portsTable.length)}>\n        Add new atribute\n        </S.AddNewAtributeButton>\n    </div>\n  );\n};\n","import * as React from \"react\";\nimport styled from \"@emotion/styled\";\nimport { css } from \"@emotion/core\";\n\nexport interface DarkInputProps {\n    fontSize?: number\n    type: string\n    defaultValue: string\n    onChange: (event) => void;\n}\nnamespace S {\n  export const Input = styled.input<{fontSize?: number}>`\n    background-color: #3E3E3E;\n    color: #E9F7F7;\n    margin-top: 7px;\n    width: 150px;\n    margin-right: 0px;\n    padding-right: 0px;\n\n    ${({fontSize}) => \n    css`\n        font-size: ${fontSize}px;\n        margin-top: 15px;\n        width: 90%;\n    `}\n  `;\n}\n\nexport class DarkInput extends React.Component<DarkInputProps> {\n  render() {\n\n    return (\n      <S.Input\n        {...this.props}\n      >\n        {this.props.children}\n      </S.Input>\n    );\n  }\n}\n","import \"./NodeProperties.scss\";\nimport * as React from \"react\";\n\nimport { Col, Row, Grid } from \"../grid\";\nimport { DiagramEngine } from \"@projectstorm/react-diagrams\";\nimport { DefaultNodeModel } from \"../../infrastructure/models/DefaultNodeModel\";\nimport { PropertyTable } from \"../PropertyTable/PropertyTable\";\nimport { DarkInput } from \"../DarkInput\";\n\nclass Props {\n  update: () => void;\n\n  selectedItem: DefaultNodeModel;\n  isLogic: boolean;\n  diagramEngine: DiagramEngine;\n}\n\nexport function useForceUpdate() {\n  const [, setValue] = React.useState(0);\n  return () => setValue((value) => ++value);\n}\n\nexport const NodeProperties = (props: Props) => {\n  const [updatedItem, setUpdatedItem] = React.useState(null);\n  const [defaultName, setDefaultName] = React.useState(\"\");\n\n  const [name, setName] = React.useState(\"\");\n  const [showInput, setShowInput] = React.useState(false);\n\n  const forceUpdate = useForceUpdate();\n\n  React.useMemo(() => {\n    setUpdatedItem(props.selectedItem);\n    setName(props.selectedItem.getOptions().name);\n    setDefaultName(props.selectedItem.getOptions().name);\n  }, [props.selectedItem]);\n\n  React.useEffect(() => {\n    props.selectedItem.setLocked();\n\n    return () => {\n      props.selectedItem.setLocked(false);\n    };\n  });\n\n  const handleNameChange = (\n    event: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>\n  ) => {\n    event.persist();\n    if(event.target.value != \"\") {\n      let allNodes = props.diagramEngine\n        .getModel()\n        .getNodes() as DefaultNodeModel[];\n  \n      let names = allNodes.map((node) =>\n        node.getOptions().name.toLowerCase().trim()\n      );\n  \n      names.includes(event.target.value.toLowerCase().trim())\n        ? (updatedItem.getOptions().name = defaultName)\n        : (updatedItem.getOptions().name = event.target.value.trim());\n    }\n    forceUpdate();\n  };\n\n  // const iconStyles: React.CSSProperties = {\n  //   display: \"flex\",\n  //   flexDirection: \"row\",\n  //   flexFlow: \"row-reverse\",\n  //   position: \"absolute\",\n  //   right: \"0\",\n  //   top: \"10px\",\n  //   zIndex: 9999,\n  // };\n\n  // const acceptStyle: React.CSSProperties = {\n  //   marginRight: 5,\n  //   backgroundColor: \"green\",\n  //   borderRadius: \"90px\",\n  //   padding: \"10px\",\n  // };\n\n  // const declineStyle: React.CSSProperties = {\n  //   marginRight: \"20px\",\n  //   backgroundColor: \"red\",\n  //   borderRadius: \"90px\",\n  //   padding: \"10px\",\n  // };\n\n  if (!updatedItem) return null;\n  else\n    return (\n      <div className=\"trayBottom\">\n        {/* <div style={iconStyles}>\n              <span\n                style={declineStyle}\n                className={`mi ${\n                  \"mi-Cancel\"\n                }`}\n              />\n                <span\n                  style={acceptStyle}\n                  className={`mi ${\n                    \"mi-Accept\"\n                  }`}\n                />\n            </div> */}\n        <Grid>\n          <Row>\n            <Col>\n              {!showInput ? (\n                <h1\n                  style={{ wordBreak: \"break-all\" }}\n                  onDoubleClick={() => setShowInput(true)}\n                >\n                  {name}\n                </h1>\n              ) : props.selectedItem.isLabel ? (\n                <textarea\n                  style={{ height: \"200px\" }}\n                  className=\"darkInput fs-28\"\n                  defaultValue={name}\n                  onChange={(event) => handleNameChange(event)}\n                ></textarea>\n              ) : (\n                // Emotion test - plan is to replace all .scss styles with emotion styled components\n                 <DarkInput\n                  fontSize={28}\n                  type=\"text\"\n                  defaultValue={name}\n                  onChange={(event) => handleNameChange(event)}\n                  ></DarkInput> \n              )}\n            </Col>\n\n            {!updatedItem.isLabel ? (\n              <PropertyTable\n              update={props.update}\n                selectedItem={props.selectedItem}\n                diagramEngine={props.diagramEngine}\n                isLogic={props.isLogic}\n              />\n            ) : null}\n          </Row>\n        </Grid>\n      </div>\n    );\n};\n","import \"./ResultPopup.scss\";\nimport React, { useState } from \"react\";\nimport Popup from \"reactjs-popup\";\nimport sqlFormatter from \"sql-formatter\";\nimport FileSaver from \"file-saver\";\n\nclass Props {\n  isOpen: boolean;\n  generateScript?: (name: string, dbms: string) => void;\n  mssqlString: string;\n  mysqlString: string;\n  update: () => void;\n}\n\nexport const ResultPopup = (props: Props) => {\n  const [dbName, setDbName] = useState(\"DatabaseName\");\n  const [mySQLView, setmySQLView] = useState(false);\n\n  let formatedMSSQL =\n    props.mssqlString &&\n    sqlFormatter.format(props.mssqlString, {\n      language: \"sql\", // Defaults to \"sql\"\n      indent: \"  \", // Defaults to two spaces\n    });\n\n  let formatedMySQL =\n    props.mysqlString &&\n    sqlFormatter.format(props.mysqlString, {\n      language: \"db2\", // Defaults to \"sql\"\n      indent: \"  \", // Defaults to two spaces\n    });\n\n  // useEffect(() => {\n  //   formatedMSSQL = '';\n  //   formatedMySQL = '';\n  // }, [props.mssqlString, props.mysqlString])\n\n  const downloadMSSQL = () => {\n    var blob = new Blob([formatedMSSQL], { type: \"text/plain;charset=utf-8\" });\n    FileSaver.saveAs(blob, `${dbName}.sql`);\n    props.update();\n  };\n\n  const downloadMYSQL = () => {\n    var blob = new Blob([formatedMySQL], { type: \"text/plain;charset=utf-8\" });\n    FileSaver.saveAs(blob, `${dbName}.sql`);\n    props.update();\n  };\n\n  return (\n    <Popup modal closeOnDocumentClick open={props.isOpen} closeOnEscape>\n      <div className=\"sql-result-dialog\">\n        <input\n          style={{ marginRight: \"10px\" }}\n          type=\"text\"\n          onChange={(event) => setDbName(event.target.value)}\n          value={dbName}\n        />\n\n        <button\n          style={{ marginRight: \"10px\" }}\n          onClick={() => {\n            console.log(mySQLView);\n            props.generateScript(dbName, !mySQLView ? 'mssql' : 'mysql');\n          }}\n        >\n          Generate\n        </button>\n\n        <button\n          className={`${mySQLView ? \"\" : \"selected-sql\"}`}\n          onClick={() => {\n            setmySQLView(false);\n          }}\n        >\n          MSSQL\n        </button>\n\n        <button\n          className={`${mySQLView ? \"selected-sql\" : \"\"}`}\n          onClick={() => {\n            setmySQLView(true);\n          }}\n        >\n          MySQL\n        </button>\n\n        <textarea\n          style={{ marginTop: \"5px\" }}\n          readOnly={true}\n          value={mySQLView ? formatedMySQL : formatedMSSQL}\n          contentEditable={false}\n        ></textarea>\n\n        <button style={{ marginRight: \"10px\" }} disabled={!props.mssqlString} onClick={downloadMSSQL}>\n          Download MSSQL\n        </button>\n        <button style={{ marginRight: \"10px\" }} disabled={!props.mysqlString} onClick={downloadMYSQL}>\n          Download mySQL\n        </button>\n      </div>\n    </Popup>\n  );\n};\n","import { ResultPopup } from \"../components/popups/ResultPopup/ResultPopup\";\nimport React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\n\nclass Props {\n  isUml: boolean;\n  isLogic: boolean;\n  isOpen: boolean;\n  serializeDiagram: () => any;\n  update: () => void;\n}\n\nexport const GenerationHandler = (props: Props) => {\n  const [sqlString, setSqlString] = useState(\"\");\n  const [mysqlString, setMySqlString] = useState(\"\");\n\n  useEffect(() => setSqlString(\"\"), [props.isOpen]);\n\n  const generateScript = async (name: string, dbms: string) => {\n    const serDiagram = props.serializeDiagram();\n    const dNodes = serDiagram[\"layers\"][1][\"models\"];\n\n    const nodes = Object.keys(dNodes).map((id) => {\n      return dNodes[id];\n    });\n\n    const dLinks = serDiagram[\"layers\"][0][\"models\"];\n    const links = Object.keys(dLinks).map((id) => {\n      return dLinks[id];\n    });\n\n    const diagramJson = {\n      nodes,\n      links,\n    };\n    const diagram = JSON.stringify(diagramJson, null, 2);\n\n    if(dbms === 'mssql') {\n      console.log('mssql')\n      const response = await axios.post(\n        \"https://sql-generator.pl/api/setjob/mssql\",\n        {\n          SerializedModel: diagram,\n          DatabaseName: name,\n          RelationType: props.isUml ? \"UML\" : \"CHEN\"\n        }\n      );\n\n      if (response.status === 200) {\n        setSqlString(response.data);\n      } else {\n        const errorMessage = 'There was an error while processing your request';\n        setSqlString(errorMessage);\n  \n        console.log(errorMessage);\n      }\n    } else {\n      console.log('mysql')\n\n      const responseMy = await axios.post(\n        \"https://sql-generator.pl/api/setjob/mysql\",\n        {\n          SerializedModel: diagram,\n          DatabaseName: name,\n          RelationType: props.isUml ? \"UML\" : \"CHEN\"\n        }\n      );\n\n      if (responseMy.status === 200) {\n        setMySqlString(responseMy.data);\n      } else {\n        const errorMessage = 'There was an error while processing your request';\n        setMySqlString(errorMessage);\n  \n        console.log(errorMessage);\n      }\n    }\n  };\n\n  return (\n    <ResultPopup\n      update={props.update}\n      mssqlString={sqlString}\n      mysqlString={mysqlString}\n      generateScript={(name: string, dbms: string) => generateScript(name, dbms)}\n      isOpen={props.isOpen}\n    />\n  );\n};\n","import \"./LoadFilePopup.scss\";\nimport React, { useState } from \"react\";\nimport Popup from \"reactjs-popup\";\n\nclass Props {\n  isOpen: boolean;\n  loadDiagram?: (name: string) => void;\n  update: () => void;\n}\n\nexport const LoadFilePopup = (props: Props) => {\n  let fileReader: FileReader;\n\n  const [fileContent, setFileContent] = useState(\"\");\n\n  const handleFileRead = (e: any) => {\n    const content = fileReader.result;\n    setFileContent(content as string);\n  };\n\n  const handleFileChosen = (name: any) => {\n    fileReader = new FileReader();\n    fileReader.onloadend = handleFileRead;\n    fileReader.readAsText(name);\n  };\n\n  return (\n    <Popup\n      modal\n      closeOnDocumentClick\n      open={props.isOpen}\n      closeOnEscape\n      onClose={() => props.update()}\n    >\n      <div className=\"sql-result-dialog\">\n        <input\n          type=\"file\"\n          onChange={(event) => handleFileChosen(event.target.files[0])}\n          accept=\".dbjson\"\n        />\n        <button onClick={() => props.loadDiagram(fileContent)}>Load</button>\n      </div>\n    </Popup>\n  );\n};\n","import React from \"react\";\nimport { LoadFilePopup } from \"../components/popups/LoadFilePopup/LoadFilePopup\";\nimport { Application } from \"../components/Application\";\nimport { DiagramModel } from \"@projectstorm/react-diagrams\";\n\nclass Props {\n  isOpen: boolean;\n  app: Application;\n  update: () => void;\n  setIsUml: (isUml: boolean) => void;\n  setIsLogic: (isLogic: boolean) => void;\n}\n\nexport const LoadFileHandler = (props: Props) => {\n  const loadDiagram = (name: string) => {\n    const engine = props.app.getDiagramEngine();\n    try {\n      const obj: {\n        conceptualDiagram: ReturnType<DiagramModel[\"serialize\"]>;\n        logicalDiagram: ReturnType<DiagramModel[\"serialize\"]>;\n        isUml: boolean;\n      } = JSON.parse(name);\n      console.log(obj);\n\n      props.setIsUml(obj.isUml);\n\n      let consceptual = new DiagramModel();\n      let logic = new DiagramModel();\n\n      if(obj.conceptualDiagram) {\n        consceptual.deserializeModel(obj.conceptualDiagram, engine);\n        \n        consceptual.getLinks().forEach((link) => {\n          link.getLabels().splice(0, 3);\n        });\n\n        props.app.loadConceptualModel(consceptual);\n        props.setIsLogic(false);\n      }\n\n      // if(logic.getNodes().keys.length > 0) {\n        if(obj.logicalDiagram) {\n          logic.deserializeModel(obj.logicalDiagram, engine);\n          \n  \n        logic.getLinks().forEach((link) => {\n          link.getLabels().splice(0, 3);\n        });\n\n        props.app.loadLogicModel(logic);\n        props.setIsLogic(true);\n      }\n\n      engine.repaintCanvas();\n      props.update();\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  return (\n    <LoadFilePopup\n      update={props.update}\n      loadDiagram={(name) => loadDiagram(name)}\n      isOpen={props.isOpen}\n    />\n  );\n};\n","import \"./SaveToFilePopup.scss\";\nimport React, { useState } from \"react\";\nimport Popup from \"reactjs-popup\";\nimport FileSaver from \"file-saver\";\nimport { DiagramModel } from \"@projectstorm/react-diagrams\";\n\nimport * as _ from 'lodash';\n\nclass Props {\n  isUml: boolean;\n  secondModel: DiagramModel;\n  isOpen: boolean;\n  diagramModel: DiagramModel;\n  update: () => void;\n}\n\nexport const SaveToFilePopup = (props: Props) => {\n  const [fileName, setFileName] = useState(\"diagram\");\n\n  const download = () => {\n    const diagramJson = JSON.stringify({\n      conceptualDiagram: props.diagramModel.serialize(),\n      logicalDiagram: _.isEmpty(props.secondModel.getActiveNodeLayer().getNodes()) ? null : props.secondModel.serialize(),\n\n      isUml: props.isUml,\n    });\n\n    console.log('do zapisu', props.secondModel, props.secondModel.getActiveNodeLayer().getNodes() );\n\n    let blob = new Blob([diagramJson], { type: \"text/plain;charset=utf-8\" });\n    FileSaver.saveAs(blob, `${fileName}.dbjson`);\n    props.update();\n  };\n\n  return (\n    <Popup\n      modal\n      closeOnDocumentClick\n      open={props.isOpen}\n      closeOnEscape\n      onClose={() => props.update()}\n    >\n      <div className=\"sql-result-dialog\">\n        <input\n          type=\"text\"\n          onChange={(event) => setFileName(event.target.value)}\n          value={fileName}\n        />\n        <button onClick={download}>save</button>\n      </div>\n    </Popup>\n  );\n};\n","import \"./SaveToJpegPopup.scss\";\nimport React, { useState } from \"react\";\nimport Popup from \"reactjs-popup\";\nimport domtoimage from \"dom-to-image\";\nimport { DiagramModel } from \"@projectstorm/react-diagrams\";\n\nclass Props {\n  isOpen: boolean;\n  diagramModel: DiagramModel;\n  update: () => void;\n}\n\nexport const SaveToJpegPopup = (props: Props) => {\n  const [fileName, setFileName] = useState(\"diagram\");\n\n  const download = () => {\n    domtoimage\n      .toJpeg(document.getElementById(\"diagram-layer\"), { quality: 0.95 })\n      .then((dataUrl: any) => {\n        let link = document.createElement(\"a\");\n        link.download = `${fileName}.jpeg`;\n        link.href = dataUrl;\n        link.click();\n        props.update();\n      });\n  };\n\n  return (\n    <Popup\n      modal\n      closeOnDocumentClick\n      open={props.isOpen}\n      closeOnEscape\n      onClose={() => props.update()}\n    >\n      <div className=\"sql-result-dialog\">\n        <input\n          type=\"text\"\n          onChange={(event) => setFileName(event.target.value)}\n          value={fileName}\n        />\n        <button onClick={download}>save</button>\n      </div>\n    </Popup>\n  );\n};\n","import React, { useState } from \"react\";\nimport Popup from \"reactjs-popup\";\nimport { DefaultLinkModel } from \"../../../infrastructure/models/DefaultLinkModel\";\nimport { DefaultLabelModel } from \"../../../infrastructure/models/DefaultLabelModel\";\nimport { DefaultNodeModel } from \"../../../infrastructure/models/DefaultNodeModel\";\nimport { AdvancedPortModel } from \"../../../infrastructure/models/ArrowPortModel\";\nimport { DiagramEngine } from \"@projectstorm/react-diagrams\";\nimport { PropertyTable } from \"../../PropertyTable/PropertyTable\";\nimport { DefaultPortModel } from \"../../../infrastructure/models/DefaultPortModel\";\nimport { ArrowLinkModel } from \"../../../infrastructure/models/ArrowLinkModel\";\nimport { Toolkit } from \"../../../infrastructure/Toolkit\";\nimport styled from \"@emotion/styled\";\n\nnamespace S {\n  export const GridContainer = styled.div`\n    display: grid;\n    grid-template-columns: auto auto auto;\n  `;\n\n  export const GridItem = styled.div`\n    background-color: rgba(255, 255, 255, 0.274);\n    padding: 10px;\n    text-align: center;\n  `;\n}\nclass Props {\n  isOpen: boolean;\n  link: DefaultLinkModel;\n  update: () => void;\n  diagramEngine: DiagramEngine;\n  isLogic: boolean;\n}\nexport const RelationPopup = (props: Props) => {\n  const [left, setLeft] = useState(\"1, N\");\n\n  const [right, setRight] = useState(\"1, N\");\n\n  const [relationAtributes, setRelationAtributes] = useState(\"\");\n  const [relationNameOnly, setRelationNameOnly] = useState(\"relation name\");\n\n\n  React.useEffect(() => {\n    let leftLabel =\n      props.link &&\n      props.link.getLabels().length > 2 &&\n      (props.link.getLabels()[0] as DefaultLabelModel).getOptions().label;\n    let relLabel =\n      props.link &&\n      props.link.getLabels().length > 2 &&\n      (props.link.getLabels()[1] as DefaultLabelModel).getOptions().label;\n    let rightLabel =\n      props.link &&\n      props.link.getLabels().length > 2 &&\n      (props.link.getLabels()[2] as DefaultLabelModel).getOptions().label;\n\n    setLeft(leftLabel ? leftLabel : \"1, N\");\n\n    setRight(rightLabel ? rightLabel : \"1, N\");\n  }, [props.link]);\n\n  let update = () => {\n    let x = handleRelationNameChenge();\n    let labels = props.link.getLabels() as DefaultLabelModel[];\n    labels[0].getOptions().label = left;\n    labels[2].getOptions().label = right;\n    labels[1].getOptions().label = relationNameOnly + x;\n\n    props.link.relName = relationNameOnly;\n\n\n    let points = props.link.getPoints();\n    for (let index = 1; index < points.length - 1; index++) {\n      const element = points[index];\n      element.remove();\n    }\n\n    setRelationAtributes(x);\n    props.update();\n  };\n\n  const handleRelationNameChenge = () => {\n    console.log(props.link.relName);\n\n    let relationAtributes = props.link.properties !== null && props.link.properties.getPorts() as {[s: string]: DefaultPortModel};\n    let attString = '';\n\n    if(Object.keys(relationAtributes).length > 0) {\n      Object.keys(relationAtributes).map(id => attString += `${relationAtributes[id].label} ${relationAtributes[id].propertyType} \\n`);\n      \n      const newRelName = '\\n' + attString;\n      return newRelName;\n    }\n      else {\n        return '';\n      }\n\n\n  }\n\n  const sourcePort =\n    props.link &&\n    props.link.getSourcePort() &&\n    (props.link.getSourcePort().getParent() as DefaultNodeModel);\n  const targetPort =\n    props.link &&\n    props.link.getTargetPort() &&\n    (props.link.getTargetPort().getParent() as DefaultNodeModel);\n\n  const remove = () => {\n    const sourceP = props.link && props.link.getSourcePort();\n    const targetP = props.link && props.link.getTargetPort();\n    sourceP.removeLink(props.link);\n    targetP.removeLink(props.link);\n\n    props.diagramEngine.getModel().removeLink(props.link);\n\n    if (props.isLogic) {\n      let thisParent = props.link\n        .getTargetPort()\n        .getParent() as DefaultNodeModel;\n      let portNode = props.link.getSourcePort().getParent() as DefaultNodeModel;\n\n      let portNodePorts = portNode.getPorts() as {\n        [s: string]: AdvancedPortModel;\n      };\n      let thisParentPorts = thisParent.getPorts() as {\n        [s: string]: AdvancedPortModel;\n      };\n\n      let czyMaPortZPKjakoFk = Object.keys(thisParentPorts).filter(\n        (id) => thisParentPorts[id].fkPortId === portNode.getOptions().id\n      )[0];\n      let czyMaPortZPKjakoFk2 = Object.keys(portNodePorts).filter(\n        (id) => portNodePorts[id].fkPortId === thisParent.getOptions().id\n      )[0];\n\n      if (czyMaPortZPKjakoFk) {\n        thisParent.removePort(thisParentPorts[czyMaPortZPKjakoFk]);\n      } else {\n        portNode.removePort(portNodePorts[czyMaPortZPKjakoFk2]);\n      }\n    }\n\n    props.update();\n  };\n\n  const options = (\n    <>\n      <option value=\"0, N\">0, N</option>\n      <option value=\"1, N\">1, N</option>\n      <option value=\"0, 1\">0, 1</option>\n      <option value=\"1, 1\">1, 1</option>\n      <option value=\"N, N\">N, N</option>\n    </>\n  );\n\n  const renderOptionPicker = (side: string) => {\n    return (\n      // <div className=\"grid-item\">\n      <S.GridItem>\n\n        <select\n          className=\"darkSelect\"\n          onChange={(event) =>\n            side === \"left\"\n              ? setLeft(event.target.value)\n              : setRight(event.target.value)\n          }\n          value={side === \"left\" ? left : right}\n        >\n          {options}\n        </select>\n      </S.GridItem>\n      // </div>\n    );\n  };\n\n  const reverseLink = () => {\n    let thisParent = props.link.getTargetPort().getParent() as DefaultNodeModel;\n    let portNode = props.link.getSourcePort().getParent() as DefaultNodeModel;\n\n    let portNodePorts = portNode.getPorts() as {\n      [s: string]: DefaultPortModel;\n    };\n    let thisParentPorts = thisParent.getPorts() as {\n      [s: string]: DefaultPortModel;\n    };\n\n    // let portNodePorts = portNode.getPorts() as {[s: string]: LogicPort};\n    // let thisParentPorts = thisParent.getPorts() as {[s: string]: LogicPort};\n\n    let czyMaPortZPKjakoFk = Object.keys(thisParentPorts).filter(\n      (id) => thisParentPorts[id].fkPortId === portNode.getOptions().id\n    )[0];\n    let czyMaPortZPKjakoFk2 = Object.keys(portNodePorts).filter(\n      (id) => portNodePorts[id].fkPortId === thisParent.getOptions().id\n    )[0];\n\n    if (czyMaPortZPKjakoFk) {\n      thisParent.removePort(thisParentPorts[czyMaPortZPKjakoFk]);\n      let pk = Object.keys(thisParentPorts).filter(\n        (id) => thisParentPorts[id].isPrimaryKey\n      )[0];\n      portNode.addPort(\n        new AdvancedPortModel(\n          // true,\n          thisParent.getOptions().name + thisParentPorts[pk].getOptions().name,\n          false,\n          false,\n          false,\n          true,\n          false,\n          true,\n          true,\n          \"INT\",\n          Toolkit.UID(),\n          thisParent.getOptions().id\n        )\n      );\n    } else {\n      portNode.removePort(portNodePorts[czyMaPortZPKjakoFk2]);\n\n      let pk = Object.keys(portNodePorts).filter(\n        (id) => portNodePorts[id].isPrimaryKey\n      )[0];\n      portNode.addPort(\n        new AdvancedPortModel(\n          // true,\n\n          portNode.getOptions().name + portNodePorts[pk].getOptions().name,\n          false,\n          false,\n          false,\n          true,\n          false,\n          true,\n          true,\n          \"INT\",\n          Toolkit.UID(),\n          portNode.getOptions().id\n        )\n      );\n    }\n\n    let newSourceP = props.link.getTargetPort();\n    let newTargetP = props.link.getSourcePort();\n    let model = props.diagramEngine.getModel();\n\n    model.removeLink(props.link);\n\n    let link = new ArrowLinkModel({ type: \"arrow\" });\n\n    link.setSourcePort(newSourceP);\n    link.setTargetPort(newTargetP);\n    model.addLink(link);\n\n    props.update();\n  };\n\n  if (props.isLogic) {\n    return (\n      <Popup modal closeOnDocumentClick open={props.isOpen} closeOnEscape>\n        <>\n          <S.GridItem>\n            <button onClick={remove}>Remove</button>\n          </S.GridItem>\n          <S.GridItem>\n            <button onClick={reverseLink}>Reverse</button>\n          </S.GridItem>\n        </>\n      </Popup>\n    );\n  } else\n    return (\n      <Popup modal closeOnDocumentClick open={props.isOpen} closeOnEscape onClose={props.update}>\n        <>\n          <S.GridContainer>\n            <S.GridItem>\n\n              <p>{sourcePort && sourcePort.getOptions().name}</p>\n            </S.GridItem>\n\n            <S.GridItem>\n              <input\n                type=\"text\"\n                defaultValue={relationNameOnly}\n                onChange={(event) => setRelationNameOnly(event.target.value)}\n              ></input>\n            </S.GridItem>\n            <S.GridItem>\n\n              <p>{targetPort && targetPort.getOptions().name}</p>\n            </S.GridItem>\n            {renderOptionPicker(\"left\")}\n            <S.GridItem>\n\n              <button onClick={update}>SAVE</button>\n            </S.GridItem>\n            {renderOptionPicker(\"right\")}\n            <S.GridItem></S.GridItem>\n            <S.GridItem>\n\n              <button onClick={remove}>Remove</button>\n            </S.GridItem>\n            </S.GridContainer>\n          {props.link && (\n            <div>\n              <h3 style={{ margin: 0 }}>Atributes:</h3>\n              <PropertyTable\n              relationName={relationNameOnly}\n                update={update}\n                relView={true}\n                link={props.link}\n                diagramEngine={props.diagramEngine}\n                selectedItem={props.link.properties}\n                isLogic={props.isLogic}\n              />\n            </div>\n          )}\n        </>\n      </Popup>\n    );\n};\n","import * as React from \"react\";\nimport * as _ from \"lodash\";\nimport { TrayWidget } from \"./TrayWidget\";\nimport { TrayItemWidget } from \"./TrayItemWidget\";\nimport { PointModel } from \"@projectstorm/react-diagrams\";\nimport { CanvasWidget } from \"@projectstorm/react-canvas-core\";\nimport styled from \"@emotion/styled\";\nimport { DemoCanvasWidget } from \"../helpers/DemoCanvasWidget\";\nimport { Application } from \"./Application\";\nimport { AdvancedPortModel } from \"../infrastructure/models/ArrowPortModel\";\nimport { TrayItemDiv } from \"./TrayItemDiv\";\nimport {\n  NodeProperties,\n  useForceUpdate,\n} from \"./NodeProperties/NodeProperties\";\nimport { DefaultLinkModel } from \"../infrastructure/models/DefaultLinkModel\";\nimport { GenerationHandler } from \"../handlers/GenerationHandler\";\nimport { LoadFileHandler } from \"../handlers/LoadFileHandler\";\nimport { SaveToFilePopup } from \"./popups/SaveToFilePopup/SaveToFilePopup\";\nimport { SaveToJpegPopup } from \"./popups/SaveToJpegPopup/SaveToJpegPopup\";\nimport { RelationPopup } from \"./popups/RealtionPopup/RelationPopup\";\nimport { DefaultPortModel } from \"../infrastructure/models/DefaultPortModel\";\nimport { DefaultLabelModel } from \"../infrastructure/models/DefaultLabelModel\";\nimport { DefaultNodeModel } from \"../infrastructure/models/DefaultNodeModel\";\n\nexport interface BodyWidgetProps {\n  app: Application;\n}\nnamespace S {\n  export const Body = styled.div`\n    flex-grow: 1;\n    display: flex;\n    flex-direction: column;\n    min-height: 100%;\n  `;\n\n  export const Header = styled.div`\n    display: flex;\n    background: rgb(30, 30, 30);\n    flex-grow: 0;\n    flex-shrink: 0;\n    color: white;\n    font-family: Helvetica, Arial, sans-serif;\n    padding: 12px;\n    align-items: center;\n  `;\n\n  export const Content = styled.div`\n    display: flex;\n    flex-grow: 1;\n  `;\n\n  export const Layer = styled.div`\n    position: relative;\n    flex-grow: 1;\n  `;\n\n  export const DropdownIcon = styled.span`\n    display: inline-block;\n    padding-top: 3px;\n    padding-right: 5px;\n  `;\n}\n\nexport const BodyWidget = (props: BodyWidgetProps) => {\n  const [showDialog, setShowDialog] = React.useState(false);\n  const [showRelationDialog, setShowRelationDialog] = React.useState(false);\n  const [showLoadFileDialog, setShowLoadFileDialog] = React.useState(false);\n  const [showSaveFileDialog, setSaveFileDialog] = React.useState(false);\n  const [showSaveJPEGDialog, setSaveJPEGDialog] = React.useState(false);\n  const [showSaveOptions, setSaveOptions] = React.useState(false);\n\n  const [selectedNode, setSelectedNode] = React.useState(null);\n  const [selectedLink, setSelectedLink] = React.useState(null);\n\n  const [isUml, setIsUml] = React.useState(true);\n\n  const [isLogicModel, setIsLogicModel] = React.useState(false);\n\n  const forceUpdate = useForceUpdate();\n\n  React.useEffect(() => {\n    setSelectedNode(null);\n    setSelectedLink(null);\n  }, []);\n\n  const changeRelation = () => {\n    let links = props.app.getDiagramEngine().getModel().getLinks();\n    links.forEach((link) => {\n      let temp = (link.getLabels()[0] as DefaultLabelModel)\n        .getOptions()\n        .label.substring(0, 1);\n      let temp2 = (link.getLabels()[2] as DefaultLabelModel)\n        .getOptions()\n        .label.substring(0, 1);\n\n      (link.getLabels()[0] as DefaultLabelModel).getOptions().label =\n        temp2 +\n        (link.getLabels()[0] as DefaultLabelModel)\n          .getOptions()\n          .label.substring(1);\n      (link.getLabels()[2] as DefaultLabelModel).getOptions().label =\n        temp +\n        (link.getLabels()[2] as DefaultLabelModel)\n          .getOptions()\n          .label.substring(1);\n    });\n  };\n\n  const refreshPopups = () => {\n    setSelectedLink(null);\n    setSelectedNode(null);\n\n    setShowDialog(false);\n    setSaveFileDialog(false);\n    setSaveJPEGDialog(false);\n    setSaveOptions(false);\n    setShowLoadFileDialog(false);\n    setShowRelationDialog(false);\n  };\n\n  const getDiagramLogicModel = () => {\n    if(isLogicModel) {\n      return props.app.getDiagramEngine().getModel().serialize();\n    }\n    else {\n      props.app.setLogicModel();\n\n      setIsLogicModel(true);\n      return props.app.getDiagramEngine().getModel().serialize();\n    }\n  }\n\n  return (\n    <S.Body>\n      <S.Header>DB Diagram Scripter</S.Header>\n      <S.Content>\n        <TrayWidget>\n          <TrayItemWidget\n            model={{ type: \"default\" }}\n            name={isLogicModel ? \"Relation\" : \"Entity\"}\n            color=\"rgb(0,192,255)\"\n          />\n          <TrayItemWidget\n            model={{ type: \"label\" }}\n            name=\"Label\"\n            color=\"rgb(192,255,0)\"\n          />\n\n          <TrayItemDiv\n            name=\"Load Diagram\"\n            color=\"rgb(255,123,0)\"\n            marginTop=\"75px\"\n            onClick={() => {\n              setShowLoadFileDialog(true);\n              setSelectedNode(null);\n            }}\n          />\n\n          <TrayItemDiv\n            color=\"rgb(255,123,0)\"\n            onClick={() => {\n              setSaveOptions(!showSaveOptions);\n              setSelectedNode(null);\n            }}\n          >\n            <>\n              Save\n              <S.DropdownIcon\n                className={`mi ${\n                  !showSaveOptions ? \"mi-ArrowDown8\" : \"mi-ArrowUp8\"\n                }`}\n              />\n            </>\n          </TrayItemDiv>\n\n          {showSaveOptions && (\n            <TrayItemDiv\n              name=\"File\"\n              color=\"rgb(255,123,0)\"\n              onClick={() => {\n                setSaveFileDialog(true);\n                setSelectedNode(null);\n              }}\n            />\n          )}\n          {showSaveOptions && (\n            <TrayItemDiv\n              name=\"JPEG\"\n              color=\"rgb(255,123,0)\"\n              onClick={() => {\n                setSaveJPEGDialog(true);\n                setSelectedNode(null);\n              }}\n            />\n          )}\n\n          <TrayItemDiv\n            isSelected={!isLogicModel}\n            name=\"Conceptual View\"\n            color=\"rgb(0,50,100)\"\n            marginTop=\"75px\"\n            onClick={() => {\n              if (isLogicModel) {\n                props.app.setConceptualModel();\n                setIsLogicModel(false);\n              }\n            }}\n          />\n\n          <TrayItemDiv\n            isSelected={isLogicModel}\n            name=\"Logical View\"\n            color=\"rgb(0,50,100)\"\n            onClick={() => {\n              if (!isLogicModel) {\n                props.app.setLogicModel();\n                setIsLogicModel(true);\n              }\n            }}\n          />\n\n          <TrayItemDiv\n            isDisabled={isLogicModel}\n            isSelected={isUml}\n            name=\"UML\"\n            color=\"rgb(152,50,100)\"\n            marginTop=\"75px\"\n            onClick={() => {\n              if (!isLogicModel && !isUml) {\n                changeRelation();\n                setIsUml(true);\n              }\n            }}\n          />\n\n          <TrayItemDiv\n            isDisabled={isLogicModel}\n            isSelected={!isUml}\n            name=\"Chen\"\n            color=\"rgb(152,50,100)\"\n            onClick={() => {\n              if (!isLogicModel && isUml) {\n                changeRelation();\n                setIsUml(false);\n              }\n            }}\n          />\n\n          <TrayItemDiv\n            name=\"Create DB Code\"\n            color=\"rgb(255,0,0)\"\n            marginTop=\"60px\"\n            onClick={() => {\n              setShowDialog(true);\n              setSelectedNode(null);\n            }}\n          />\n        </TrayWidget>\n        <S.Layer\n          id=\"diagram-layer\"\n          onDrop={(event) => {\n            var data = JSON.parse(\n              event.dataTransfer.getData(\"storm-diagram-node\")\n            );\n\n            let allNodes = props.app\n              .getDiagramEngine()\n              .getModel()\n              .getNodes() as DefaultNodeModel[];\n\n            let names = allNodes.map((node) =>\n              node.getOptions().name.toLowerCase().trim()\n            );\n\n            var nodesCount = _.keys(\n              props.app.getDiagramEngine().getModel().getNodes()\n            ).length;\n\n            let newNodeName = names.includes(\n              `Entity${nodesCount + 1}`.toLowerCase().trim()\n            )\n              ? `Entity${nodesCount + 1}_${nodesCount + 1}`\n              : `Entity${nodesCount + 1}`;\n\n            var node: DefaultNodeModel;\n            if (data.type === \"default\") {\n              node = new DefaultNodeModel(false, newNodeName, \"rgb(0,192,255)\");\n\n              if (isLogicModel) {\n                node.addPort(\n                  new AdvancedPortModel(\n                    \"Id\",\n                    false,\n                    true,\n                    false,\n                    false,\n                    true,\n                    true,\n                    true,\n                    \"INT\"\n                  )\n                );\n                node.addPort(\n                  new AdvancedPortModel(\n                    \"\",\n                    true,\n                    false,\n                    false,\n                    false,\n                    false,\n                    false,\n                    false,\n                    \"INT\"\n                  )\n                );\n                node.addPort(\n                  new AdvancedPortModel(\n                    \"1\",\n                    true,\n                    false,\n                    false,\n                    false,\n                    false,\n                    false,\n                    false,\n                    \"INT\"\n                  )\n                );\n              } else {\n                node.addPort(\n                  new DefaultPortModel(\n                    isLogicModel,\n                    \"Id\",\n                    false,\n                    true,\n                    false,\n                    false,\n                    true,\n                    true,\n                    true,\n                    \"INT\",\n                    props.app.getDiagramEngine()\n                  )\n                );\n                node.addPort(\n                  new DefaultPortModel(\n                    isLogicModel,\n                    \"\",\n                    true,\n                    false,\n                    false,\n                    false,\n                    false,\n                    false,\n                    false,\n                    \"INT\",\n                    props.app.getDiagramEngine()\n                  )\n                );\n                node.addPort(\n                  new DefaultPortModel(\n                    isLogicModel,\n                    \"1\",\n                    true,\n                    false,\n                    false,\n                    false,\n                    false,\n                    false,\n                    false,\n                    \"INT\",\n                    props.app.getDiagramEngine()\n                  )\n                );\n              }\n            } else {\n              node = new DefaultNodeModel(true, \"Label \", \"rgb(192,255,0)\");\n            }\n\n            var point = props.app\n              .getDiagramEngine()\n              .getRelativeMousePoint(event);\n            node.setPosition(point);\n            props.app.getDiagramEngine().getModel().addNode(node);\n\n            forceUpdate();\n          }}\n          onDragOver={(event) => {\n            event.preventDefault();\n          }}\n          onClick={(event) => {\n            event.preventDefault();\n            if (\n              event.ctrlKey &&\n              props.app\n                .getDiagramEngine()\n                .getModel()\n                .getSelectedEntities()[0] instanceof PointModel\n            ) {\n              const pointToRemove = props.app\n                .getDiagramEngine()\n                .getModel()\n                .getSelectedEntities()[0] as PointModel;\n\n              pointToRemove.remove();\n              forceUpdate();\n            }\n            refreshPopups();\n          }}\n          onDoubleClick={(event) => {\n            event.preventDefault();\n            if (\n              props.app\n                .getDiagramEngine()\n                .getModel()\n                .getSelectedEntities()[0] instanceof PointModel\n            ) {\n              setSelectedLink(\n                props.app\n                  .getDiagramEngine()\n                  .getModel()\n                  .getSelectedEntities()[0]\n                  .getParent() as DefaultLinkModel\n              );\n              setShowRelationDialog(true);\n              setSelectedNode(null);\n            } else if (\n              props.app\n                .getDiagramEngine()\n                .getModel()\n                .getSelectedEntities()[0] instanceof DefaultNodeModel\n            ) {\n              refreshPopups();\n              let selectedNode = props.app\n                .getDiagramEngine()\n                .getModel()\n                .getSelectedEntities()[0] as DefaultNodeModel;\n\n              setSelectedNode(selectedNode);\n            }\n          }}\n        >\n          <DemoCanvasWidget>\n            <CanvasWidget\n              className=\"srd-demo-canvas\"\n              engine={props.app.getDiagramEngine()}\n            />\n          </DemoCanvasWidget>\n        </S.Layer>\n        {selectedNode != null ? (\n          <NodeProperties\n            update={refreshPopups}\n\n            isLogic={isLogicModel}\n            selectedItem={selectedNode}\n            diagramEngine={props.app.getDiagramEngine()}\n          />\n        ) : null}\n        <GenerationHandler\n          isUml={isUml}\n          isLogic={isLogicModel}\n          update={refreshPopups}\n          isOpen={showDialog}\n          serializeDiagram={() =>  getDiagramLogicModel()}\n          \n        />\n        <LoadFileHandler\n          update={refreshPopups}\n          isOpen={showLoadFileDialog}\n          app={props.app}\n          setIsUml={setIsUml}\n          setIsLogic={setIsLogicModel}\n        />\n        <SaveToFilePopup\n          update={refreshPopups}\n          diagramModel={props.app.getActiveDiagram()}\n          secondModel={props.app.getLogicDiagram()}\n          isOpen={showSaveFileDialog}\n          isUml={isUml}\n        />\n        <SaveToJpegPopup\n          update={refreshPopups}\n          diagramModel={props.app.getActiveDiagram()}\n          isOpen={showSaveJPEGDialog}\n        />\n\n        <RelationPopup\n          diagramEngine={props.app.getDiagramEngine()}\n          update={refreshPopups}\n          isOpen={showRelationDialog}\n          link={selectedLink}\n          isLogic={isLogicModel}\n        />\n      </S.Content>\n    </S.Body>\n  );\n};\n","import {\n  DefaultLinkWidget,\n  PointModel,\n  LinkWidget,\n} from \"@projectstorm/react-diagrams\";\nimport React from \"react\";\n\nconst CustomLinkArrowWidget = (props: any) => {\n  const { point, previousPoint } = props;\n  const [, setSelected] = React.useState(false);\n  const angle =\n    90 +\n    (Math.atan2(\n      point.getPosition().y - previousPoint.getPosition().y,\n      point.getPosition().x - previousPoint.getPosition().x\n    ) *\n      180) /\n      Math.PI;\n\n  //translate(50, -10),\n  return (\n    <g\n      className=\"arrow\"\n      transform={\n        \"translate(\" +\n        point.getPosition().x +\n        \", \" +\n        point.getPosition().y +\n        \")\"\n      }\n    >\n      <g style={{ transform: \"rotate(\" + angle + \"deg)\" }}>\n        <g transform={\"translate(0, -3)\"}>\n          <polygon\n            points=\"0,10 8,30 -8,30\"\n            fill={props.color}\n            onMouseLeave={() => setSelected(false)}\n            onMouseEnter={() => setSelected(true)}\n            data-id={point.getID()}\n            data-linkid={point.getLink().getID()}\n          ></polygon>\n        </g>\n      </g>\n    </g>\n  );\n};\n\nexport class ArrowLinkWidget extends DefaultLinkWidget {\n  generateArrow(point: PointModel, previousPoint: PointModel): JSX.Element {\n    return (\n      <CustomLinkArrowWidget\n        key={point.getID()}\n        point={point as any}\n        previousPoint={previousPoint as any}\n        colorSelected={this.props.link.getOptions().selectedColor}\n        color={this.props.link.getOptions().color}\n      />\n    );\n  }\n\n  render() {\n    //ensure id is present for all points on the path\n    var points = this.props.link.getPoints();\n    var paths = [];\n    this.refPaths = [];\n\n    //draw the multiple anchors and complex line instead\n    for (let j = 0; j < points.length - 1; j++) {\n      paths.push(\n        this.generateLink(\n          LinkWidget.generateLinePath(points[j], points[j + 1]),\n          {\n            \"data-linkid\": this.props.link.getID(),\n            \"data-point\": j,\n            onMouseDown: (event: MouseEvent) => {\n              this.addPointToLink(event as any, j + 1);\n            },\n          },\n          j\n        )\n      );\n    }\n\n    paths.push(this.generateArrow(points[0], points[1]));\n\n    \t//render the circles\n\t\tfor (let i = 1; i < points.length - 1; i++) {\n\t\t\tpaths.push(this.generatePoint(points[i]));\n\t\t}\n\n\t\t\tpaths.push(this.generatePoint(points[points.length - 1]));\n\n\t\treturn <g data-default-link-test={this.props.link.getOptions().testName}>{paths}</g>;\n  }\n}\n","import React from \"react\";\nimport { DefaultLinkFactory } from \"@projectstorm/react-diagrams\";\n\nimport { ArrowLinkModel } from \"../models/ArrowLinkModel\";\nimport { ArrowLinkWidget } from \"../widgets/ArrowLinkWidget\";\n\nexport class ArrowLinkFactory extends DefaultLinkFactory {\n  constructor() {\n    super(\"arrow\");\n  }\n\n  generateModel(): ArrowLinkModel {\n    return new ArrowLinkModel();\n  }\n\n  generateReactWidget(event: any): JSX.Element {\n    return <ArrowLinkWidget link={event.model} diagramEngine={this.engine} />;\n  }\n}\n","import * as React from \"react\";\nimport { DiagramEngine, PortWidget } from \"@projectstorm/react-diagrams-core\";\nimport { DefaultPortModel } from \"../models/DefaultPortModel\";\nimport styled from \"@emotion/styled\";\n\nexport interface DefaultPortLabelProps {\n  port: DefaultPortModel;\n  engine: DiagramEngine;\n}\n\nnamespace S {\n  export const PortLabel = styled.div`\n  display: flex;\n  margin-top: 1px;\n  align-items: center;\n`;\n\n  export const Label = styled.div`\n  flex-grow: 1;\n`;\n\n  export const Port = styled.div`\n  width: 15px;\n  height: 15px;\n  background: rgba(255, 255, 255, 0.1);\n\n  &:hover {\n    background: rgb(192, 255, 0);\n  }\n  `;\n\n  export const PrimaryKeyIcon = styled.span`\n    padding:  3px 5px;\n    color: black;\n    font-weight: 800;\n  `;\n\n  export const PortContainer = styled.div`\n    display: flex;\n    justify-content: flex-end;\n  `;\n\n  export const PortItem = styled.div`\n    display: inline-block;\n    margin-right: 5px;\n  `;\n\n  export const HiddenPort = styled(PortItem)`\n    display: none;\n  `;\n\n  export const NamedPort = styled(PortItem)`\n   margin-right: 5px;\n  `;\n}\n\nexport const DefaultPortLabel = (props: DefaultPortLabelProps) => {\n  let { port, engine } = props;\n\n  if (!port.isNamePort) {\n    port.setLocked();\n  }\n\n  let portJSX: JSX.Element = (\n    <PortWidget engine={engine} port={port}>\n      <S.Port />\n    </PortWidget>\n  );\n\n  const label: JSX.Element = (\n    <S.PortLabel>\n      <div>\n        {port.label}\n        {' '}\n        {port.propertyType}\n      </div>\n    </S.PortLabel>\n  );\n\n  const isPrimaryKey = port.isPrimaryKey &&\n    <S.PrimaryKeyIcon className=\"mi mi-Permissions\"></S.PrimaryKeyIcon>\n\n  if (port.isNamePort) {\n    return <S.NamedPort>{portJSX}</S.NamedPort>;\n  } else {\n    return (\n      <S.PortContainer>\n        <S.PortItem>{isPrimaryKey}</S.PortItem>\n        <S.PortItem>{label}</S.PortItem>\n        <S.HiddenPort>{portJSX}</S.HiddenPort>\n      </S.PortContainer>\n    );\n  }\n}\n","import * as React from \"react\";\nimport * as _ from \"lodash\";\nimport { DiagramEngine } from \"@projectstorm/react-diagrams-core\";\nimport { DefaultNodeModel } from \"../models/DefaultNodeModel\";\nimport { DefaultPortLabel } from \"../widgets/DefaultPortLabelWidget\";\nimport styled from \"@emotion/styled\";\nimport { DefaultPortModel } from \"../models/DefaultPortModel\";\n\n\nnamespace S {\n  export const Node = styled.div<{ background: string; selected: boolean }>`\n    background-color: ${(p) => p.background};\n    border-radius: 5px;\n    font-family: sans-serif;\n    color: white;\n    border: solid 2px black;\n    overflow: visible;\n    font-size: 11px;\n    border: solid 2px ${(p) => (p.selected ? \"rgb(0,192,255)\" : \"black\")};\n  `;\n\n  export const Title = styled.div`\n    background: rgba(0, 0, 0, 0.3);\n    display: flex;\n    white-space: nowrap;\n\n    justify-items: center;\n  `;\n\n  export const TitleName = styled.div`\n    flex-grow: 1;\n    padding: 5px 5px;\n  `;\n\n  export const Ports = styled.div`\n    display: flex;\n    background-image: linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.2));\n  `;\n\n  export const PortsContainer = styled.div`\n    flex-grow: 1;\n    display: flex;\n    flex-direction: column;\n\n    &:first-of-type {\n      margin-right: 10px;\n    }\n\n    &:only-child {\n      margin-right: 0px;\n    }\n  `;\n\n  export const NamedPortLeft = styled.div`\n    margin-top: 5px;\n    margin-left: 5px\n  `;\n\n  export const NamedPortRight = styled.div`\n    margin-top: 5px\n  `;\n}\n\n\nexport interface DefaultNodeProps {\n  node: DefaultNodeModel;\n  engine: DiagramEngine;\n}\n\nexport const DefaultNodeWidget = (props: DefaultNodeProps) => {\n  const generatePort = (port) => {\n    return (\n      <DefaultPortLabel\n        engine={props.engine}\n        port={port}\n        key={port.options.id}\n      />\n    );\n  };\n\n    let { node } = props;\n    let ports = node.getPorts() as { [s: string]: DefaultPortModel };\n    let portsJSX = _.map(ports, generatePort);\n    let namedPortsJSX = portsJSX.filter((p) => p.props.port.isNamePort);\n    let notNamedPortsJSX = portsJSX.filter((p) => !p.props.port.isNamePort);\n\n    return (\n      <S.Node\n        data-default-node-name={node.getOptions().name}\n        selected={node.isSelected()}\n        background={node.getOptions().color}\n      >\n        <S.Title>\n          {namedPortsJSX.length !== 0 && (\n            <S.NamedPortLeft>\n              {generatePort(namedPortsJSX[1].props.port)}\n            </S.NamedPortLeft>\n          )}\n\n          <S.TitleName>{node.getOptions().name}</S.TitleName>\n\n          {namedPortsJSX.length !== 0 && (\n            <S.NamedPortRight>\n              {generatePort(namedPortsJSX[0].props.port)}\n            </S.NamedPortRight>\n          )}\n        </S.Title>\n        <S.Ports>\n          <S.PortsContainer>{notNamedPortsJSX}</S.PortsContainer>\n        </S.Ports>\n      </S.Node>\n    );\n}\n","import * as React from \"react\";\nimport { DefaultNodeModel } from \"../models/DefaultNodeModel\";\nimport { DefaultNodeWidget } from \"../widgets/DefaultNodeWidget\";\nimport { AbstractReactFactory } from \"@projectstorm/react-canvas-core\";\nimport { DiagramEngine } from \"@projectstorm/react-diagrams-core\";\n\nexport class DefaultNodeFactory extends AbstractReactFactory<\n  DefaultNodeModel,\n  DiagramEngine\n> {\n  constructor() {\n    super(\"default\");\n  }\n\n  generateReactWidget(event): JSX.Element {\n    return <DefaultNodeWidget engine={this.engine} node={event.model} />;\n  }\n\n  generateModel(event): DefaultNodeModel {\n    return new DefaultNodeModel(false, \"Entity\", \"rgb(0,192,255)\");\n  }\n}\n","import * as React from \"react\";\nimport { DefaultLabelModel } from \"../models/DefaultLabelModel\";\nimport styled from \"@emotion/styled\";\n\nexport interface DefaultLabelWidgetProps {\n  model: DefaultLabelModel;\n}\n\nnamespace S {\n  export const Label = styled.div`\n  background: rgba(0, 0, 0, 0.8);\n  border-radius: 5px;\n  color: white;\n  font-size: 12px;\n  padding: 4px 8px;\n  font-family: sans-serif;\n  user-select: none;\n\n  max-width: 200px;\n  white-space: pre-wrap;\n`;\n}\n\n\nexport class DefaultLabelWidget extends React.Component<\n  DefaultLabelWidgetProps\n> {\n  render() {\n    return <S.Label>{this.props.model.getOptions().label}</S.Label>;\n  }\n}\n","import * as React from \"react\";\nimport { DefaultLabelModel } from \"../models/DefaultLabelModel\";\nimport { DefaultLabelWidget } from \"../widgets/DefaultLabelWidget\";\nimport { AbstractReactFactory } from \"@projectstorm/react-canvas-core\";\nimport { DiagramEngine } from \"@projectstorm/react-diagrams-core\";\n\nexport class DefaultLabelFactory extends AbstractReactFactory<\n  DefaultLabelModel,\n  DiagramEngine\n> {\n  constructor() {\n    super(\"default\");\n  }\n\n  generateReactWidget(event): JSX.Element {\n    return <DefaultLabelWidget model={event.model} />;\n  }\n\n  generateModel(event): DefaultLabelModel {\n    return new DefaultLabelModel();\n  }\n}\n","import { DefaultPortModel } from \"../models/DefaultPortModel\";\nimport { AbstractModelFactory } from \"@projectstorm/react-canvas-core\";\nimport { DiagramEngine } from \"@projectstorm/react-diagrams-core\";\n\nexport class DefaultPortFactory extends AbstractModelFactory<\n  DefaultPortModel,\n  DiagramEngine\n> {\n  constructor() {\n    super(\"default\");\n  }\n\n  generateModel(): DefaultPortModel {\n    return new DefaultPortModel(false, \"port\", true, false);\n  }\n}\n","import * as React from \"react\";\nimport { PointModel } from \"@projectstorm/react-diagrams-core\";\nimport styled from \"@emotion/styled\";\n\nexport interface DefaultLinkPointWidgetProps {\n  point: PointModel;\n  color?: string;\n  colorSelected: string;\n}\n\nexport interface DefaultLinkPointWidgetState {\n  selected: boolean;\n}\n\nexport const PointTop = styled.circle`\n  pointer-events: all;\n`;\n\nexport class DefaultLinkPointWidget extends React.Component<\n  DefaultLinkPointWidgetProps,\n  DefaultLinkPointWidgetState\n> {\n  constructor(props) {\n    super(props);\n    this.state = {\n      selected: false,\n    };\n  }\n\n  render() {\n    const { point } = this.props;\n    return (\n      <g>\n        <circle\n          cx={point.getPosition().x}\n          cy={point.getPosition().y}\n          r={5}\n          fill={\n            this.state.selected || this.props.point.isSelected()\n              ? this.props.colorSelected\n              : this.props.color\n          }\n        />\n        <PointTop\n          className=\"point\"\n          onMouseLeave={() => {\n            this.setState({ selected: false });\n          }}\n          onMouseEnter={() => {\n            this.setState({ selected: true });\n          }}\n          data-id={point.getID()}\n          data-linkid={point.getLink().getID()}\n          cx={point.getPosition().x}\n          cy={point.getPosition().y}\n          r={15}\n          opacity={0.0}\n        />\n      </g>\n    );\n  }\n}\n","import * as React from \"react\";\nimport { DefaultLinkFactory } from \"../factories/DefaultLinkFactory\";\nimport { DiagramEngine } from \"@projectstorm/react-diagrams-core\";\nimport { DefaultLinkModel } from \"../models/DefaultLinkModel\";\n\nexport interface DefaultLinkSegmentWidgetProps {\n  path: string;\n  link: DefaultLinkModel;\n  selected: boolean;\n  forwardRef: React.RefObject<SVGPathElement>;\n  factory: DefaultLinkFactory;\n  diagramEngine: DiagramEngine;\n  onSelection: (selected: boolean) => any;\n  extras: object;\n}\n\nexport class DefaultLinkSegmentWidget extends React.Component<\n  DefaultLinkSegmentWidgetProps\n> {\n  render() {\n    const Bottom = React.cloneElement(\n      this.props.factory.generateLinkSegment(\n        this.props.link,\n        this.props.selected || this.props.link.isSelected(),\n        this.props.path\n      ),\n      {\n        ref: this.props.forwardRef,\n      }\n    );\n\n    const Top = React.cloneElement(Bottom, {\n      strokeLinecap: \"round\",\n      onMouseLeave: () => {\n        this.props.onSelection(false);\n      },\n      onMouseEnter: () => {\n        this.props.onSelection(true);\n      },\n      ...this.props.extras,\n      ref: null,\n      \"data-linkid\": this.props.link.getID(),\n      strokeOpacity: this.props.selected ? 0.1 : 0,\n      strokeWidth: 20,\n      fill: \"none\",\n      onContextMenu: (event) => {\n        if (!this.props.link.isLocked()) {\n          event && event.preventDefault();\n          this.props.link.remove();\n        }\n      },\n    });\n\n    return (\n      <g>\n        {Bottom}\n        {Top}\n      </g>\n    );\n  }\n}\n","import * as React from \"react\";\nimport {\n  DiagramEngine,\n  LinkWidget,\n  PointModel,\n} from \"@projectstorm/react-diagrams-core\";\nimport { DefaultLinkModel } from \"../models/DefaultLinkModel\";\nimport { DefaultLinkPointWidget } from \"./DefaultLinkPointWidget\";\nimport { DefaultLinkSegmentWidget } from \"./DefaultLinkSegmentWidget\";\nimport { MouseEvent } from \"react\";\n\nexport interface DefaultLinkProps {\n  link: DefaultLinkModel;\n  diagramEngine: DiagramEngine;\n  pointAdded?: (point: PointModel, event: MouseEvent) => any;\n}\n\nexport interface DefaultLinkState {\n  selected: boolean;\n}\n\nexport class DefaultLinkWidget extends React.Component<\n  DefaultLinkProps,\n  DefaultLinkState\n> {\n  refPaths: React.RefObject<SVGPathElement>[];\n\n  constructor(props: DefaultLinkProps) {\n    super(props);\n    this.refPaths = [];\n    this.state = {\n      selected: false,\n    };\n  }\n\n  componentDidUpdate(): void {\n    this.props.link.setRenderedPaths(\n      this.refPaths.map((ref) => {\n        return ref.current;\n      })\n    );\n  }\n\n  componentDidMount(): void {\n    this.props.link.setRenderedPaths(\n      this.refPaths.map((ref) => {\n        return ref.current;\n      })\n    );\n  }\n\n  componentWillUnmount(): void {\n    this.props.link.setRenderedPaths([]);\n  }\n\n  addPointToLink(event: MouseEvent, index: number) {\n    if (\n      !event.shiftKey &&\n      !this.props.link.isLocked() &&\n      this.props.link.getPoints().length - 1 <=\n        this.props.diagramEngine.getMaxNumberPointsPerLink()\n    ) {\n      const point = new PointModel({\n        link: this.props.link,\n        position: this.props.diagramEngine.getRelativeMousePoint(event),\n      });\n      this.props.link.addPoint(point, index);\n      event.persist();\n      event.stopPropagation();\n      this.forceUpdate(() => {\n        this.props.diagramEngine.getActionEventBus().fireAction({\n          event,\n          model: point,\n        });\n      });\n    }\n  }\n\n  generatePoint(point: PointModel): JSX.Element {\n    return (\n      <DefaultLinkPointWidget\n        key={point.getID()}\n        point={point as any}\n        colorSelected={this.props.link.getOptions().selectedColor}\n        color={this.props.link.getOptions().color}\n      />\n    );\n  }\n\n  generateLink(\n    path: string,\n    extraProps: any,\n    id: string | number\n  ): JSX.Element {\n    const ref = React.createRef<SVGPathElement>();\n    this.refPaths.push(ref);\n    return (\n      <DefaultLinkSegmentWidget\n        key={`link-${id}`}\n        path={path}\n        selected={this.state.selected}\n        diagramEngine={this.props.diagramEngine}\n        factory={this.props.diagramEngine.getFactoryForLink(this.props.link)}\n        link={this.props.link}\n        forwardRef={ref}\n        onSelection={(selected) => {\n          this.setState({ selected: selected });\n        }}\n        extras={extraProps}\n      />\n    );\n  }\n\n  render() {\n    //ensure id is present for all points on the path\n    var points = this.props.link.getPoints();\n    var paths = [];\n    this.refPaths = [];\n\n    if (points.length === 2) {\n      paths.push(\n        this.generateLink(\n          this.props.link.getSVGPath(),\n          {\n            onMouseDown: (event) => {\n              this.addPointToLink(event, 1);\n            },\n          },\n          \"0\"\n        )\n      );\n\n      // draw the link as dangeling\n      if (this.props.link.getTargetPort() == null) {\n        paths.push(this.generatePoint(points[1]));\n      }\n    } else {\n      //draw the multiple anchors and complex line instead\n      for (let j = 0; j < points.length - 1; j++) {\n        paths.push(\n          this.generateLink(\n            LinkWidget.generateLinePath(points[j], points[j + 1]),\n            {\n              \"data-linkid\": this.props.link.getID(),\n              \"data-point\": j,\n              onMouseDown: (event: MouseEvent) => {\n                this.addPointToLink(event, j + 1);\n              },\n            },\n            j\n          )\n        );\n      }\n\n      //render the circles\n      for (let i = 1; i < points.length - 1; i++) {\n        paths.push(this.generatePoint(points[i]));\n      }\n\n      if (this.props.link.getTargetPort() == null) {\n        paths.push(this.generatePoint(points[points.length - 1]));\n      }\n    }\n\n    return (\n      <g data-default-link-test={this.props.link.getOptions().testName}>\n        {paths}\n      </g>\n    );\n  }\n}\n","import * as React from \"react\";\nimport { DefaultLinkModel } from \"../models/DefaultLinkModel\";\nimport { DefaultLinkWidget } from \"../widgets/DefaultLinkWidget\";\nimport styled from \"@emotion/styled\";\nimport { css, keyframes } from \"@emotion/core\";\nimport { AbstractReactFactory } from \"@projectstorm/react-canvas-core\";\nimport { DiagramEngine } from \"@projectstorm/react-diagrams-core\";\n\nexport const Keyframes = keyframes`\n\t\tfrom {\n\t\t\tstroke-dashoffset: 24;\n\t\t}\n\t\tto {\n\t\t\tstroke-dashoffset: 0;\n\t\t}\n\t`;\n\nconst selected = css`\n  stroke-dasharray: 10, 2;\n  animation: ${Keyframes} 1s linear infinite;\n`;\n\nexport const Path = styled.path<{ selected: boolean }>`\n  ${(p) => p.selected && selected};\n  fill: none;\n  pointer-events: all;\n`;\n\nexport class DefaultLinkFactory<\n  Link extends DefaultLinkModel = DefaultLinkModel\n> extends AbstractReactFactory<Link, DiagramEngine> {\n  constructor(type = \"default\") {\n    super(type);\n  }\n\n  generateReactWidget(event): JSX.Element {\n    return <DefaultLinkWidget link={event.model} diagramEngine={this.engine} />;\n  }\n\n  generateModel(event): Link {\n    return new DefaultLinkModel() as Link;\n  }\n\n  generateLinkSegment(model: Link, selected: boolean, path: string) {\n    return (\n      <Path\n        selected={selected}\n        stroke={\n          selected ? model.getOptions().selectedColor : model.getOptions().color\n        }\n        strokeWidth={model.getOptions().width}\n        d={path}\n      />\n    );\n  }\n}\n","import * as React from \"react\";\nimport { DiagramEngine } from \"@projectstorm/react-diagrams-core\";\nimport { DefaultNodeModel } from \"../models/DefaultNodeModel\";\nimport styled from \"@emotion/styled\";\n\nnamespace S {\n  export const Node = styled.div<{ background: string; selected: boolean }>`\n  background-color: ${(p) => p.background};\n  border-radius: 5px;\n  font-family: sans-serif;\n  color: white;\n  border: solid 2px black;\n  overflow: visible;\n  font-size: 11px;\n  border: solid 2px ${(p) => (p.selected ? \"rgb(0,192,255)\" : \"black\")};\n`;\n\n  export const Title = styled.div`\n  background: rgba(0, 0, 0, 0.3);\n  display: flex;\n  white-space: nowrap;\n  justify-items: center;\n`;\n\n  export const TitleName = styled.div`\n  flex-grow: 1;\n  padding: 5px 5px;\n`;\n}\n\nexport interface DefaultNodeProps {\n  node: DefaultNodeModel;\n  engine: DiagramEngine;\n}\n\nexport const CustomLabelWidget = (props: DefaultNodeProps) => {\n  let { node } = props;\n  \n  return (\n    <S.Node\n      data-default-node-name={node.getOptions().name}\n      selected={node.isSelected()}\n      background={node.getOptions().color}\n    >\n      <S.Title>\n        <S.TitleName>{node.getOptions().name}</S.TitleName>\n      </S.Title>\n    </S.Node>\n  );\n}\n","import * as React from \"react\";\nimport { DefaultNodeModel } from \"../models/DefaultNodeModel\";\nimport { CustomLabelWidget } from \"../widgets/CustomLabelWidget\";\nimport { AbstractReactFactory } from \"@projectstorm/react-canvas-core\";\nimport { DiagramEngine } from \"@projectstorm/react-diagrams-core\";\n\nexport class CustomLabelFactory extends AbstractReactFactory<\n  DefaultNodeModel,\n  DiagramEngine\n> {\n  constructor() {\n    super(\"label\");\n  }\n\n  generateReactWidget(event): JSX.Element {\n    return <CustomLabelWidget engine={this.engine} node={event.model} />;\n  }\n\n  generateModel(event): DefaultNodeModel {\n    return new DefaultNodeModel(true, \"Label\", \"rgb(192,255,0)\");\n  }\n}\n","import { AbstractModelFactory } from \"@projectstorm/react-canvas-core\";\nimport { DiagramEngine } from \"@projectstorm/react-diagrams-core\";\nimport { AdvancedPortModel } from \"../models/ArrowPortModel\";\n\nexport class ArrowPortFactory extends AbstractModelFactory<\n  AdvancedPortModel,\n  DiagramEngine\n> {\n  constructor() {\n    super(\"arrow\");\n  }\n\n  generateModel(): AdvancedPortModel {\n    return new AdvancedPortModel(\"port\", true, false);\n  }\n}\n","import createEngine, {\n  DiagramModel,\n  DiagramEngine,\n  LinkModel,\n  LinkModelGenerics,\n} from \"@projectstorm/react-diagrams\";\nimport { ArrowLinkFactory } from \"../infrastructure/factories/ArrowLinkFactory\";\nimport { DefaultNodeFactory } from \"../infrastructure/factories/DefaultNodeFactory\";\nimport { DefaultLabelFactory } from \"../infrastructure/factories/DefaultLabelFactory\";\nimport { DefaultPortFactory } from \"../infrastructure/factories/DefaultPortFactory\";\nimport { DefaultLinkFactory } from \"../infrastructure/factories/DefaultLinkFactory\";\nimport { CustomLabelFactory } from \"../infrastructure/factories/CustomLabelFactory\";\nimport { DefaultPortModel } from \"../infrastructure/models/DefaultPortModel\";\nimport { ArrowLinkModel } from \"../infrastructure/models/ArrowLinkModel\";\nimport { AdvancedPortModel } from \"../infrastructure/models/ArrowPortModel\";\nimport { DefaultNodeModel } from \"../infrastructure/models/DefaultNodeModel\";\nimport { DefaultLabelModel } from \"../infrastructure/models/DefaultLabelModel\";\nimport { DefaultLinkModel } from \"../infrastructure/models/DefaultLinkModel\";\nimport { DefaultDiagramState } from \"@projectstorm/react-diagrams\";\nimport { ArrowPortFactory } from \"../infrastructure/factories/ArrowPortFactory\";\nimport { Toolkit } from \"../infrastructure/Toolkit\";\nimport _ from \"lodash\";\n\nexport class Application {\n  protected activeModel!: DiagramModel;\n  protected logicModel!: DiagramModel;\n\n  protected diagramEngine: DiagramEngine;\n\n  constructor() {\n    this.diagramEngine = createEngine();\n\n    this.diagramEngine\n      .getNodeFactories()\n      .registerFactory(new CustomLabelFactory());\n    this.diagramEngine\n      .getNodeFactories()\n      .registerFactory(new DefaultNodeFactory());\n\n    this.diagramEngine\n      .getLabelFactories()\n      .registerFactory(new DefaultLabelFactory());\n\n    this.diagramEngine\n      .getPortFactories()\n      .registerFactory(new DefaultPortFactory());\n    this.diagramEngine\n      .getPortFactories()\n      .registerFactory(new ArrowPortFactory());\n\n    this.diagramEngine\n      .getLinkFactories()\n      .registerFactory(new ArrowLinkFactory());\n    this.diagramEngine\n      .getLinkFactories()\n      .registerFactory(new DefaultLinkFactory());\n\n    const state = this.diagramEngine.getStateMachine().getCurrentState();\n\n    if (state instanceof DefaultDiagramState) {\n      state.dragNewLink.config.allowLooseLinks = false;\n    }\n\n    this.newModel();\n  }\n\n  public newModel() {\n    this.activeModel = new DiagramModel();\n    this.logicModel = new DiagramModel();\n\n    this.diagramEngine.setModel(this.activeModel);\n  }\n\n  public getActiveDiagram(): DiagramModel {\n    return this.activeModel;\n  }\n\n  public getLogicDiagram(): DiagramModel {\n    return this.logicModel;\n  }\n\n  public getDiagramEngine(): DiagramEngine {\n    return this.diagramEngine;\n  }\n\n  public setLogicModel() {\n    let concNodes = this.activeModel.getNodes();\n\n    Object.keys(concNodes).forEach((k) => {\n      let node = concNodes[k].clone() as DefaultNodeModel;\n\n      let nodePorts = concNodes[k].getPorts();\n\n      Object.keys(nodePorts).filter(id => nodePorts[id].isNamePort).forEach((k) => {\n        let port = nodePorts[k] as DefaultPortModel;\n        let logicPort = new AdvancedPortModel(\n          port.label,\n          port.isNamePort,\n          port.isPrimaryKey,\n          port.isForeignKey,\n          port.isPartialKey,\n          port.isNotNull,\n          port.isAutoincremented,\n          port.isUnique,\n          port.propertyType\n        );\n        node.addPort(logicPort);\n      });\n\n      this.logicModel.addNode(node);\n    });\n\n    let nodes = this.logicModel.getNodes();\n\n    let nodesWithoutPK: DefaultNodeModel[] = [];\n    nodes.map(n => {\n      let ports = n.getPorts() as { [s: string]: DefaultPortModel; }\n\n      let portsWithPK = _.values(ports).filter(port => port.isPrimaryKey);\n\n      if (portsWithPK.length === 0) {\n        nodesWithoutPK.push(n as DefaultNodeModel);\n      }\n    })\n\n\n    let links = this.activeModel.getLinks();\n\n    let priorityLinks = [];\n\n    links.filter(link => {\n      let sourceNode = link.getSourcePort().getParent() as DefaultNodeModel\n      let targetNode = link.getTargetPort().getParent() as DefaultNodeModel\n\n      if (nodesWithoutPK.map(node => node.getOptions().name).includes(sourceNode.getOptions().name) || nodesWithoutPK.map(node => node.getOptions().name).includes(targetNode.getOptions().name)) {\n        priorityLinks.push(link);\n      }\n    })\n\n    console.log('priorityLinks ', priorityLinks)\n\n    let priom2mLinks = priorityLinks.filter(link => {\n      let sourceLabel = (link\n        .getLabels()[0] as DefaultLabelModel).getOptions().label;\n      let targetLabel = (link\n        .getLabels()[2] as DefaultLabelModel).getOptions().label;\n\n      return sourceLabel.includes('N') && targetLabel.includes('N')\n    })\n\n    let priosourceLinks = priorityLinks.filter(link => {\n      let sourceLabel = (link\n        .getLabels()[0] as DefaultLabelModel).getOptions().label;\n      let targetLabel = (link\n        .getLabels()[2] as DefaultLabelModel).getOptions().label;\n\n      return sourceLabel.includes('N') && !targetLabel.includes('N')\n    })\n\n    let priotargetLinks = priorityLinks.filter(link => {\n      let sourceLabel = (link\n        .getLabels()[0] as DefaultLabelModel).getOptions().label;\n      let targetLabel = (link\n        .getLabels()[2] as DefaultLabelModel).getOptions().label;\n\n      return !sourceLabel.includes('N') && targetLabel.includes('N')\n    })\n\n    let priooneToOneLinks = priorityLinks.filter(link => {\n      let sourceLabel = (link\n        .getLabels()[0] as DefaultLabelModel).getOptions().label;\n      let targetLabel = (link\n        .getLabels()[2] as DefaultLabelModel).getOptions().label;\n\n      return !sourceLabel.includes('N') && !targetLabel.includes('N')\n    })\n\n\n    // targetLinks\n    this.convertTargetPorts(priotargetLinks);\n\n    // sourceLinks\n    this.convertSourceLinks(priosourceLinks);\n\n    // M2M LINKS\n    this.convertM2MLink(priom2mLinks);\n\n    this.convertSourceLinks(priooneToOneLinks);\n\n    let concLinks = this.activeModel.getLinks().filter(link => !priorityLinks.includes(link));\n\n\n    let m2mLinks = concLinks.filter(link => {\n      let sourceLabel = (link\n        .getLabels()[0] as DefaultLabelModel).getOptions().label;\n      let targetLabel = (link\n        .getLabels()[2] as DefaultLabelModel).getOptions().label;\n\n      return sourceLabel.includes('N') && targetLabel.includes('N')\n    })\n\n    let sourceLinks = concLinks.filter(link => {\n      let sourceLabel = (link\n        .getLabels()[0] as DefaultLabelModel).getOptions().label;\n      let targetLabel = (link\n        .getLabels()[2] as DefaultLabelModel).getOptions().label;\n\n      return sourceLabel.includes('N') && !targetLabel.includes('N')\n    })\n\n    let targetLinks = concLinks.filter(link => {\n      let sourceLabel = (link\n        .getLabels()[0] as DefaultLabelModel).getOptions().label;\n      let targetLabel = (link\n        .getLabels()[2] as DefaultLabelModel).getOptions().label;\n\n      return !sourceLabel.includes('N') && targetLabel.includes('N')\n    })\n\n    let oneToOneLinks = concLinks.filter(link => {\n      let sourceLabel = (link\n        .getLabels()[0] as DefaultLabelModel).getOptions().label;\n      let targetLabel = (link\n        .getLabels()[2] as DefaultLabelModel).getOptions().label;\n\n      return !sourceLabel.includes('N') && !targetLabel.includes('N')\n    })\n\n\n\n    // targetLinks\n    this.convertTargetPorts(targetLinks);\n\n    // sourceLinks\n    this.convertSourceLinks(sourceLinks);\n\n    // M2M LINKS\n    this.convertM2MLink(m2mLinks);\n\n    this.convertSourceLinks(oneToOneLinks);\n\n\n    this.diagramEngine.setModel(this.logicModel);\n  }\n\n  public setConceptualModel() {\n    this.logicModel = null;\n    this.logicModel = new DiagramModel();\n\n    let activeModelCopy = new DiagramModel();\n\n    let nodes = this.activeModel.getNodes();\n\n    Object.keys(nodes).forEach((k) => {\n      activeModelCopy.addNode(nodes[k]);\n    });\n\n    let links = this.activeModel.getLinks();\n\n    Object.keys(links).forEach((k) => {\n      activeModelCopy.addLink(links[k]);\n    });\n\n    this.activeModel = activeModelCopy;\n\n    this.diagramEngine.setModel(this.activeModel);\n  }\n\n  public loadConceptualModel(model: DiagramModel) {\n    this.activeModel = model;\n\n    this.diagramEngine.setModel(this.activeModel);\n  }\n\n  public loadLogicModel(model: DiagramModel) {\n    this.logicModel = model;\n    this.diagramEngine.setModel(this.logicModel);\n  }\n\n  public convertM2MLink(m2mLinks: LinkModel<LinkModelGenerics>[]) {\n    Object.keys(m2mLinks).forEach((k) => {\n      let logicNodes = this.logicModel.getNodes() as DefaultNodeModel[];\n\n      let sourceNode = m2mLinks[k].sourcePort.getParent() as DefaultNodeModel;\n      let sourceNodeId = logicNodes\n        .filter(\n          (node) =>\n            (node as DefaultNodeModel).getOptions().name ===\n            sourceNode.getOptions().name\n        )[0]\n        .getOptions().id;\n\n      let targetNode = m2mLinks[k].targetPort.getParent() as DefaultNodeModel;\n      let targetNodeId = logicNodes\n        .filter(\n          (node) =>\n            (node as DefaultNodeModel).getOptions().name ===\n            targetNode.getOptions().name\n        )[0]\n        .getOptions().id;\n\n      let relNode = ((m2mLinks[k] as DefaultLinkModel)\n        .properties as DefaultNodeModel).clone() as DefaultNodeModel;\n\n      relNode.getOptions().name = relNode.getOptions().name = m2mLinks[k].relName;\n\n      relNode.setPosition(\n        sourceNode.getPosition().x + 150,\n        sourceNode.getPosition().y - 100\n      );\n\n      relNode.addPort(\n        new AdvancedPortModel(\n          \"Id\",\n          false,\n          true,\n          false,\n          false,\n          true,\n          true,\n          true,\n          \"INT\"\n        )\n      );\n      relNode.addPort(\n        new AdvancedPortModel(\n          \"\",\n          true,\n          false,\n          false,\n          false,\n          false,\n          false,\n          false,\n          \"INT\"\n        )\n      );\n      relNode.addPort(\n        new AdvancedPortModel(\n          \"1\",\n          true,\n          false,\n          false,\n          false,\n          false,\n          false,\n          false,\n          \"INT\"\n        )\n      );\n\n      let sourceNodeLogic = logicNodes.filter(\n        (n) => n.getOptions().id === sourceNodeId\n      )[0];\n      let sourceNodePorts = sourceNodeLogic.getPorts() as {\n        [s: string]: DefaultPortModel;\n      }\n      let sourceNodePKPort = _.keys(sourceNodePorts).filter(key => sourceNodePorts[key].isPrimaryKey || sourceNodePorts[key].isPartialKey).map(key => sourceNodePorts[key]);\n\n      let targetNodeLogic = logicNodes.filter(\n        (n) => n.getOptions().id === targetNodeId\n      )[0];\n      let targetNodePorts = targetNodeLogic.getPorts() as {\n        [s: string]: DefaultPortModel;\n      }\n      let targetNodePKPort = _.keys(targetNodePorts).filter(key => targetNodePorts[key].isPrimaryKey || targetNodePorts[key].isPartialKey).map(key => targetNodePorts[key]);\n\n      let targetNodePrimaryKeysPorts = _.keys(targetNodePorts).filter(key => targetNodePorts[key].isPrimaryKey).map(key => targetNodePorts[key]);\n      let sourceNodePrimaryKeysPorts = _.keys(sourceNodePorts).filter(key => sourceNodePorts[key].isPrimaryKey).map(key => sourceNodePorts[key]);\n\n      let x = 1\n      sourceNodePKPort.forEach(port => {\n        relNode.addPort(\n          new AdvancedPortModel(\n            sourceNode.getOptions().name + port.label + `${sourceNode === targetNode ? x : ''}`,\n            false,\n            sourceNodePrimaryKeysPorts.length > 0 ? false : true,\n            sourceNodePrimaryKeysPorts.length > 0 ? true : false,\n            false, // partial\n            true,\n            false,\n            false,\n            \"INT\",\n            Toolkit.UID(),\n            sourceNodeId\n          )\n        )\n        x++;\n      }\n      );\n\n\n      targetNodePKPort.forEach(port => {\n        relNode.addPort(\n          new AdvancedPortModel(\n            targetNode.getOptions().name + port.label,\n            false,\n            targetNodePrimaryKeysPorts.length > 0 ? false : true,\n            targetNodePrimaryKeysPorts.length > 0 ? true : false,\n            false,// partial\n            true,\n            false,\n            false,\n            \"INT\",\n            Toolkit.UID(),\n            targetNodeId\n          )\n        );\n      });\n\n      this.logicModel.addNode(relNode);\n\n      let node = logicNodes.filter(\n        (n) => n.getOptions().id === sourceNodeId\n      )[0];\n      let sourceP = node.getPorts()[\"1\"];\n      let targetP = relNode.getPorts()[\"\"];\n\n      let link = new ArrowLinkModel({ type: \"arrow\" });\n\n      link.setSourcePort(sourceP);\n      link.setTargetPort(targetP);\n\n      let node2 = logicNodes.filter(\n        (n) => n.getOptions().id === targetNodeId\n      )[0];\n      let targetP2 = relNode.getPorts()[\"1\"];\n      let sourceP2 = node2.getPorts()[\"\"];\n\n      let link2 = new ArrowLinkModel({ type: \"arrow\" });\n\n      link2.setSourcePort(sourceP2);\n      link2.setTargetPort(targetP2);\n\n      this.logicModel.addAll(link, link2);\n\n    });\n  }\n\n  public convertSourceLinks(sourceLinks: LinkModel<LinkModelGenerics>[]) {\n    Object.keys(sourceLinks).forEach((k) => {\n      let logicNodes = this.logicModel.getNodes() as DefaultNodeModel[];\n\n      let sourceNode = sourceLinks[k].sourcePort.getParent() as DefaultNodeModel;\n      let sourceNodeId = logicNodes\n        .filter(\n          (node) =>\n            (node as DefaultNodeModel).getOptions().name ===\n            sourceNode.getOptions().name\n        )[0]\n        .getOptions().id;\n\n      let targetNode = sourceLinks[k].targetPort.getParent() as DefaultNodeModel;\n      let targetNodeId = logicNodes\n        .filter(\n          (node) =>\n            (node as DefaultNodeModel).getOptions().name ===\n            targetNode.getOptions().name\n        )[0]\n        .getOptions().id;\n\n\n      /// source\n      let sourceNodeLogic = logicNodes.filter(\n        (n) => n.getOptions().id === targetNodeId\n      )[0];\n      let sourceNodePorts = sourceNodeLogic.getPorts() as {\n        [s: string]: DefaultPortModel;\n      }\n      let sourceNodePKPort = _.keys(sourceNodePorts).filter(key => sourceNodePorts[key].isPrimaryKey || sourceNodePorts[key].isPartialKey).map(key => sourceNodePorts[key]);\n      ///\n\n      /// target\n      let node = logicNodes.filter(\n        (n) => n.getOptions().id === sourceNodeId\n      )[0];\n\n      let targetNodePorts = node.getPorts() as {\n        [s: string]: DefaultPortModel;\n      }\n      let targetNodePrimaryKeysPorts = _.keys(targetNodePorts).filter(key => targetNodePorts[key].isPrimaryKey).map(key => targetNodePorts[key]);\n      ///\n      sourceNodePKPort.forEach(port => {\n        node.addPort(\n          new AdvancedPortModel(\n            targetNode.getOptions().name + port.label,\n            false,\n            targetNodePrimaryKeysPorts.length > 0 ? false : true,\n            targetNodePrimaryKeysPorts.length > 0 ? true : false,\n            false,//PARTIAL\n            true,\n            false,\n            false,\n            \"INT\",\n            Toolkit.UID(),\n            targetNodeId\n          )\n        );\n      })\n      let nodePorts = node.getPorts() as { [s: string]: DefaultPortModel; }\n      let newPKPorts = _.keys(nodePorts).filter(key => nodePorts[key].isPartialKey).map(key => nodePorts[key]);\n\n      newPKPorts.map(port => port.isPrimaryKey = true);\n\n      let relNode = ((sourceLinks[k] as DefaultLinkModel)\n      .properties as DefaultNodeModel).clone() as DefaultNodeModel;\n\n      let relPorts = relNode.getPorts() as { [s: string]: DefaultPortModel; }\n\n      _.values(relPorts).map(port => {\n        let logicPort = new AdvancedPortModel(\n          port.label,\n          port.isNamePort,\n          port.isPrimaryKey,\n          port.isForeignKey,\n          port.isPartialKey,\n          port.isNotNull,\n          port.isAutoincremented,\n          port.isUnique,\n          port.propertyType\n        );\n        node.addPort(logicPort);\n      })\n\n      let tNode = logicNodes.filter(\n        (n) => n.getOptions().id === targetNodeId\n      )[0];\n\n      let targetP = node.getPorts()[\"1\"];\n      let sourceP = tNode.getPorts()[\"\"];\n\n      let link = new ArrowLinkModel({ type: \"arrow\" });\n\n      link.setSourcePort(sourceP);\n      link.setTargetPort(targetP);\n      this.logicModel.addLink(link);\n    });\n  }\n\n  public convertTargetPorts(targetLinks: LinkModel<LinkModelGenerics>[]) {\n    Object.keys(targetLinks).forEach((k) => {\n      let logicNodes = this.logicModel.getNodes() as DefaultNodeModel[];\n\n      let sourceNode = targetLinks[k].sourcePort.getParent() as DefaultNodeModel;\n      let sourceNodeId = logicNodes\n        .filter(\n          (node) =>\n            (node as DefaultNodeModel).getOptions().name ===\n            sourceNode.getOptions().name\n        )[0]\n        .getOptions().id;\n\n      let targetNode = targetLinks[k].targetPort.getParent() as DefaultNodeModel;\n      let targetNodeId = logicNodes\n        .filter(\n          (node) =>\n            (node as DefaultNodeModel).getOptions().name ===\n            targetNode.getOptions().name\n        )[0]\n        .getOptions().id;\n\n\n\n      /// source\n      let sourceNodeLogic = logicNodes.filter(\n        (n) => n.getOptions().id === sourceNodeId\n      )[0];\n      let sourceNodePorts = sourceNodeLogic.getPorts() as {\n        [s: string]: DefaultPortModel;\n      }\n      let sourceNodePKPort = _.keys(sourceNodePorts).filter(key => sourceNodePorts[key].isPrimaryKey || sourceNodePorts[key].isPartialKey).map(key => sourceNodePorts[key]);\n\n      /// target\n      let node = logicNodes.filter(\n        (n) => n.getOptions().id === targetNodeId\n      )[0];\n\n      let targetNodePorts = node.getPorts() as {\n        [s: string]: DefaultPortModel;\n      }\n      let targetNodePrimaryKeysPorts = _.keys(targetNodePorts).filter(key => targetNodePorts[key].isPrimaryKey).map(key => targetNodePorts[key]);\n      ///\n\n      sourceNodePKPort.forEach(port => {\n        node.addPort(\n          new AdvancedPortModel(\n            sourceNode.getOptions().name + port.label,\n            false,\n            targetNodePrimaryKeysPorts.length > 0 ? false : true,\n            targetNodePrimaryKeysPorts.length > 0 ? true : false,\n            false,//PARTIAL\n            true,\n            false,\n            false,\n            \"INT\",\n            Toolkit.UID(),\n            sourceNodeId\n          )\n        );\n      })\n\n      let nodePorts = node.getPorts() as { [s: string]: DefaultPortModel; }\n      let newPKPorts = _.keys(nodePorts).filter(key => nodePorts[key].isPartialKey).map(key => nodePorts[key]);\n\n      newPKPorts.map(port => port.isPrimaryKey = true);\n\n      let relNode = ((targetLinks[k] as DefaultLinkModel)\n      .properties as DefaultNodeModel).clone() as DefaultNodeModel;\n\n      let relPorts = relNode.getPorts() as { [s: string]: DefaultPortModel; }\n\n      _.values(relPorts).map(port => {\n        let logicPort = new AdvancedPortModel(\n          port.label,\n          port.isNamePort,\n          port.isPrimaryKey,\n          port.isForeignKey,\n          port.isPartialKey,\n          port.isNotNull,\n          port.isAutoincremented,\n          port.isUnique,\n          port.propertyType\n        );\n        node.addPort(logicPort);\n      })\n\n      let tNode = logicNodes.filter(\n        (n) => n.getOptions().id === sourceNodeId\n      )[0];\n\n      let targetP = node.getPorts()[\"\"];\n      let sourceP = tNode.getPorts()[\"1\"];\n\n      let link = new ArrowLinkModel({ type: \"arrow\" });\n\n      link.setSourcePort(sourceP);\n      link.setTargetPort(targetP);\n      this.logicModel.addLink(link);\n    });\n  }\n}\n","import * as React from \"react\";\nimport { BodyWidget } from \"./components/BodyWidget\";\nimport { Application } from \"./components/Application\";\n\nexport default () => {\n  var app = new Application();\n  return (\n    <div className=\"content\">\n      <BodyWidget app={app} />\n    </div>\n  );\n};\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === \"localhost\" ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === \"[::1]\" ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener(\"load\", () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            \"This web app is being served cache-first by a service \" +\n              \"worker. To learn more, visit https://bit.ly/CRA-PWA\"\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === \"installed\") {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                \"New content is available and will be used when all \" +\n                  \"tabs for this page are closed. See https://bit.ly/CRA-PWA.\"\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log(\"Content is cached for offline use.\");\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error(\"Error during service worker registration:\", error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { \"Service-Worker\": \"script\" },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get(\"content-type\");\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf(\"javascript\") === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        \"No internet connection found. App is running in offline mode.\"\n      );\n    });\n}\n\nexport function unregister() {\n  if (\"serviceWorker\" in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","import \"./icons/micon/css/micon.min.css\";\nimport \"react-bootstrap-table-next/dist/react-bootstrap-table2.min.css\";\n\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\n\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}