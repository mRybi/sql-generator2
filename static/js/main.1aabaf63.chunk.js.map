{"version":3,"sources":["components/TrayWidget.tsx","components/TrayItemWidget.tsx","helpers/DemoCanvasWidget.tsx","infrastructure/models/ArrowLinkModel.ts","infrastructure/models/DefaultLabelModel.tsx","infrastructure/models/DefaultNodeModel.ts","infrastructure/models/DefaultLinkModel.ts","infrastructure/Toolkit.ts","infrastructure/models/DefaultPortModel.ts","infrastructure/models/ArrowPortModel.ts","components/TrayItemDiv.tsx","infrastructure/models/PropertyType.ts","components/grid/Grid.tsx","components/grid/Row.tsx","components/grid/Col.tsx","components/PropertyTable/PropertyTable.tsx","components/DarkInput.tsx","components/NodeProperties/NodeProperties.tsx","components/popups/ResultPopup/ResultPopup.tsx","handlers/GenerationHandler.tsx","components/popups/LoadFilePopup/LoadFilePopup.tsx","handlers/LoadFileHandler.tsx","components/popups/SaveToFilePopup/SaveToFilePopup.tsx","components/popups/SaveToJpegPopup/SaveToJpegPopup.tsx","components/popups/RealtionPopup/RelationPopup.tsx","components/BodyWidget.tsx","infrastructure/widgets/ArrowLinkWidget.tsx","infrastructure/factories/ArrowLinkFactory.tsx","infrastructure/widgets/DefaultPortLabelWidget.tsx","infrastructure/widgets/DefaultNodeWidget.tsx","infrastructure/factories/DefaultNodeFactory.tsx","infrastructure/widgets/DefaultLabelWidget.tsx","infrastructure/factories/DefaultLabelFactory.tsx","infrastructure/factories/DefaultPortFactory.tsx","infrastructure/widgets/DefaultLinkPointWidget.tsx","infrastructure/widgets/DefaultLinkSegmentWidget.tsx","infrastructure/widgets/DefaultLinkWidget.tsx","infrastructure/factories/DefaultLinkFactory.tsx","infrastructure/widgets/CustomLabelWidget.tsx","infrastructure/factories/CustomLabelFactory.tsx","infrastructure/factories/ArrowPortFactory.tsx","components/Application.ts","App.tsx","serviceWorker.ts","index.tsx"],"names":["S","styled","div","TrayWidget","Tray","this","props","children","React","p","color","TrayItemWidget","draggable","onDragStart","event","dataTransfer","setData","JSON","stringify","model","name","Container","background","DemoCanvasWidget","ArrowLinkModel","options","type","width","selectedColor","curvyness","DefaultLinkModel","DefaultLabelModel","offsetY","label","data","LabelModel","DefaultNodeModel","isLabel","portsIn","lookupTable","clone","portsOut","port","getOptions","in","indexOf","push","_","portsInOrder","id","getPortFromID","NodeModel","withPoint","addLabel","point","PointModel","link","setPosition","position","x","y","addPoint","relName","properties","alignment","PortModelAlignment","RIGHT","LEFT","TOP","points","length","curve","BezierCurve","setSource","getFirstPoint","getPosition","setTarget","getLastPoint","setSourceControl","setTargetControl","sourcePort","getSourceControl","translate","calculateControlOffset","getSourcePort","targetPort","getTargetControl","getTargetPort","getSVGCurve","relPorts","getPorts","Object","values","map","a","propertyType","isPrimaryKey","isNotNull","isAutoincremented","isUnique","propertiesNode","forEach","rel","addPort","DefaultPortModel","labelOb","setLabel","fireEvent","LinkModel","Toolkit","TESTING","TESTING_UID","replace","c","r","Math","random","toString","element","selector","document","body","closest","logic","isNamePort","isForeignKey","isPartialKey","fkPortId","alignemnt","UID","links","factory","createLinkModel","setSourcePort","setTargetPort","removeMiddlePoints","getParent","recursiveRelation","generateModel","PortModel","AdvancedPortModel","thisParent","portNode","portNodePorts","thisParentPorts","czyMaPortZPKjakoFk","keys","find","czyMaPortZPKjakoFk2","pk","marginTop","isSelected","css","isDisabled","PropertyType","TrayItemDiv","Grid","style","className","buildClassNameString","Row","flex","Col","onDoubleClick","size","config","pull","offset","order","hidden","buildGridColConfigClassNames","sm","md","lg","xl","xxl","xxxl","PropertyTable","useState","updatedItem","setUpdatedItem","forceUpdate","setValue","value","useForceUpdate","useMemo","selectedItem","handleChangePK","row","persist","ports","console","log","clearPartialKeys","columns","dataField","text","formatter","cellContent","defaultValue","onChange","target","relView","relationAtributes","attString","getLabels","relationName","handleChangePortLabel","paddingLeft","list","handleChangepPropType","obj","key","checked","handleChangeFK","handleChangePartialKey","disabled","handleChangeNull","handleChangeAutoInc","handleChangeUnique","onClick","removePort","filter","getID","labels","oldLabel","slice","portsTable","cols","col","isLogic","keyField","bordered","AddNewAtributeButton","newPortNumber","addNewPort","input","fontSize","DarkInput","Input","NodeProperties","defaultName","setDefaultName","setName","showInput","setShowInput","setLocked","handleNameChange","diagramEngine","getModel","getNodes","node","toLowerCase","trim","includes","height","wordBreak","update","ResultPopup","dbName","setDbName","mySQLView","setmySQLView","formatedMSSQL","mssqlString","sqlFormatter","format","language","indent","formatedMySQL","mysqlString","modal","closeOnDocumentClick","open","isOpen","closeOnEscape","marginRight","generateScript","readOnly","contentEditable","blob","Blob","FileSaver","saveAs","GenerationHandler","sqlString","setSqlString","setMySqlString","useEffect","serDiagram","serializeDiagram","dNodes","nodes","dLinks","diagramJson","diagram","axios","post","SerializedModel","DatabaseName","RelationType","isUml","response","responseMy","status","LoadFilePopup","fileReader","fileContent","setFileContent","handleFileRead","e","content","result","onClose","files","FileReader","onloadend","readAsText","accept","loadDiagram","LoadFileHandler","engine","app","getDiagramEngine","parse","setIsUml","setIsLogic","model2","DiagramModel","deserializeModel","getLinks","splice","loadLogicModel","loadConceptualModel","repaintCanvas","error","SaveToFilePopup","fileName","setFileName","diagramModel","serialize","SaveToJpegPopup","domtoimage","toJpeg","getElementById","quality","then","dataUrl","createElement","download","href","click","RelationPopup","left","setLeft","right","setRight","setRelationAtributes","relationNameOnly","setRelationNameOnly","leftLabel","rightLabel","handleRelationNameChenge","getPoints","index","remove","sourceP","targetP","removeLink","renderOptionPicker","side","GridItem","newSourceP","newTargetP","addLink","GridContainer","margin","span","BodyWidget","showDialog","setShowDialog","showRelationDialog","setShowRelationDialog","showLoadFileDialog","setShowLoadFileDialog","showSaveFileDialog","setSaveFileDialog","showSaveJPEGDialog","setSaveJPEGDialog","showSaveOptions","setSaveOptions","selectedNode","setSelectedNode","selectedLink","setSelectedLink","isLogicModel","setIsLogicModel","changeRelation","temp","substring","temp2","refreshPopups","Body","Header","Content","DropdownIcon","setConceptualModel","setLogicModel","Layer","onDrop","getData","names","nodesCount","newNodeName","getRelativeMousePoint","addNode","onDragOver","preventDefault","ctrlKey","getSelectedEntities","getActiveDiagram","CustomLinkArrowWidget","previousPoint","setSelected","angle","atan2","PI","transform","fill","onMouseLeave","onMouseEnter","data-id","data-linkid","getLink","ArrowLinkWidget","colorSelected","paths","refPaths","j","generateLink","LinkWidget","generateLinePath","onMouseDown","addPointToLink","generateArrow","i","generatePoint","data-default-link-test","testName","DefaultLinkWidget","ArrowLinkFactory","DefaultLinkFactory","PortItem","DefaultPortLabel","portJSX","Port","PortLabel","PrimaryKeyIcon","NamedPort","PortContainer","HiddenPort","selected","DefaultNodeWidget","generatePort","portsJSX","namedPortsJSX","notNamedPortsJSX","Node","data-default-node-name","Title","NamedPortLeft","TitleName","NamedPortRight","Ports","PortsContainer","DefaultNodeFactory","AbstractReactFactory","DefaultLabelWidget","Label","DefaultLabelFactory","DefaultPortFactory","AbstractModelFactory","PointTop","circle","DefaultLinkPointWidget","state","cx","cy","setState","opacity","DefaultLinkSegmentWidget","Bottom","generateLinkSegment","path","ref","forwardRef","Top","strokeLinecap","onSelection","extras","strokeOpacity","strokeWidth","onContextMenu","isLocked","setRenderedPaths","current","shiftKey","getMaxNumberPointsPerLink","stopPropagation","getActionEventBus","fireAction","extraProps","getFactoryForLink","getSVGPath","Keyframes","keyframes","Path","stroke","d","CustomLabelWidget","CustomLabelFactory","ArrowPortFactory","Application","createEngine","getNodeFactories","registerFactory","getLabelFactories","getPortFactories","getLinkFactories","getStateMachine","getCurrentState","DefaultDiagramState","dragNewLink","allowLooseLinks","newModel","activeModel","logicModel","setModel","concNodes","k","nodePorts","logicPort","nodesWithoutPK","n","priorityLinks","sourceNode","targetNode","priom2mLinks","sourceLabel","targetLabel","priosourceLinks","priotargetLinks","priooneToOneLinks","convertTargetPorts","convertSourceLinks","convertM2MLink","concLinks","m2mLinks","sourceLinks","targetLinks","oneToOneLinks","activeModelCopy","logicNodes","sourceNodeId","targetNodeId","relNode","sourceNodePorts","sourceNodePKPort","targetNodePorts","targetNodePKPort","targetNodePrimaryKeysPorts","sourceNodePrimaryKeysPorts","node2","targetP2","sourceP2","link2","addAll","tNode","Boolean","window","location","hostname","match","ReactDOM","render","App","navigator","serviceWorker","ready","registration","unregister","catch","message"],"mappings":"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","file":"static/js/main.1aabaf63.chunk.js","sourcesContent":["import * as React from \"react\";\nimport styled from \"@emotion/styled\";\n\nnamespace S {\n  export const Tray = styled.div`\n  min-width: 200px;\n  background: rgb(20, 20, 20);\n  flex-grow: 0;\n  flex-shrink: 0;\n`;\n}\n\nexport class TrayWidget extends React.Component {\n  render() {\n    return <S.Tray>{this.props.children}</S.Tray>;\n  }\n}\n","import * as React from \"react\";\nimport styled from \"@emotion/styled\";\n\nexport interface TrayItemWidgetProps {\n  model: any;\n  color: string;\n  name: string;\n}\nnamespace S {\n  export const Tray = styled.div<{ color: string }>`\n  color: white;\n  font-family: Helvetica, Arial;\n  padding: 5px;\n  margin: 0px 10px;\n  border: solid 1px ${(p) => p.color};\n  border-radius: 5px;\n  margin-bottom: 2px;\n  cursor: pointer;\n`;\n}\n\nexport class TrayItemWidget extends React.Component<TrayItemWidgetProps> {\n  render() {\n    return (\n      <S.Tray\n        color={this.props.color}\n        draggable={true}\n        onDragStart={(event) => {\n          event.dataTransfer.setData(\n            \"storm-diagram-node\",\n            JSON.stringify(this.props.model)\n          );\n        }}\n      >\n        {this.props.name}\n      </S.Tray>\n    );\n  }\n}\n","import * as React from \"react\";\nimport styled from \"@emotion/styled\";\n\nexport interface DemoCanvasWidgetProps {\n  color?: string;\n  background?: string;\n}\n\nexport const Container = styled.div<{ color: string; background: string }>`\n  height: 100%;\n  background-color: ${(p) => p.background};\n  background-size: 50px 50px;\n  display: flex;\n  > * {\n    height: 100%;\n    min-height: 100%;\n    width: 100%;\n  }\n  background-image: linear-gradient(\n      0deg,\n      transparent 24%,\n      ${(p) => p.color} 25%,\n      ${(p) => p.color} 26%,\n      transparent 27%,\n      transparent 74%,\n      ${(p) => p.color} 75%,\n      ${(p) => p.color} 76%,\n      transparent 77%,\n      transparent\n    ),\n    linear-gradient(\n      90deg,\n      transparent 24%,\n      ${(p) => p.color} 25%,\n      ${(p) => p.color} 26%,\n      transparent 27%,\n      transparent 74%,\n      ${(p) => p.color} 75%,\n      ${(p) => p.color} 76%,\n      transparent 77%,\n      transparent\n    );\n`;\n\nexport class DemoCanvasWidget extends React.Component<DemoCanvasWidgetProps> {\n  render() {\n    return (\n      <Container\n        background={this.props.background || \"rgb(60, 60, 60)\"}\n        color={this.props.color || \"rgba(255,255,255, 0.05)\"}\n      >\n        {this.props.children}\n      </Container>\n    );\n  }\n}\n","import { DefaultLinkModelOptions } from \"./DefaultLinkModel\";\nimport { DefaultLinkModel } from \"@projectstorm/react-diagrams\";\n\nexport class ArrowLinkModel extends DefaultLinkModel {\n  constructor(options: DefaultLinkModelOptions = {}) {\n    super({\n      type: \"arrow\",\n      width: options.width || 3,\n      color: options.color || \"gray\",\n      selectedColor: options.selectedColor || \"rgb(0,192,255)\",\n      curvyness: 0,\n      ...options,\n    });\n    \n    \n  }\n}\n","import {\n  LabelModel,\n  LabelModelGenerics,\n  LabelModelOptions,\n} from \"@projectstorm/react-diagrams-core\";\nimport { DeserializeEvent } from \"@projectstorm/react-canvas-core\";\n\nexport interface DefaultLabelModelOptions extends LabelModelOptions {\n  label?: string;\n}\n\nexport interface DefaultLabelModelGenerics extends LabelModelGenerics {\n  OPTIONS: DefaultLabelModelOptions;\n}\n\nexport class DefaultLabelModel extends LabelModel<DefaultLabelModelGenerics> {\n  constructor(options: DefaultLabelModelOptions = {}) {\n    super({\n      offsetY: options.offsetY == null ? -23 : options.offsetY,\n      type: \"default\",\n      ...options,\n    });\n  }\n\n  setLabel(label: string) {\n    this.options.label = label;\n  }\n\n  deserialize(event: DeserializeEvent<this>) {\n    super.deserialize(event);\n    this.options.label = event.data.label;\n  }\n\n  serialize() {\n    return {\n      ...super.serialize(),\n      label: this.options.label,\n    };\n  }\n}\n","import * as _ from \"lodash\";\nimport { DefaultPortModel } from \"../models/DefaultPortModel\";\nimport {\n  NodeModel,\n  NodeModelGenerics,\n} from \"@projectstorm/react-diagrams-core\";\nimport {\n  BasePositionModelOptions,\n  DeserializeEvent,\n} from \"@projectstorm/react-canvas-core\";\n\nexport interface DefaultNodeModelOptions extends BasePositionModelOptions {\n  name?: string;\n  color?: string;\n}\n\nexport interface DefaultNodeModelGenerics extends NodeModelGenerics {\n  OPTIONS: DefaultNodeModelOptions;\n}\n\nexport class DefaultNodeModel extends NodeModel<DefaultNodeModelGenerics> {\n  isLabel: boolean;\n\n  protected portsIn: DefaultPortModel[];\n\n  constructor(isLabel: boolean, name: string, color: string) {\n    super({\n      type: \"default\",\n      name,\n      color,\n    });\n    this.isLabel = isLabel;\n    this.portsIn = [];\n  }\n\n  doClone(lookupTable: {}, clone: any): void {\n    clone.portsIn = [];\n    clone.portsOut = [];\n    super.doClone(lookupTable, clone);\n  }\n\n  removePort<T extends DefaultPortModel>(port: T): void {\n    super.removePort(port);\n  }\n\n  addPort<T extends DefaultPortModel>(port: T): T {\n    super.addPort(port);\n    if (port.getOptions().in) {\n      if (this.portsIn.indexOf(port) === -1) {\n        this.portsIn.push(port);\n      }\n    }\n    return port;\n  }\n\n  deserialize(event: DeserializeEvent<this>) {\n    super.deserialize(event);\n    this.options.name = event.data.name;\n    this.options.color = event.data.color;\n    this.portsIn = _.map(event.data.portsInOrder, (id) => {\n      return this.getPortFromID(id);\n    }) as DefaultPortModel[];\n    this.isLabel = event.data.isLabel;\n  }\n\n  serialize(): any {\n    return {\n      ...super.serialize(),\n      name: this.options.name,\n      color: this.options.color,\n      isLabel: this.isLabel\n    };\n  }\n\n  getInPorts(): DefaultPortModel[] {\n    return this.portsIn;\n  }\n}\n","import {\n  LabelModel,\n  LinkModel,\n  LinkModelGenerics,\n  LinkModelListener,\n  PortModel,\n  PortModelAlignment,\n  PointModel,\n} from \"@projectstorm/react-diagrams-core\";\nimport { DefaultLabelModel } from \"../models/DefaultLabelModel\";\nimport { BezierCurve } from \"@projectstorm/geometry\";\nimport {\n  BaseEntityEvent,\n  BaseModelOptions,\n  DeserializeEvent,\n} from \"@projectstorm/react-canvas-core\";\nimport { DefaultNodeModel } from \"./DefaultNodeModel\";\nimport { PropertyType } from \"./PropertyType\";\nimport { DefaultPortModel } from \"./DefaultPortModel\";\n\nexport interface DefaultLinkModelListener extends LinkModelListener {\n  colorChanged?(\n    event: BaseEntityEvent<DefaultLinkModel> & { color: null | string }\n  ): void;\n\n  widthChanged?(\n    event: BaseEntityEvent<DefaultLinkModel> & { width: 0 | number }\n  ): void;\n}\n\nexport interface LinkWithPointOptions extends BaseModelOptions {\n  position: {x: number, y: number};\n}\n\n\nexport interface DefaultLinkModelOptions extends BaseModelOptions {\n  width?: number;\n  color?: string;\n  selectedColor?: string;\n  curvyness?: number;\n  type?: string;\n  testName?: string;\n}\n\nexport interface DefaultLinkModelGenerics extends LinkModelGenerics {\n  LISTENER: DefaultLinkModelListener;\n  OPTIONS: DefaultLinkModelOptions;\n}\n\nclass RelationProperties {\n  label: string;\n  isPrimaryKey: boolean;\n  isAutoincremented: boolean;\n  isNotNull: boolean;\n  isUnique: boolean;\n  propertyType: PropertyType;\n}\n\nexport class DefaultLinkModel extends LinkModel<DefaultLinkModelGenerics> {\n  properties: DefaultNodeModel;\n  relName: string;\n\n  constructor(options: DefaultLinkModelOptions = {}, withPoint?: LinkWithPointOptions) {\n    super({\n      type: \"default\",\n      width: options.width || 3,\n      color: options.color || \"gray\",\n      selectedColor: options.selectedColor || \"rgb(0,192,255)\",\n      curvyness: 0,\n      ...options,\n    });\n\n    this.addLabel(\"0,N\");\n    this.addLabel(\"relation name\\n\");\n    this.addLabel(\"0,N\");\n\n\n    if(withPoint) {\n      let point = new PointModel({link: this});\n      point.setPosition(withPoint.position.x ,withPoint.position.y)\n      this.addPoint(point);\n    }\n\n\n    this.relName = \"relation name\";\n\n    this.properties = new DefaultNodeModel(false, \"relNode\", \"rgb(0,192,255)\");\n  }\n\n  calculateControlOffset(port: PortModel): [number, number] {\n    if (port.getOptions().alignment === PortModelAlignment.RIGHT) {\n      return [this.options.curvyness, 0];\n    } else if (port.getOptions().alignment === PortModelAlignment.LEFT) {\n      return [-this.options.curvyness, 0];\n    } else if (port.getOptions().alignment === PortModelAlignment.TOP) {\n      return [0, -this.options.curvyness];\n    }\n    return [0, this.options.curvyness];\n  }\n\n  getSVGPath(): string {\n\n    if (this.points.length === 2) {\n      const curve = new BezierCurve();\n      curve.setSource(this.getFirstPoint().getPosition());\n      curve.setTarget(this.getLastPoint().getPosition());\n      curve.setSourceControl(this.getFirstPoint().getPosition().clone());\n      curve.setTargetControl(this.getLastPoint().getPosition().clone());\n\n      if (this.sourcePort) {\n        curve\n          .getSourceControl()\n          .translate(...this.calculateControlOffset(this.getSourcePort()));\n      }\n\n      if (this.targetPort) {\n        curve\n          .getTargetControl()\n          .translate(...this.calculateControlOffset(this.getTargetPort()));\n      }\n      return curve.getSVGCurve();\n    }\n  }\n\n  serialize() {\n    let relPorts =\n      this.properties &&\n      this.properties.getPorts() &&\n      Object.values(this.properties.getPorts());\n    let properties =\n      relPorts &&\n      relPorts.map((a: DefaultPortModel) => {\n        return {\n          label: a.label,\n          propertyType: a.propertyType,\n          isPrimaryKey: a.isPrimaryKey,\n          isNotNull: a.isNotNull,\n          isAutoincremented: a.isAutoincremented,\n          isUnique: a.isUnique,\n        };\n      });\n\n    return {\n      ...super.serialize(),\n      width: this.options.width,\n      color: this.options.color,\n      curvyness: this.options.curvyness,\n      selectedColor: this.options.selectedColor,\n      relName: this.relName,\n      properties,\n    };\n  }\n\n  deserialize(event: DeserializeEvent<this>) {\n    let propertiesNode = new DefaultNodeModel(\n      false,\n      \"relNode\",\n      \"rgb(0,192,255)\"\n    );\n    event.data.properties.forEach((rel: RelationProperties) => {\n      propertiesNode.addPort(\n        new DefaultPortModel(\n          false,\n          rel.label,\n          false,\n          rel.isPrimaryKey,\n          false,\n          false,\n          rel.isNotNull,\n          rel.isAutoincremented,\n          rel.isUnique,\n          rel.propertyType\n        )\n      );\n    });\n\n    super.deserialize(event);\n    this.options.color = event.data.color;\n    this.options.width = event.data.width;\n    this.options.curvyness = event.data.curvyness;\n    this.options.selectedColor = event.data.selectedColor;\n    this.properties = propertiesNode;\n    this.relName = event.data.relName;\n  }\n\n  addLabel(label: LabelModel | string) {\n    if (label instanceof LabelModel) {\n      return super.addLabel(label);\n    }\n    let labelOb = new DefaultLabelModel();\n    labelOb.setLabel(label);\n    return super.addLabel(labelOb);\n  }\n\n  setWidth(width: number) {\n    this.options.width = width;\n    this.fireEvent({ width }, \"widthChanged\");\n  }\n\n  setColor(color: string) {\n    this.options.color = color;\n    this.fireEvent({ color }, \"colorChanged\");\n  }\n}\n","import * as closest from \"closest\";\n\nexport class Toolkit {\n  static TESTING: boolean = false;\n  static TESTING_UID = 0;\n\n  /**\n   * Generats a unique ID (thanks Stack overflow :3)\n   * @returns {String}\n   */\n  public static UID(): string {\n    if (Toolkit.TESTING) {\n      Toolkit.TESTING_UID++;\n      return `${Toolkit.TESTING_UID}`;\n    }\n    return \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g, (c) => {\n      const r = (Math.random() * 16) | 0;\n      const v = c === \"x\" ? r : (r & 0x3) | 0x8;\n      return v.toString(16);\n    });\n  }\n\n  /**\n   * Finds the closest element as a polyfill\n   */\n  public static closest(element: Element, selector: string) {\n    if (document.body.closest) {\n      return element.closest(selector);\n    }\n    return closest(element, selector);\n  }\n}\n","import {\n  LinkModel,\n  PortModel,\n  PortModelAlignment,\n  PortModelGenerics,\n  PortModelOptions,\n  PointModel,\n} from \"@projectstorm/react-diagrams-core\";\nimport { DefaultLinkModel } from \"../models/DefaultLinkModel\";\nimport { AbstractModelFactory } from \"@projectstorm/react-canvas-core\";\nimport { Toolkit } from \"../Toolkit\";\n\nexport interface DefaultPortModelOptions extends PortModelOptions {\n  label?: string;\n  in?: boolean;\n}\n\nexport interface DefaultPortModelGenerics extends PortModelGenerics {\n  OPTIONS: DefaultPortModelOptions;\n}\n\nexport class DefaultPortModel extends PortModel<DefaultPortModelGenerics> {\n  in: boolean;\n  isNamePort: boolean;\n  label: string;\n  isPrimaryKey: boolean;\n  isPartialKey: boolean;\n  isForeignKey: boolean;\n  isAutoincremented: boolean;\n  isNotNull: boolean;\n  isUnique: boolean;\n  propertyType: string;\n  fkPortId: string;\n\n  constructor(\n    logic: boolean,\n    name: string,\n    isNamePort: boolean,\n    isPrimaryKey?: boolean,\n    isForeignKey?: boolean,\n    isPartialKey?: boolean,\n    isNotNull?: boolean,\n    isAutoincremented?: boolean,\n    isUnique?: boolean,\n    propertyType?: string,\n    id?: string,\n    fkPortId?: string,\n    alignemnt?: PortModelAlignment\n  ) {\n    super({\n      id: id || Toolkit.UID(),\n      in: true,\n      name,\n      label: name,\n      alignment: alignemnt,\n      type: logic ? \"arrow\" : \"default\",\n    });\n\n    this.label = name;\n    this.isNamePort = isNamePort;\n    this.links = {};\n\n    this.isPrimaryKey = isPrimaryKey;\n    this.isForeignKey = isForeignKey;\n    this.isPartialKey = isPartialKey;\n\n    this.isNotNull = isNotNull;\n    this.isUnique = isUnique;\n    this.isAutoincremented = isAutoincremented;\n\n    this.propertyType = propertyType;\n    this.fkPortId = fkPortId;\n  }\n\n  deserialize(event: any) {\n    super.deserialize(event);\n    this.options.in = event.data.in;\n    this.options.label = event.data.label;\n\n    this.label = event.data.label;\n    this.isNamePort = event.data.isNamePort;\n\n    this.isPrimaryKey = event.data.isPrimaryKey;\n    this.isPartialKey = event.data.isPartialKey;\n\n    this.isForeignKey = event.data.isForeignKey;\n    this.isNotNull = event.data.isNotNull;\n    this.isUnique = event.data.isUnique;\n    this.isAutoincremented = event.data.isAutoincremented;\n    this.propertyType = event.data.propertyType;\n    this.fkPortId = event.data.fkPortId;\n  }\n\n  serialize() {\n    return {\n      ...super.serialize(),\n      in: this.in,\n      label: this.label,\n      isNamePort: this.isNamePort,\n      isPrimaryKey: this.isPrimaryKey,\n      isPartialKey: this.isPartialKey,\n\n      isForeignKey: this.isForeignKey,\n      isNotNull: this.isNotNull,\n      isUnique: this.isUnique,\n      isAutoincremented: this.isAutoincremented,\n      propertyType: this.propertyType,\n      fkPortId: this.fkPortId,\n    };\n  }\n\n  link<T extends LinkModel>(\n    port: PortModel,\n    factory?: AbstractModelFactory<T>\n  ): T {\n    let link = this.createLinkModel(factory);\n    link.setSourcePort(this);\n    link.setTargetPort(port);\n    link.removeMiddlePoints()\n    return link as T;\n  }\n\n  canLinkToPort(port: PortModel): boolean {\n    if (port === this) {\n      return false;\n    }\n    if( port.getParent() === this.getParent()) {\n      this.recursiveRelation(port);\n    }\n\n    return true;\n  }\n\n  createLinkModel(factory?: AbstractModelFactory<LinkModel>): LinkModel {\n    let link = super.createLinkModel();\n    if (!link && factory) {\n      return factory.generateModel({});\n    }\n    return link || new DefaultLinkModel({}, {position: {x: this.getPosition().x + 40, y: this.getPosition().y - 100 }});\n  }\n\n  recursiveRelation(port: PortModel) {\n    this.link(port);\n\n    return false;\n  }\n}\n","import {\n  LinkModel,\n  LinkModelGenerics,\n  PortModel,\n  PortModelAlignment,\n} from \"@projectstorm/react-diagrams\";\nimport { ArrowLinkModel } from \"./ArrowLinkModel\";\nimport { DefaultPortModel } from \"./DefaultPortModel\";\nimport { DefaultNodeModel } from \"./DefaultNodeModel\";\nimport { Toolkit } from \"../Toolkit\";\nimport { AbstractModelFactory } from \"@projectstorm/react-canvas-core\";\n\nexport class AdvancedPortModel extends DefaultPortModel {\n  constructor(\n    name: string,\n    isNamePort: boolean,\n    isPrimaryKey?: boolean,\n    isForeignKey?: boolean,\n    isPartialKey?: boolean,\n    isNotNull?: boolean,\n    isAutoincremented?: boolean,\n    isUnique?: boolean,\n    propertyType?: string,\n    id?: string,\n    fkPortId?: string,\n    alignemnt?: PortModelAlignment\n  ) {\n    super(\n      true,\n      name,\n      isNamePort,\n      isPrimaryKey,\n      isForeignKey,\n      isPartialKey,\n      isNotNull,\n      isAutoincremented,\n      isUnique,\n      propertyType,\n      id,\n      fkPortId,\n      alignemnt\n    );\n  }\n\n  link<T extends LinkModel>(\n    port: PortModel,\n    \n    factory?: AbstractModelFactory<T>\n  ): T {\n    let link = this.createLinkModel();\n    link.setSourcePort(port);\n    link.setTargetPort(this);\n    return link as T;\n  }\n\n  canLinkToPort(port: PortModel): boolean {\n    if (port === this) {\n      return false;\n    }\n\n    let thisParent = this.getParent() as DefaultNodeModel;\n    let portNode = port.getParent() as DefaultNodeModel;\n\n    let portNodePorts = portNode.getPorts() as {\n      [s: string]: AdvancedPortModel;\n    };\n    let thisParentPorts = thisParent.getPorts() as {\n      [s: string]: AdvancedPortModel;\n    };\n\n    let czyMaPortZPKjakoFk = Object.keys(thisParentPorts).find(\n      (id) => thisParentPorts[id].fkPortId === portNode.getOptions().id\n    );\n    let czyMaPortZPKjakoFk2 = Object.keys(portNodePorts).find(\n      (id) => portNodePorts[id].fkPortId === thisParent.getOptions().id\n    );\n\n    let pk =\n      Object.keys(thisParentPorts).find(\n        (id) => thisParentPorts[id].isPrimaryKey\n      ) || \"Id\";\n\n    if (!czyMaPortZPKjakoFk && !czyMaPortZPKjakoFk2) {\n      if (pk) {\n        portNode.addPort(\n          new AdvancedPortModel(\n            thisParent.getOptions().name +\n              thisParentPorts[pk].getOptions().name,\n            false,\n            false,\n            true,\n            true,\n            true,\n            false,\n            false,\n            \"INT\",\n            Toolkit.UID(),\n            thisParent.getOptions().id\n          )\n        );\n      } else {\n        portNode.addPort(\n          new AdvancedPortModel(\n            thisParent.getOptions().name + \"Id\",\n            false,\n            false,\n            true,\n            true,\n            true,\n            false,\n            false,\n            \"INT\",\n            Toolkit.UID(),\n            thisParent.getOptions().id\n          )\n        );\n      }\n    }\n\n    return true;\n  }\n\n  createLinkModel(): ArrowLinkModel | LinkModel<LinkModelGenerics> {\n    return new ArrowLinkModel();\n  }\n}\n","import * as React from \"react\";\nimport styled from \"@emotion/styled\";\nimport { css } from \"@emotion/core\";\n\nexport interface TrayItemDivProps {\n  color: string;\n  name?: string;\n  onClick: () => void;\n  marginTop?: string;\n  isSelected?: boolean;\n  isDisabled?: boolean;\n}\nnamespace S {\n  export const Tray = styled.div<{\n    color: string;\n    marginTop: string;\n    isSelected: boolean;\n    isDisabled: boolean;\n  }>`\n    color: white;\n    font-family: Helvetica, Arial;\n    padding: 5px;\n    margin: 0px 10px;\n    border: solid 1px ${({color}) => color};\n    border-radius: 5px;\n    margin-bottom: 2px;\n    cursor: pointer;\n    margin-top: ${({marginTop}) => marginTop};\n\n    display: flex;\n    justify-content: space-between;\n  \n    ${({isSelected}) =>\n      isSelected &&\n      css`\n        background-color: black;\n        border-width: 4px !important;\n      `}\n  \n    ${({isDisabled}) =>\n      isDisabled &&\n      css`\n        cursor: not-allowed !important;\n      `}\n  `;\n}\n\nexport class TrayItemDiv extends React.Component<TrayItemDivProps> {\n  render() {\n    let { isDisabled,isSelected, marginTop, color, name } = this.props;\n\n    return (\n      <S.Tray\n        {...this.props}\n        isDisabled={isDisabled}\n        isSelected={isSelected}\n        marginTop={marginTop}\n        color={color}\n      >\n        {this.props.children ?? name}\n      </S.Tray>\n    );\n  }\n}\n","export enum PropertyType {\n  BIT = \"BIT\",\n  TINYINT = \"TINYINT\",\n  SMALLINT = \"SMALLINT\",\n  INT = \"INT\",\n  BIGINT = \"BIGINT\",\n  \"DECIMAL()\" = \"DECIMAL()\",\n  \"NUMERIC()\" = \"NUMERIC()\",\n  \"FLOAT()\" = \"FLOAT()\",\n  REAL = \"REAL\",\n  DATE = \"DATE\",\n  TIME = \"TIME\",\n  DATETIME = \"DATETIME\",\n  TIMESTAMP = \"TIMESTAMP\",\n  YEAR = \"YEAR\",\n  \"CHAR()\" = \"CHAR()\",\n  \"VARCHAR()\" = \"VARCHAR()\",\n  TEXT = \"TEXT\",\n  \"NCHAR()\" = \"NCHAR()\",\n  \"NVARCHAR()\" = \"NVARCHAR()\",\n  NTEXT = \"NTEXT\",\n  \"BINARY()\" = \"BINARY()\",\n  \"VARBINARY()\" = \"VARBINARY()\",\n  IMAGE = \"IMAGE\",\n  CLOB = \"CLOB\",\n  BLOB = \"BLOB\",\n  XML = \"XML\",\n  JSON = \"JSON\",\n  MONEY = \"MONEY\",\n}\n","import * as React from \"react\";\n\nimport { GridProps } from \"./\";\n\nexport default class Grid extends React.Component<GridProps> {\n  render() {\n    return (\n      <div style={this.props.style} className={this.buildClassNameString()}>\n        {this.props.children}\n      </div>\n    );\n  }\n\n  buildClassNameString() {\n    let className = \"ms-Grid\";\n\n    if (this.props.className != null) {\n      className += ` ${this.props.className}`;\n    }\n\n    return className;\n  }\n}\n","import * as React from \"react\";\n\nimport { GridRowProps } from \"./\";\n\nexport default class Row extends React.Component<GridRowProps> {\n  render() {\n    return (\n      <div className={this.buildClassNameString()}>{this.props.children}</div>\n    );\n  }\n\n  buildClassNameString() {\n    let className = \"ms-Grid-row\";\n\n    if (this.props.flex) {\n      className += \" grid-row-flex\";\n    }\n\n    if (this.props.className != null) {\n      className += ` ${this.props.className}`;\n    }\n\n    return className;\n  }\n}\n","import * as React from \"react\";\n\nimport { GridColProps, GridColConfigProp } from \"./\";\n\nexport default class Col extends React.Component<GridColProps> {\n  render() {\n    return (\n      <div\n        className={this.buildClassNameString()}\n        onDoubleClick={this.props.onDoubleClick}\n      >\n        {this.props.children}\n      </div>\n    );\n  }\n\n  buildGridColConfigClassNames(size: string, config: GridColConfigProp) {\n    if (config == null) return \"\";\n\n    let className = ` ms-${size}`;\n\n    if (typeof config === \"string\") {\n      className += config;\n    } else {\n      className += config.size;\n\n      if (config.pull != null) {\n        className += ` ms-${size}Pull${config.pull}`;\n      }\n\n      if (config.push != null) {\n        className += ` ms-${size}Push${config.push}`;\n      }\n\n      if (config.offset != null) {\n        className += ` ms-${size}Offset${config.offset}`;\n      }\n\n      if (config.order != null) {\n        className += ` grid-flex-order-${size}-${config.order}`;\n      }\n    }\n\n    return className;\n  }\n\n  buildClassNameString() {\n    let className = \"ms-Grid-col\";\n\n    if (this.props.className != null) {\n      className += ` ${this.props.className}`;\n    }\n\n    if (this.props.hidden != null) {\n      className += ` ms-hidden${this.props.hidden}`;\n    }\n\n    if (this.props.order != null) {\n      className += ` grid-flex-order-${this.props.order}`;\n    }\n\n    className += this.buildGridColConfigClassNames(\"sm\", this.props.sm);\n    className += this.buildGridColConfigClassNames(\"md\", this.props.md);\n    className += this.buildGridColConfigClassNames(\"lg\", this.props.lg);\n    className += this.buildGridColConfigClassNames(\"xl\", this.props.xl);\n    className += this.buildGridColConfigClassNames(\"xxl\", this.props.xxl);\n    className += this.buildGridColConfigClassNames(\"xxxl\", this.props.xxxl);\n\n    return className;\n  }\n}\n","import \"./PropertyTable.scss\";\nimport \"react-bootstrap-table-next/dist/react-bootstrap-table2.min.css\";\nimport React from \"react\";\nimport { PropertyType } from \"../../infrastructure/models/PropertyType\";\nimport { DefaultPortModel } from \"../../infrastructure/models/DefaultPortModel\";\nimport BootstrapTable from \"react-bootstrap-table-next\";\nimport { DefaultNodeModel } from \"../../infrastructure/models/DefaultNodeModel\";\nimport { DiagramEngine } from \"@projectstorm/react-diagrams\";\nimport { AdvancedPortModel } from \"../../infrastructure/models/ArrowPortModel\";\nimport styled from \"@emotion/styled\";\nimport { DarkInput } from \"../DarkInput\";\nimport { Toolkit } from \"../../infrastructure/Toolkit\";\nimport { DefaultLinkModel } from \"../../infrastructure/models/DefaultLinkModel\";\nimport { DefaultLabelModel } from \"../../infrastructure/models/DefaultLabelModel\";\n\nnamespace S {\n  export const AddNewAtributeButton = styled.p`\n    cursor: cell\n  `;\n}\n\nclass Props {\n  relationName?: string;\n  update: () => void;\n  selectedItem: DefaultNodeModel;\n  diagramEngine: DiagramEngine;\n  relView?: boolean;\n  link?: DefaultLinkModel;\n  isLogic: boolean;\n}\n\nexport function useForceUpdate() {\n  const [, setValue] = React.useState(0);\n  return () => setValue((value) => ++value);\n}\n\nexport const PropertyTable = (props: Props) => {\n  const [updatedItem, setUpdatedItem] = React.useState(null);\n\n  const forceUpdate = useForceUpdate();\n\n  React.useMemo(() => {\n    setUpdatedItem(props.selectedItem);\n  }, [props.selectedItem]);\n\n  const clearPartialKeys = () => {\n    let ports =\n      updatedItem &&\n      updatedItem.ports &&\n      (updatedItem.ports as { [s: string]: DefaultPortModel });\n\n    Object.keys(ports).map((p) => console.log((ports[p].isPartialKey = false)));\n  };\n\n  const handleChangePK = (\n    event: React.ChangeEvent<HTMLInputElement>,\n    row: DefaultPortModel\n  ) => {\n    event.persist();\n    (updatedItem.getPortFromID(\n      row.getOptions().id\n    ) as DefaultPortModel).isPrimaryKey = !row.isPrimaryKey;\n\n    (updatedItem.getPortFromID(\n      row.getOptions().id\n    ) as DefaultPortModel).isNotNull = row.isPrimaryKey ? true : false;\n\n    (updatedItem.getPortFromID(\n      row.getOptions().id\n    ) as DefaultPortModel).isAutoincremented = row.isPrimaryKey ? true : false;\n\n    (updatedItem.getPortFromID(\n      row.getOptions().id\n    ) as DefaultPortModel).isUnique = row.isPrimaryKey ? true : false;\n\n    clearPartialKeys();\n    forceUpdate();\n  };\n\n  const handleChangeFK = (\n    event: React.ChangeEvent<HTMLInputElement>,\n    row: DefaultPortModel\n  ) => {\n    event.persist();\n    (updatedItem.getPortFromID(\n      row.getOptions().id\n    ) as DefaultPortModel).isForeignKey = !row.isForeignKey;\n\n    (updatedItem.getPortFromID(\n      row.getOptions().id\n    ) as DefaultPortModel).isNotNull = row.isForeignKey ? true : false;\n\n    forceUpdate();\n  };\n\n  const handleChangeNull = (\n    event: React.ChangeEvent<HTMLInputElement>,\n    row: DefaultPortModel\n  ) => {\n    event.persist();\n    (updatedItem.getPortFromID(\n      row.getOptions().id\n    ) as DefaultPortModel).isNotNull = !row.isNotNull;\n    forceUpdate();\n  };\n\n  const handleChangePartialKey = (\n    event: React.ChangeEvent<HTMLInputElement>,\n    row: DefaultPortModel\n  ) => {\n    event.persist();\n    (updatedItem.getPortFromID(\n      row.getOptions().id\n    ) as DefaultPortModel).isPartialKey = !row.isPartialKey;\n\n    (updatedItem.getPortFromID(\n      row.getOptions().id\n    ) as DefaultPortModel).isNotNull = row.isPartialKey ? true : false;\n    forceUpdate();\n  };\n\n  const handleChangeUnique = (\n    event: React.ChangeEvent<HTMLInputElement>,\n    row: DefaultPortModel\n  ) => {\n    event.persist();\n    (updatedItem.getPortFromID(\n      row.getOptions().id\n    ) as DefaultPortModel).isUnique = !row.isUnique;\n    forceUpdate();\n  };\n\n  const handleChangeAutoInc = (\n    event: React.ChangeEvent<HTMLInputElement>,\n    row: DefaultPortModel\n  ) => {\n    event.persist();\n    (updatedItem.getPortFromID(\n      row.getOptions().id\n    ) as DefaultPortModel).isAutoincremented = !row.isAutoincremented;\n    forceUpdate();\n  };\n\n  const handleChangepPropType = (\n    event: React.ChangeEvent<HTMLInputElement>,\n    row: DefaultPortModel\n  ) => {\n    event.persist();\n\n    (updatedItem.getPortFromID(\n      row.getOptions().id\n    ) as DefaultPortModel).propertyType = event.target.value;\n  };\n\n  const handleChangePortLabel = (\n    event: React.ChangeEvent<HTMLInputElement>,\n    row: DefaultPortModel\n  ) => {\n    event.persist();\n    (updatedItem.getPortFromID(row.getOptions().id) as DefaultPortModel).label =\n      event.target.value;\n\n    if(props.relView) {\n      let relationAtributes = props.link.properties !== null && props.link.properties.getPorts() as {[s: string]: DefaultPortModel};\n      let attString = '';\n  \n      if(Object.keys(relationAtributes).length > 0) {\n        Object.keys(relationAtributes).map(id => attString += `${relationAtributes[id].label} ${relationAtributes[id].propertyType} \\n`);\n        \n  \n        let labels = props.link.getLabels() as DefaultLabelModel[];\n        labels[1].getOptions().label = `${props.relationName}\\n${attString}`;\n    \n      }\n    }\n  };\n\n  const addNewPort = (newPortNumber: number) => {\n    (updatedItem as DefaultNodeModel).addPort(\n      new AdvancedPortModel(\n        `new atribute ${newPortNumber}`,\n        false,\n        false,\n        false,\n        false,\n        false,\n        false,\n        false,\n        \"INT\",\n        Toolkit.UID()\n      )\n    );\n\n    if(props.relView) {\n      let {link} = props;\n      let labels = link.getLabels() as DefaultLabelModel[];\n      \n      labels[1].getOptions().label += `${`new atribute ${newPortNumber}`} INT \\n`;\n    }\n\n    forceUpdate();\n  };\n\n  const removePort = (port: DefaultPortModel) => {\n    updatedItem.removePort(port);\n    let relationAtributes = props.link.properties !== null && props.link.properties.getPorts() as {[s: string]: DefaultPortModel};\n    let attString = '';\n\n    if(Object.keys(relationAtributes).length > 0) {\n      Object.keys(relationAtributes).filter(id => id !== port.getID()).map(id => attString += `${relationAtributes[id].label} ${relationAtributes[id].propertyType} \\n`);\n      \n      let labels = props.link.getLabels() as DefaultLabelModel[];\n      let oldLabel = labels[1].getOptions().label;\n      labels[1].getOptions().label = oldLabel.slice(0, oldLabel.indexOf('\\n'));\n      labels[1].getOptions().label += `\\n${attString}`;\n    }\n\n    forceUpdate();\n  };\n\n  const preparePropertyTypes = () => {\n    return Object.values(PropertyType).map((obj) => (\n      <option key={obj} value={obj}>\n        {obj}\n      </option>\n    ));\n  };\n\n  const columns: any[] = [\n    {\n      dataField: \"label\",\n      text: \"Property Name\",\n      formatter: (cellContent: any, row: DefaultPortModel) => (\n        <div className=\"input\">\n          {/* <DarkInput \n            type=\"text\" \n            defaultValue={row.label} \n            onChange={(event) => handleChangePortLabel(event, row)}\n          ></DarkInput> */}\n\n          <input\n            style={{ width: \"100px\" }}\n            className=\"darkInput\"\n            type=\"text\"\n            defaultValue={row.label}\n            onChange={(event) => handleChangePortLabel(event, row)}\n          ></input>\n        </div>\n      ),\n    },\n    {\n      style: { paddingLeft: 0 },\n      dataField: \"propertyType\",\n      text: \"Property Type\",\n      formatter: (cellContent: any, row: DefaultPortModel) => (\n        <div className=\"input\">\n          <input\n            style={{ width: \"100px\" }}\n            type=\"text\"\n            list=\"types\"\n            className=\"darkInput\"\n            onChange={(event) => handleChangepPropType(event, row)}\n            defaultValue={row.propertyType}\n          />\n          <datalist id=\"types\">{preparePropertyTypes()}</datalist>\n        </div>\n      ),\n    },\n    {\n      dataField: \"isPrimaryKey\",\n      text: \"Is Primary Key\",\n      formatter: (cellContent: any, row: DefaultPortModel) => (\n        <div className=\"checkbox\">\n          <label>\n            <input\n              type=\"checkbox\"\n              checked={row.isPrimaryKey}\n              onChange={(event) => handleChangePK(event, row)}\n            />\n          </label>\n        </div>\n      ),\n    },\n    {\n      dataField: \"isForeignKey\",\n      text: \"Is Foreign Key\",\n      formatter: (cellContent: any, row: DefaultPortModel) => (\n        <div className=\"checkbox\">\n          <label>\n            <input\n              type=\"checkbox\"\n              checked={row.isForeignKey}\n              onChange={(event) => handleChangeFK(event, row)}\n            />\n          </label>\n        </div>\n      ),\n    },\n    {\n      dataField: \"isPartialKey\",\n      text: \"Is Partial Key\",\n      formatter: (cellContent: any, row: DefaultPortModel) => (\n        <div className=\"checkbox\">\n          <label>\n            <input\n              type=\"checkbox\"\n              checked={row.isPartialKey}\n              onChange={(event) => handleChangePartialKey(event, row)}\n            />\n          </label>\n        </div>\n      ),\n    },\n    {\n      dataField: \"isNotNull\",\n      text: \"Not Null\",\n      formatter: (cellContent: any, row: DefaultPortModel) => (\n        <div className=\"checkbox\">\n          <label>\n            <input\n              disabled={row.isPrimaryKey || row.isForeignKey}\n              type=\"checkbox\"\n              checked={row.isNotNull}\n              onChange={(event) => handleChangeNull(event, row)}\n            />\n          </label>\n        </div>\n      ),\n    },\n    {\n      dataField: \"isAutoincremented\",\n      text: \"Is Auto Incremented\",\n      formatter: (cellContent: any, row: DefaultPortModel) => (\n        <div className=\"checkbox\">\n          <label>\n            <input\n              disabled={row.isPrimaryKey}\n              type=\"checkbox\"\n              checked={row.isAutoincremented}\n              onChange={(event) => handleChangeAutoInc(event, row)}\n            />\n          </label>\n        </div>\n      ),\n    },\n    {\n      dataField: \"isUnique\",\n      text: \"Is Unique\",\n      formatter: (cellContent: any, row: DefaultPortModel) => (\n        <div className=\"checkbox\">\n          <label>\n            <input\n              disabled={row.isPrimaryKey}\n              type=\"checkbox\"\n              checked={row.isUnique}\n              onChange={(event) => handleChangeUnique(event, row)}\n            />\n          </label>\n        </div>\n      ),\n    },\n    {\n      dataField: \"remove\",\n      text: \"Remove\",\n      formatter: (cellContent: any, row: DefaultPortModel) => (\n        <div className=\"checkbox\">\n          <label>\n            <span\n              onClick={() => removePort(row)}\n              className=\"mi mi-Delete red\"\n            />\n          </label>\n        </div>\n      ),\n    },\n  ];\n\n  let ports =\n    updatedItem &&\n    updatedItem.ports &&\n    (updatedItem.ports as { [s: string]: DefaultPortModel });\n\n  let portsTable: DefaultPortModel[] =\n    ports &&\n    Object.keys(ports)\n      .map((x) => {\n        return ports[x];\n      })\n      .filter((p) => !p.isNamePort);\n\n  let ispk =\n    portsTable && portsTable.find((p) => p.isPrimaryKey) ? true : false;\n\n  let cols = columns;\n\n  if (ispk) {\n    cols = cols.filter((col) => col.dataField !== \"isPartialKey\");\n  }\n\n  if (!props.isLogic) {\n    cols = cols.filter((c) => c.dataField !== \"isForeignKey\");\n  }\n\n  return (\n    <div className={`${!props.relView && 'relView'}`}>\n      <BootstrapTable\n        keyField=\"id\"\n        data={portsTable}\n        columns={\n          props.relView\n            ? cols.filter(\n                (col) =>\n                  col.dataField !== \"isPrimaryKey\" &&\n                  col.dataField !== \"isPartialKey\"\n              )\n            : cols\n        }\n        bordered={false}\n      />\n      <S.AddNewAtributeButton onClick={() => addNewPort(portsTable.length)}>\n        Add new atribute\n        </S.AddNewAtributeButton>\n    </div>\n  );\n};\n","import * as React from \"react\";\nimport styled from \"@emotion/styled\";\nimport { css } from \"@emotion/core\";\n\nexport interface DarkInputProps {\n    fontSize?: number\n    type: string\n    defaultValue: string\n    onChange: (event) => void;\n}\nnamespace S {\n  export const Input = styled.input<{fontSize?: number}>`\n    background-color: #3E3E3E;\n    color: #E9F7F7;\n    margin-top: 7px;\n    width: 150px;\n    margin-right: 0px;\n    padding-right: 0px;\n\n    ${({fontSize}) => \n    css`\n        font-size: ${fontSize}px;\n        margin-top: 15px;\n        width: 90%;\n    `}\n  `;\n}\n\nexport class DarkInput extends React.Component<DarkInputProps> {\n  render() {\n\n    return (\n      <S.Input\n        {...this.props}\n      >\n        {this.props.children}\n      </S.Input>\n    );\n  }\n}\n","import \"./NodeProperties.scss\";\nimport * as React from \"react\";\n\nimport { Col, Row, Grid } from \"../grid\";\nimport { DiagramEngine } from \"@projectstorm/react-diagrams\";\nimport { DefaultNodeModel } from \"../../infrastructure/models/DefaultNodeModel\";\nimport { PropertyTable } from \"../PropertyTable/PropertyTable\";\nimport { DarkInput } from \"../DarkInput\";\n\nclass Props {\n  update: () => void;\n\n  selectedItem: DefaultNodeModel;\n  isLogic: boolean;\n  diagramEngine: DiagramEngine;\n}\n\nexport function useForceUpdate() {\n  const [, setValue] = React.useState(0);\n  return () => setValue((value) => ++value);\n}\n\nexport const NodeProperties = (props: Props) => {\n  const [updatedItem, setUpdatedItem] = React.useState(null);\n  const [defaultName, setDefaultName] = React.useState(\"\");\n\n  const [name, setName] = React.useState(\"\");\n  const [showInput, setShowInput] = React.useState(false);\n\n  const forceUpdate = useForceUpdate();\n\n  React.useMemo(() => {\n    setUpdatedItem(props.selectedItem);\n    setName(props.selectedItem.getOptions().name);\n    setDefaultName(props.selectedItem.getOptions().name);\n  }, [props.selectedItem]);\n\n  React.useEffect(() => {\n    props.selectedItem.setLocked();\n\n    return () => {\n      props.selectedItem.setLocked(false);\n    };\n  });\n\n  const handleNameChange = (\n    event: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>\n  ) => {\n    event.persist();\n    let allNodes = props.diagramEngine\n      .getModel()\n      .getNodes() as DefaultNodeModel[];\n\n    let names = allNodes.map((node) =>\n      node.getOptions().name.toLowerCase().trim()\n    );\n\n    names.includes(event.target.value.toLowerCase().trim())\n      ? (updatedItem.getOptions().name = defaultName)\n      : (updatedItem.getOptions().name = event.target.value.trim());\n    forceUpdate();\n  };\n\n  // const iconStyles: React.CSSProperties = {\n  //   display: \"flex\",\n  //   flexDirection: \"row\",\n  //   flexFlow: \"row-reverse\",\n  //   position: \"absolute\",\n  //   right: \"0\",\n  //   top: \"10px\",\n  //   zIndex: 9999,\n  // };\n\n  // const acceptStyle: React.CSSProperties = {\n  //   marginRight: 5,\n  //   backgroundColor: \"green\",\n  //   borderRadius: \"90px\",\n  //   padding: \"10px\",\n  // };\n\n  // const declineStyle: React.CSSProperties = {\n  //   marginRight: \"20px\",\n  //   backgroundColor: \"red\",\n  //   borderRadius: \"90px\",\n  //   padding: \"10px\",\n  // };\n\n  if (!updatedItem) return null;\n  else\n    return (\n      <div className=\"trayBottom\">\n        {/* <div style={iconStyles}>\n              <span\n                style={declineStyle}\n                className={`mi ${\n                  \"mi-Cancel\"\n                }`}\n              />\n                <span\n                  style={acceptStyle}\n                  className={`mi ${\n                    \"mi-Accept\"\n                  }`}\n                />\n            </div> */}\n        <Grid>\n          <Row>\n            <Col>\n              {!showInput ? (\n                <h1\n                  style={{ wordBreak: \"break-all\" }}\n                  onDoubleClick={() => setShowInput(true)}\n                >\n                  {name}\n                </h1>\n              ) : props.selectedItem.isLabel ? (\n                <textarea\n                  style={{ height: \"200px\" }}\n                  className=\"darkInput fs-28\"\n                  defaultValue={name}\n                  onChange={(event) => handleNameChange(event)}\n                ></textarea>\n              ) : (\n\n                 <DarkInput\n                  fontSize={28}\n                  type=\"text\"\n                  defaultValue={name}\n                  onChange={(event) => handleNameChange(event)}\n                  ></DarkInput> \n              )}\n            </Col>\n\n            {!updatedItem.isLabel ? (\n              <PropertyTable\n              update={props.update}\n                selectedItem={props.selectedItem}\n                diagramEngine={props.diagramEngine}\n                isLogic={props.isLogic}\n              />\n            ) : null}\n          </Row>\n        </Grid>\n      </div>\n    );\n};\n","import \"./ResultPopup.scss\";\nimport React, { useState } from \"react\";\nimport Popup from \"reactjs-popup\";\nimport sqlFormatter from \"sql-formatter\";\nimport FileSaver from \"file-saver\";\n\nclass Props {\n  isOpen: boolean;\n  generateScript?: (name: string) => void;\n  mssqlString: string;\n  mysqlString: string;\n  update: () => void;\n}\n\nexport const ResultPopup = (props: Props) => {\n  const [dbName, setDbName] = useState(\"DatabaseName\");\n  const [mySQLView, setmySQLView] = useState(false);\n\n  let formatedMSSQL =\n    props.mssqlString &&\n    sqlFormatter.format(props.mssqlString, {\n      language: \"sql\", // Defaults to \"sql\"\n      indent: \"  \", // Defaults to two spaces\n    });\n\n  let formatedMySQL =\n    props.mysqlString &&\n    sqlFormatter.format(props.mysqlString, {\n      language: \"db2\", // Defaults to \"sql\"\n      indent: \"  \", // Defaults to two spaces\n    });\n\n  // useEffect(() => {\n  //   formatedMSSQL = '';\n  //   formatedMySQL = '';\n  // }, [props.mssqlString, props.mysqlString])\n\n  const downloadMSSQL = () => {\n    var blob = new Blob([formatedMSSQL], { type: \"text/plain;charset=utf-8\" });\n    FileSaver.saveAs(blob, `${dbName}.sql`);\n    props.update();\n  };\n\n  const downloadMYSQL = () => {\n    var blob = new Blob([formatedMySQL], { type: \"text/plain;charset=utf-8\" });\n    FileSaver.saveAs(blob, `${dbName}.sql`);\n    props.update();\n  };\n\n  return (\n    <Popup modal closeOnDocumentClick open={props.isOpen} closeOnEscape>\n      <div className=\"sql-result-dialog\">\n        <input\n          style={{ marginRight: \"10px\" }}\n          type=\"text\"\n          onChange={(event) => setDbName(event.target.value)}\n          value={dbName}\n        />\n\n        <button\n          style={{ marginRight: \"10px\" }}\n          onClick={() => {\n            props.generateScript(dbName);\n          }}\n        >\n          Generate\n        </button>\n\n        <button\n          className={`${mySQLView ? \"\" : \"selected-sql\"}`}\n          onClick={() => {\n            setmySQLView(false);\n          }}\n        >\n          MSSQL\n        </button>\n\n        <button\n          className={`${mySQLView ? \"selected-sql\" : \"\"}`}\n          onClick={() => {\n            setmySQLView(true);\n          }}\n        >\n          MySQL\n        </button>\n\n        <textarea\n          style={{ marginTop: \"5px\" }}\n          readOnly={true}\n          value={mySQLView ? formatedMySQL : formatedMSSQL}\n          contentEditable={false}\n        ></textarea>\n\n        <button style={{ marginRight: \"10px\" }} onClick={downloadMSSQL}>\n          Download MSSQL\n        </button>\n        <button style={{ marginRight: \"10px\" }} onClick={downloadMYSQL}>\n          Download mySQL\n        </button>\n      </div>\n    </Popup>\n  );\n};\n","import { ResultPopup } from \"../components/popups/ResultPopup/ResultPopup\";\nimport React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\n\nclass Props {\n  isUml: boolean;\n  isLogic: boolean;\n  isOpen: boolean;\n  serializeDiagram: () => any;\n  update: () => void;\n}\n\nexport const GenerationHandler = (props: Props) => {\n  const [sqlString, setSqlString] = useState(\"\");\n  const [mysqlString, setMySqlString] = useState(\"\");\n\n  useEffect(() => setSqlString(\"\"), [props.isOpen]);\n\n  const generateScript = async (name: string) => {\n    const serDiagram = props.serializeDiagram();\n    const dNodes = serDiagram[\"layers\"][1][\"models\"];\n\n    const nodes = Object.keys(dNodes).map((id) => {\n      return dNodes[id];\n    });\n\n    const dLinks = serDiagram[\"layers\"][0][\"models\"];\n    const links = Object.keys(dLinks).map((id) => {\n      return dLinks[id];\n    });\n\n    // if(!props.isLogic) {\n    //   links.map((l: any) => {\n    //     l.labels[1].label = l.relName;\n    //   });\n    // }\n\n\n    const diagramJson = {\n      nodes,\n      links,\n    };\n    const diagram = JSON.stringify(diagramJson, null, 2);\n\n    console.log('daioghram', diagram,  props.isLogic)\n\n    const response = await axios.post(\n      \"https://sql-generator.pl/api/setjob/mssql\",\n      {\n        // let response = await axios.post(\"https://51.83.185.113/api/setjob/mssql\", {\n        // let response = await axios.post(\"http://localhost:5000/api/setjob/mssql\", {\n\n        SerializedModel: diagram,\n        DatabaseName: name,\n        RelationType: props.isUml ? \"UML\" : \"CHEN\"\n      }\n    );\n\n    const responseMy = await axios.post(\n      \"https://sql-generator.pl/api/setjob/mysql\",\n      {\n        // let responseMy = await axios.post(\"http://localhost:5000/api/setjob/mysql\", {\n        SerializedModel: diagram,\n        DatabaseName: name,\n        RelationType: props.isUml ? \"UML\" : \"CHEN\"\n      }\n    );\n\n    if (response.status === 200 && responseMy.status === 200) {\n      setSqlString(response.data);\n      setMySqlString(responseMy.data);\n    } else {\n      setSqlString(\"There was an error while processing your request\");\n      setMySqlString(\"There was an error while processing your request\");\n\n      console.log(\"there was an error while processing your request\");\n    }\n  };\n\n  return (\n    <ResultPopup\n      update={props.update}\n      mssqlString={sqlString}\n      mysqlString={mysqlString}\n      generateScript={(name) => generateScript(name)}\n      isOpen={props.isOpen}\n    />\n  );\n};\n","import \"./LoadFilePopup.scss\";\nimport React, { useState } from \"react\";\nimport Popup from \"reactjs-popup\";\n\nclass Props {\n  isOpen: boolean;\n  loadDiagram?: (name: string) => void;\n  update: () => void;\n}\n\nexport const LoadFilePopup = (props: Props) => {\n  let fileReader: FileReader;\n\n  const [fileContent, setFileContent] = useState(\"\");\n\n  const handleFileRead = (e: any) => {\n    const content = fileReader.result;\n    setFileContent(content as string);\n  };\n\n  const handleFileChosen = (name: any) => {\n    fileReader = new FileReader();\n    fileReader.onloadend = handleFileRead;\n    fileReader.readAsText(name);\n  };\n\n  return (\n    <Popup\n      modal\n      closeOnDocumentClick\n      open={props.isOpen}\n      closeOnEscape\n      onClose={() => props.update()}\n    >\n      <div className=\"sql-result-dialog\">\n        <input\n          type=\"file\"\n          onChange={(event) => handleFileChosen(event.target.files[0])}\n          accept=\".dbjson\"\n        />\n        <button onClick={() => props.loadDiagram(fileContent)}>Load</button>\n      </div>\n    </Popup>\n  );\n};\n","import React from \"react\";\nimport { LoadFilePopup } from \"../components/popups/LoadFilePopup/LoadFilePopup\";\nimport { Application } from \"../components/Application\";\nimport { DiagramModel } from \"@projectstorm/react-diagrams\";\n\nclass Props {\n  isOpen: boolean;\n  app: Application;\n  update: () => void;\n  setIsUml: (isUml: boolean) => void;\n  setIsLogic: (isLogic: boolean) => void;\n}\n\nexport const LoadFileHandler = (props: Props) => {\n  const loadDiagram = (name: string) => {\n    const engine = props.app.getDiagramEngine();\n    try {\n      const obj: {\n        diagram: ReturnType<DiagramModel[\"serialize\"]>;\n        isUml: boolean;\n        isLogic: boolean;\n      } = JSON.parse(name);\n\n      props.setIsUml(obj.isUml);\n      obj.isLogic ? props.setIsLogic(obj.isLogic) : props.setIsLogic(false);\n\n      let model2 = new DiagramModel();\n\n      model2.deserializeModel(obj.diagram, engine);\n\n      model2.getLinks().forEach((link) => {\n        link.getLabels().splice(0, 3);\n      });\n\n      if (obj.isLogic) {\n        props.app.loadLogicModel(model2);\n      } else {\n        props.app.loadConceptualModel(model2);\n      }\n\n      engine.repaintCanvas();\n      props.update();\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  return (\n    <LoadFilePopup\n      update={props.update}\n      loadDiagram={(name) => loadDiagram(name)}\n      isOpen={props.isOpen}\n    />\n  );\n};\n","import \"./SaveToFilePopup.scss\";\nimport React, { useState } from \"react\";\nimport Popup from \"reactjs-popup\";\nimport FileSaver from \"file-saver\";\nimport { DiagramModel } from \"@projectstorm/react-diagrams\";\n\nclass Props {\n  isUml: boolean;\n  isLogic: boolean;\n\n  isOpen: boolean;\n  diagramModel: DiagramModel;\n  update: () => void;\n}\n\nexport const SaveToFilePopup = (props: Props) => {\n  const [fileName, setFileName] = useState(\"diagram\");\n\n  const download = () => {\n    const diagramJson = JSON.stringify({\n      diagram: props.diagramModel.serialize(),\n      isUml: props.isUml,\n      isLogic: props.isLogic,\n    });\n\n    let blob = new Blob([diagramJson], { type: \"text/plain;charset=utf-8\" });\n    FileSaver.saveAs(blob, `${fileName}.dbjson`);\n    props.update();\n  };\n\n  return (\n    <Popup\n      modal\n      closeOnDocumentClick\n      open={props.isOpen}\n      closeOnEscape\n      onClose={() => props.update()}\n    >\n      <div className=\"sql-result-dialog\">\n        <input\n          type=\"text\"\n          onChange={(event) => setFileName(event.target.value)}\n          value={fileName}\n        />\n        <button onClick={download}>save</button>\n      </div>\n    </Popup>\n  );\n};\n","import \"./SaveToJpegPopup.scss\";\nimport React, { useState } from \"react\";\nimport Popup from \"reactjs-popup\";\nimport domtoimage from \"dom-to-image\";\nimport { DiagramModel } from \"@projectstorm/react-diagrams\";\n\nclass Props {\n  isOpen: boolean;\n  diagramModel: DiagramModel;\n  update: () => void;\n}\n\nexport const SaveToJpegPopup = (props: Props) => {\n  const [fileName, setFileName] = useState(\"diagram\");\n\n  const download = () => {\n    domtoimage\n      .toJpeg(document.getElementById(\"diagram-layer\"), { quality: 0.95 })\n      .then((dataUrl: any) => {\n        let link = document.createElement(\"a\");\n        link.download = `${fileName}.jpeg`;\n        link.href = dataUrl;\n        link.click();\n        props.update();\n      });\n  };\n\n  return (\n    <Popup\n      modal\n      closeOnDocumentClick\n      open={props.isOpen}\n      closeOnEscape\n      onClose={() => props.update()}\n    >\n      <div className=\"sql-result-dialog\">\n        <input\n          type=\"text\"\n          onChange={(event) => setFileName(event.target.value)}\n          value={fileName}\n        />\n        <button onClick={download}>save</button>\n      </div>\n    </Popup>\n  );\n};\n","import React, { useState } from \"react\";\nimport Popup from \"reactjs-popup\";\nimport { DefaultLinkModel } from \"../../../infrastructure/models/DefaultLinkModel\";\nimport { DefaultLabelModel } from \"../../../infrastructure/models/DefaultLabelModel\";\nimport { DefaultNodeModel } from \"../../../infrastructure/models/DefaultNodeModel\";\nimport { AdvancedPortModel } from \"../../../infrastructure/models/ArrowPortModel\";\nimport { DiagramEngine } from \"@projectstorm/react-diagrams\";\nimport { PropertyTable } from \"../../PropertyTable/PropertyTable\";\nimport { DefaultPortModel } from \"../../../infrastructure/models/DefaultPortModel\";\nimport { ArrowLinkModel } from \"../../../infrastructure/models/ArrowLinkModel\";\nimport { Toolkit } from \"../../../infrastructure/Toolkit\";\nimport styled from \"@emotion/styled\";\n\nnamespace S {\n  export const GridContainer = styled.div`\n    display: grid;\n    grid-template-columns: auto auto auto;\n  `;\n\n  export const GridItem = styled.div`\n    background-color: rgba(255, 255, 255, 0.274);\n    padding: 10px;\n    text-align: center;\n  `;\n}\nclass Props {\n  isOpen: boolean;\n  link: DefaultLinkModel;\n  update: () => void;\n  diagramEngine: DiagramEngine;\n  isLogic: boolean;\n}\nexport const RelationPopup = (props: Props) => {\n  const [left, setLeft] = useState(\"1, N\");\n\n  const [right, setRight] = useState(\"1, N\");\n\n  const [relationAtributes, setRelationAtributes] = useState(\"\");\n  const [relationNameOnly, setRelationNameOnly] = useState(\"relation name\");\n\n\n  React.useEffect(() => {\n    let leftLabel =\n      props.link &&\n      props.link.getLabels().length > 2 &&\n      (props.link.getLabels()[0] as DefaultLabelModel).getOptions().label;\n    let relLabel =\n      props.link &&\n      props.link.getLabels().length > 2 &&\n      (props.link.getLabels()[1] as DefaultLabelModel).getOptions().label;\n    let rightLabel =\n      props.link &&\n      props.link.getLabels().length > 2 &&\n      (props.link.getLabels()[2] as DefaultLabelModel).getOptions().label;\n\n    setLeft(leftLabel ? leftLabel : \"1, N\");\n\n    setRight(rightLabel ? rightLabel : \"1, N\");\n  }, [props.link]);\n\n  let update = () => {\n    let x = handleRelationNameChenge();\n    let labels = props.link.getLabels() as DefaultLabelModel[];\n    labels[0].getOptions().label = left;\n    labels[2].getOptions().label = right;\n    labels[1].getOptions().label = relationNameOnly + `${false ? x : ''}`;\n    // dodawanie portow z relProperties nie dzialsa dla generowanego z conceptual\n\n    props.link.relName = relationNameOnly;\n\n\n    let points = props.link.getPoints();\n    for (let index = 1; index < points.length - 1; index++) {\n      const element = points[index];\n      element.remove();\n    }\n\n    setRelationAtributes(x);\n    props.update();\n  };\n\n  const handleRelationNameChenge = () => {\n    console.log(props.link.relName);\n\n    let relationAtributes = props.link.properties !== null && props.link.properties.getPorts() as {[s: string]: DefaultPortModel};\n    let attString = '';\n\n    if(Object.keys(relationAtributes).length > 0) {\n      Object.keys(relationAtributes).map(id => attString += `${relationAtributes[id].label} ${relationAtributes[id].propertyType} \\n`);\n      \n      const newRelName = '\\n' + attString;\n      return newRelName;\n    }\n      else {\n        return '';\n      }\n\n\n  }\n\n  const sourcePort =\n    props.link &&\n    props.link.getSourcePort() &&\n    (props.link.getSourcePort().getParent() as DefaultNodeModel);\n  const targetPort =\n    props.link &&\n    props.link.getTargetPort() &&\n    (props.link.getTargetPort().getParent() as DefaultNodeModel);\n\n  const remove = () => {\n    const sourceP = props.link && props.link.getSourcePort();\n    const targetP = props.link && props.link.getTargetPort();\n    sourceP.removeLink(props.link);\n    targetP.removeLink(props.link);\n\n    props.diagramEngine.getModel().removeLink(props.link);\n\n    if (props.isLogic) {\n      let thisParent = props.link\n        .getTargetPort()\n        .getParent() as DefaultNodeModel;\n      let portNode = props.link.getSourcePort().getParent() as DefaultNodeModel;\n\n      let portNodePorts = portNode.getPorts() as {\n        [s: string]: AdvancedPortModel;\n      };\n      let thisParentPorts = thisParent.getPorts() as {\n        [s: string]: AdvancedPortModel;\n      };\n\n      let czyMaPortZPKjakoFk = Object.keys(thisParentPorts).filter(\n        (id) => thisParentPorts[id].fkPortId === portNode.getOptions().id\n      )[0];\n      let czyMaPortZPKjakoFk2 = Object.keys(portNodePorts).filter(\n        (id) => portNodePorts[id].fkPortId === thisParent.getOptions().id\n      )[0];\n\n      if (czyMaPortZPKjakoFk) {\n        thisParent.removePort(thisParentPorts[czyMaPortZPKjakoFk]);\n      } else {\n        portNode.removePort(portNodePorts[czyMaPortZPKjakoFk2]);\n      }\n    }\n\n    props.update();\n  };\n\n  const options = (\n    <>\n      <option value=\"0, N\">0, N</option>\n      <option value=\"1, N\">1, N</option>\n      <option value=\"0, 1\">0, 1</option>\n      <option value=\"1, 1\">1, 1</option>\n      <option value=\"N, N\">N, N</option>\n    </>\n  );\n\n  const renderOptionPicker = (side: string) => {\n    return (\n      // <div className=\"grid-item\">\n      <S.GridItem>\n\n        <select\n          className=\"darkSelect\"\n          onChange={(event) =>\n            side === \"left\"\n              ? setLeft(event.target.value)\n              : setRight(event.target.value)\n          }\n          value={side === \"left\" ? left : right}\n        >\n          {options}\n        </select>\n      </S.GridItem>\n      // </div>\n    );\n  };\n\n  const reverseLink = () => {\n    let thisParent = props.link.getTargetPort().getParent() as DefaultNodeModel;\n    let portNode = props.link.getSourcePort().getParent() as DefaultNodeModel;\n\n    let portNodePorts = portNode.getPorts() as {\n      [s: string]: DefaultPortModel;\n    };\n    let thisParentPorts = thisParent.getPorts() as {\n      [s: string]: DefaultPortModel;\n    };\n\n    // let portNodePorts = portNode.getPorts() as {[s: string]: LogicPort};\n    // let thisParentPorts = thisParent.getPorts() as {[s: string]: LogicPort};\n\n    let czyMaPortZPKjakoFk = Object.keys(thisParentPorts).filter(\n      (id) => thisParentPorts[id].fkPortId === portNode.getOptions().id\n    )[0];\n    let czyMaPortZPKjakoFk2 = Object.keys(portNodePorts).filter(\n      (id) => portNodePorts[id].fkPortId === thisParent.getOptions().id\n    )[0];\n\n    if (czyMaPortZPKjakoFk) {\n      thisParent.removePort(thisParentPorts[czyMaPortZPKjakoFk]);\n      let pk = Object.keys(thisParentPorts).filter(\n        (id) => thisParentPorts[id].isPrimaryKey\n      )[0];\n      portNode.addPort(\n        new AdvancedPortModel(\n          // true,\n          thisParent.getOptions().name + thisParentPorts[pk].getOptions().name,\n          false,\n          false,\n          false,\n          true,\n          false,\n          true,\n          true,\n          \"INT\",\n          Toolkit.UID(),\n          thisParent.getOptions().id\n        )\n      );\n    } else {\n      portNode.removePort(portNodePorts[czyMaPortZPKjakoFk2]);\n\n      let pk = Object.keys(portNodePorts).filter(\n        (id) => portNodePorts[id].isPrimaryKey\n      )[0];\n      portNode.addPort(\n        new AdvancedPortModel(\n          // true,\n\n          portNode.getOptions().name + portNodePorts[pk].getOptions().name,\n          false,\n          false,\n          false,\n          true,\n          false,\n          true,\n          true,\n          \"INT\",\n          Toolkit.UID(),\n          portNode.getOptions().id\n        )\n      );\n    }\n\n    let newSourceP = props.link.getTargetPort();\n    let newTargetP = props.link.getSourcePort();\n    let model = props.diagramEngine.getModel();\n\n    model.removeLink(props.link);\n\n    let link = new ArrowLinkModel({ type: \"arrow\" });\n\n    link.setSourcePort(newSourceP);\n    link.setTargetPort(newTargetP);\n    model.addLink(link);\n\n    props.update();\n  };\n\n  if (props.isLogic) {\n    return (\n      <Popup modal closeOnDocumentClick open={props.isOpen} closeOnEscape>\n        <>\n          <S.GridItem>\n            <button onClick={remove}>Remove</button>\n          </S.GridItem>\n          <S.GridItem>\n            <button onClick={reverseLink}>Reverse</button>\n          </S.GridItem>\n        </>\n      </Popup>\n    );\n  } else\n    return (\n      <Popup modal closeOnDocumentClick open={props.isOpen} closeOnEscape onClose={props.update}>\n        <>\n          <S.GridContainer>\n            <S.GridItem>\n\n              <p>{sourcePort && sourcePort.getOptions().name}</p>\n            </S.GridItem>\n\n            <S.GridItem>\n              <input\n                type=\"text\"\n                defaultValue={relationNameOnly}\n                onChange={(event) => setRelationNameOnly(event.target.value)}\n              ></input>\n            </S.GridItem>\n            <S.GridItem>\n\n              <p>{targetPort && targetPort.getOptions().name}</p>\n            </S.GridItem>\n            {renderOptionPicker(\"left\")}\n            <S.GridItem>\n\n              <button onClick={update}>SAVE</button>\n            </S.GridItem>\n            {renderOptionPicker(\"right\")}\n            <S.GridItem></S.GridItem>\n            <S.GridItem>\n\n              <button onClick={remove}>Remove</button>\n            </S.GridItem>\n            </S.GridContainer>\n          {props.link && (\n            <div>\n              <h3 style={{ margin: 0 }}>Atributes:</h3>\n              <PropertyTable\n              relationName={relationNameOnly}\n                update={update}\n                relView={true}\n                link={props.link}\n                diagramEngine={props.diagramEngine}\n                selectedItem={props.link.properties}\n                isLogic={props.isLogic}\n              />\n            </div>\n          )}\n        </>\n      </Popup>\n    );\n};\n","import * as React from \"react\";\nimport * as _ from \"lodash\";\nimport { TrayWidget } from \"./TrayWidget\";\nimport { TrayItemWidget } from \"./TrayItemWidget\";\nimport { PointModel } from \"@projectstorm/react-diagrams\";\nimport { CanvasWidget } from \"@projectstorm/react-canvas-core\";\nimport styled from \"@emotion/styled\";\nimport { DemoCanvasWidget } from \"../helpers/DemoCanvasWidget\";\nimport { Application } from \"./Application\";\nimport { AdvancedPortModel } from \"../infrastructure/models/ArrowPortModel\";\nimport { TrayItemDiv } from \"./TrayItemDiv\";\nimport {\n  NodeProperties,\n  useForceUpdate,\n} from \"./NodeProperties/NodeProperties\";\nimport { DefaultLinkModel } from \"../infrastructure/models/DefaultLinkModel\";\nimport { GenerationHandler } from \"../handlers/GenerationHandler\";\nimport { LoadFileHandler } from \"../handlers/LoadFileHandler\";\nimport { SaveToFilePopup } from \"./popups/SaveToFilePopup/SaveToFilePopup\";\nimport { SaveToJpegPopup } from \"./popups/SaveToJpegPopup/SaveToJpegPopup\";\nimport { RelationPopup } from \"./popups/RealtionPopup/RelationPopup\";\nimport { DefaultPortModel } from \"../infrastructure/models/DefaultPortModel\";\nimport { DefaultLabelModel } from \"../infrastructure/models/DefaultLabelModel\";\nimport { DefaultNodeModel } from \"../infrastructure/models/DefaultNodeModel\";\n\nexport interface BodyWidgetProps {\n  app: Application;\n}\nnamespace S {\n  export const Body = styled.div`\n    flex-grow: 1;\n    display: flex;\n    flex-direction: column;\n    min-height: 100%;\n  `;\n\n  export const Header = styled.div`\n    display: flex;\n    background: rgb(30, 30, 30);\n    flex-grow: 0;\n    flex-shrink: 0;\n    color: white;\n    font-family: Helvetica, Arial, sans-serif;\n    padding: 12px;\n    align-items: center;\n  `;\n\n  export const Content = styled.div`\n    display: flex;\n    flex-grow: 1;\n  `;\n\n  export const Layer = styled.div`\n    position: relative;\n    flex-grow: 1;\n  `;\n\n  export const DropdownIcon = styled.span`\n    display: inline-block;\n    padding-top: 3px;\n    padding-right: 5px;\n  `;\n}\n\nexport const BodyWidget = (props: BodyWidgetProps) => {\n  const [showDialog, setShowDialog] = React.useState(false);\n  const [showRelationDialog, setShowRelationDialog] = React.useState(false);\n  const [showLoadFileDialog, setShowLoadFileDialog] = React.useState(false);\n  const [showSaveFileDialog, setSaveFileDialog] = React.useState(false);\n  const [showSaveJPEGDialog, setSaveJPEGDialog] = React.useState(false);\n  const [showSaveOptions, setSaveOptions] = React.useState(false);\n\n  const [selectedNode, setSelectedNode] = React.useState(null);\n  const [selectedLink, setSelectedLink] = React.useState(null);\n\n  const [isUml, setIsUml] = React.useState(true);\n\n  const [isLogicModel, setIsLogicModel] = React.useState(false);\n\n  const forceUpdate = useForceUpdate();\n\n  React.useEffect(() => {\n    setSelectedNode(null);\n    setSelectedLink(null);\n  }, []);\n\n  const changeRelation = () => {\n    let links = props.app.getDiagramEngine().getModel().getLinks();\n    links.forEach((link) => {\n      let temp = (link.getLabels()[0] as DefaultLabelModel)\n        .getOptions()\n        .label.substring(0, 1);\n      let temp2 = (link.getLabels()[2] as DefaultLabelModel)\n        .getOptions()\n        .label.substring(0, 1);\n\n      (link.getLabels()[0] as DefaultLabelModel).getOptions().label =\n        temp2 +\n        (link.getLabels()[0] as DefaultLabelModel)\n          .getOptions()\n          .label.substring(1);\n      (link.getLabels()[2] as DefaultLabelModel).getOptions().label =\n        temp +\n        (link.getLabels()[2] as DefaultLabelModel)\n          .getOptions()\n          .label.substring(1);\n    });\n  };\n\n  const refreshPopups = () => {\n    setSelectedLink(null);\n    setSelectedNode(null);\n\n    setShowDialog(false);\n    setSaveFileDialog(false);\n    setSaveJPEGDialog(false);\n    setSaveOptions(false);\n    setShowLoadFileDialog(false);\n    setShowRelationDialog(false);\n  };\n\n  const getDiagramLogicModel = () => {\n    if(isLogicModel) {\n      return props.app.getDiagramEngine().getModel().serialize();\n    }\n    else {\n      props.app.setLogicModel();\n\n      setIsLogicModel(true);\n      return props.app.getDiagramEngine().getModel().serialize();\n    }\n  }\n\n  return (\n    <S.Body>\n      <S.Header>DB Diagram Scripter</S.Header>\n      <S.Content>\n        <TrayWidget>\n          <TrayItemWidget\n            model={{ type: \"default\" }}\n            name={isLogicModel ? \"Relation\" : \"Entity\"}\n            color=\"rgb(0,192,255)\"\n          />\n          <TrayItemWidget\n            model={{ type: \"label\" }}\n            name=\"Label\"\n            color=\"rgb(192,255,0)\"\n          />\n\n          <TrayItemDiv\n            name=\"Load Diagram\"\n            color=\"rgb(255,123,0)\"\n            marginTop=\"75px\"\n            onClick={() => {\n              setShowLoadFileDialog(true);\n              setSelectedNode(null);\n            }}\n          />\n\n          <TrayItemDiv\n            color=\"rgb(255,123,0)\"\n            onClick={() => {\n              setSaveOptions(!showSaveOptions);\n              setSelectedNode(null);\n            }}\n          >\n            <>\n              Save\n              <S.DropdownIcon\n                className={`mi ${\n                  !showSaveOptions ? \"mi-ArrowDown8\" : \"mi-ArrowUp8\"\n                }`}\n              />\n            </>\n          </TrayItemDiv>\n\n          {showSaveOptions && (\n            <TrayItemDiv\n              name=\"File\"\n              color=\"rgb(255,123,0)\"\n              onClick={() => {\n                setSaveFileDialog(true);\n                setSelectedNode(null);\n              }}\n            />\n          )}\n          {showSaveOptions && (\n            <TrayItemDiv\n              name=\"JPEG\"\n              color=\"rgb(255,123,0)\"\n              onClick={() => {\n                setSaveJPEGDialog(true);\n                setSelectedNode(null);\n              }}\n            />\n          )}\n\n          <TrayItemDiv\n            isSelected={!isLogicModel}\n            name=\"Conceptual View\"\n            color=\"rgb(0,50,100)\"\n            marginTop=\"75px\"\n            onClick={() => {\n              if (isLogicModel) {\n                props.app.setConceptualModel();\n                setIsLogicModel(false);\n              }\n            }}\n          />\n\n          <TrayItemDiv\n            isSelected={isLogicModel}\n            name=\"Logical View\"\n            color=\"rgb(0,50,100)\"\n            onClick={() => {\n              if (!isLogicModel) {\n                props.app.setLogicModel();\n                setIsLogicModel(true);\n              }\n            }}\n          />\n\n          <TrayItemDiv\n            isDisabled={isLogicModel}\n            isSelected={isUml}\n            name=\"UML\"\n            color=\"rgb(152,50,100)\"\n            marginTop=\"75px\"\n            onClick={() => {\n              if (!isLogicModel && !isUml) {\n                changeRelation();\n                setIsUml(true);\n              }\n            }}\n          />\n\n          <TrayItemDiv\n            isDisabled={isLogicModel}\n            isSelected={!isUml}\n            name=\"Chen\"\n            color=\"rgb(152,50,100)\"\n            onClick={() => {\n              if (!isLogicModel && isUml) {\n                changeRelation();\n                setIsUml(false);\n              }\n            }}\n          />\n\n          <TrayItemDiv\n            name=\"Create DB Code\"\n            color=\"rgb(255,0,0)\"\n            marginTop=\"60px\"\n            onClick={() => {\n              setShowDialog(true);\n              setSelectedNode(null);\n            }}\n          />\n        </TrayWidget>\n        <S.Layer\n          id=\"diagram-layer\"\n          onDrop={(event) => {\n            var data = JSON.parse(\n              event.dataTransfer.getData(\"storm-diagram-node\")\n            );\n\n            let allNodes = props.app\n              .getDiagramEngine()\n              .getModel()\n              .getNodes() as DefaultNodeModel[];\n\n            let names = allNodes.map((node) =>\n              node.getOptions().name.toLowerCase().trim()\n            );\n\n            var nodesCount = _.keys(\n              props.app.getDiagramEngine().getModel().getNodes()\n            ).length;\n\n            let newNodeName = names.includes(\n              `Entity${nodesCount + 1}`.toLowerCase().trim()\n            )\n              ? `Entity${nodesCount + 1}_${nodesCount + 1}`\n              : `Entity${nodesCount + 1}`;\n\n            var node: DefaultNodeModel;\n            if (data.type === \"default\") {\n              node = new DefaultNodeModel(false, newNodeName, \"rgb(0,192,255)\");\n\n              if (isLogicModel) {\n                node.addPort(\n                  new AdvancedPortModel(\n                    \"Id\",\n                    false,\n                    true,\n                    false,\n                    false,\n                    true,\n                    true,\n                    true,\n                    \"INT\"\n                  )\n                );\n                node.addPort(\n                  new AdvancedPortModel(\n                    \"\",\n                    true,\n                    false,\n                    false,\n                    false,\n                    false,\n                    false,\n                    false,\n                    \"INT\"\n                  )\n                );\n                node.addPort(\n                  new AdvancedPortModel(\n                    \"1\",\n                    true,\n                    false,\n                    false,\n                    false,\n                    false,\n                    false,\n                    false,\n                    \"INT\"\n                  )\n                );\n              } else {\n                node.addPort(\n                  new DefaultPortModel(\n                    isLogicModel,\n                    \"Id\",\n                    false,\n                    true,\n                    false,\n                    false,\n                    true,\n                    true,\n                    true,\n                    \"INT\"\n                  )\n                );\n                node.addPort(\n                  new DefaultPortModel(\n                    isLogicModel,\n                    \"\",\n                    true,\n                    false,\n                    false,\n                    false,\n                    false,\n                    false,\n                    false,\n                    \"INT\"\n                  )\n                );\n                node.addPort(\n                  new DefaultPortModel(\n                    isLogicModel,\n                    \"1\",\n                    true,\n                    false,\n                    false,\n                    false,\n                    false,\n                    false,\n                    false,\n                    \"INT\"\n                  )\n                );\n              }\n            } else {\n              node = new DefaultNodeModel(true, \"Label \", \"rgb(192,255,0)\");\n            }\n\n            var point = props.app\n              .getDiagramEngine()\n              .getRelativeMousePoint(event);\n            node.setPosition(point);\n            props.app.getDiagramEngine().getModel().addNode(node);\n\n            forceUpdate();\n          }}\n          onDragOver={(event) => {\n            event.preventDefault();\n          }}\n          onClick={(event) => {\n            event.preventDefault();\n            if (\n              event.ctrlKey &&\n              props.app\n                .getDiagramEngine()\n                .getModel()\n                .getSelectedEntities()[0] instanceof PointModel\n            ) {\n              const pointToRemove = props.app\n                .getDiagramEngine()\n                .getModel()\n                .getSelectedEntities()[0] as PointModel;\n\n              pointToRemove.remove();\n              forceUpdate();\n            }\n            refreshPopups();\n          }}\n          onDoubleClick={(event) => {\n            event.preventDefault();\n            if (\n              props.app\n                .getDiagramEngine()\n                .getModel()\n                .getSelectedEntities()[0] instanceof PointModel\n            ) {\n              setSelectedLink(\n                props.app\n                  .getDiagramEngine()\n                  .getModel()\n                  .getSelectedEntities()[0]\n                  .getParent() as DefaultLinkModel\n              );\n              setShowRelationDialog(true);\n              setSelectedNode(null);\n            } else if (\n              props.app\n                .getDiagramEngine()\n                .getModel()\n                .getSelectedEntities()[0] instanceof DefaultNodeModel\n            ) {\n              refreshPopups();\n              let selectedNode = props.app\n                .getDiagramEngine()\n                .getModel()\n                .getSelectedEntities()[0] as DefaultNodeModel;\n\n              setSelectedNode(selectedNode);\n            }\n          }}\n        >\n          <DemoCanvasWidget>\n            <CanvasWidget\n              className=\"srd-demo-canvas\"\n              engine={props.app.getDiagramEngine()}\n            />\n          </DemoCanvasWidget>\n        </S.Layer>\n        {selectedNode != null ? (\n          <NodeProperties\n            update={refreshPopups}\n\n            isLogic={isLogicModel}\n            selectedItem={selectedNode}\n            diagramEngine={props.app.getDiagramEngine()}\n          />\n        ) : null}\n        <GenerationHandler\n          isUml={isUml}\n          isLogic={isLogicModel}\n          update={refreshPopups}\n          isOpen={showDialog}\n          serializeDiagram={() =>  getDiagramLogicModel()}\n          \n        />\n        <LoadFileHandler\n          update={refreshPopups}\n          isOpen={showLoadFileDialog}\n          app={props.app}\n          setIsUml={setIsUml}\n          setIsLogic={setIsLogicModel}\n        />\n        <SaveToFilePopup\n          isLogic={isLogicModel}\n          update={refreshPopups}\n          diagramModel={props.app.getDiagramEngine().getModel()}\n          isOpen={showSaveFileDialog}\n          isUml={isUml}\n        />\n        <SaveToJpegPopup\n          update={refreshPopups}\n          diagramModel={props.app.getActiveDiagram()}\n          isOpen={showSaveJPEGDialog}\n        />\n\n        <RelationPopup\n          diagramEngine={props.app.getDiagramEngine()}\n          update={refreshPopups}\n          isOpen={showRelationDialog}\n          link={selectedLink}\n          isLogic={isLogicModel}\n        />\n      </S.Content>\n    </S.Body>\n  );\n};\n","import {\n  DefaultLinkWidget,\n  PointModel,\n  LinkWidget,\n} from \"@projectstorm/react-diagrams\";\nimport React from \"react\";\n\nconst CustomLinkArrowWidget = (props: any) => {\n  const { point, previousPoint } = props;\n  const [, setSelected] = React.useState(false);\n  const angle =\n    90 +\n    (Math.atan2(\n      point.getPosition().y - previousPoint.getPosition().y,\n      point.getPosition().x - previousPoint.getPosition().x\n    ) *\n      180) /\n      Math.PI;\n\n  //translate(50, -10),\n  return (\n    <g\n      className=\"arrow\"\n      transform={\n        \"translate(\" +\n        point.getPosition().x +\n        \", \" +\n        point.getPosition().y +\n        \")\"\n      }\n    >\n      <g style={{ transform: \"rotate(\" + angle + \"deg)\" }}>\n        <g transform={\"translate(0, -3)\"}>\n          <polygon\n            points=\"0,10 8,30 -8,30\"\n            fill={props.color}\n            onMouseLeave={() => setSelected(false)}\n            onMouseEnter={() => setSelected(true)}\n            data-id={point.getID()}\n            data-linkid={point.getLink().getID()}\n          ></polygon>\n        </g>\n      </g>\n    </g>\n  );\n};\n\nexport class ArrowLinkWidget extends DefaultLinkWidget {\n  generateArrow(point: PointModel, previousPoint: PointModel): JSX.Element {\n    return (\n      <CustomLinkArrowWidget\n        key={point.getID()}\n        point={point as any}\n        previousPoint={previousPoint as any}\n        colorSelected={this.props.link.getOptions().selectedColor}\n        color={this.props.link.getOptions().color}\n      />\n    );\n  }\n\n  render() {\n    //ensure id is present for all points on the path\n    var points = this.props.link.getPoints();\n    var paths = [];\n    this.refPaths = [];\n\n    //draw the multiple anchors and complex line instead\n    for (let j = 0; j < points.length - 1; j++) {\n      paths.push(\n        this.generateLink(\n          LinkWidget.generateLinePath(points[j], points[j + 1]),\n          {\n            \"data-linkid\": this.props.link.getID(),\n            \"data-point\": j,\n            onMouseDown: (event: MouseEvent) => {\n              this.addPointToLink(event as any, j + 1);\n            },\n          },\n          j\n        )\n      );\n    }\n\n    paths.push(this.generateArrow(points[0], points[1]));\n\n    \t//render the circles\n\t\tfor (let i = 1; i < points.length - 1; i++) {\n\t\t\tpaths.push(this.generatePoint(points[i]));\n\t\t}\n\n\t\t\tpaths.push(this.generatePoint(points[points.length - 1]));\n\n\t\treturn <g data-default-link-test={this.props.link.getOptions().testName}>{paths}</g>;\n  }\n}\n","import React from \"react\";\nimport { DefaultLinkFactory } from \"@projectstorm/react-diagrams\";\n\nimport { ArrowLinkModel } from \"../models/ArrowLinkModel\";\nimport { ArrowLinkWidget } from \"../widgets/ArrowLinkWidget\";\n\nexport class ArrowLinkFactory extends DefaultLinkFactory {\n  constructor() {\n    super(\"arrow\");\n  }\n\n  generateModel(): ArrowLinkModel {\n    return new ArrowLinkModel();\n  }\n\n  generateReactWidget(event: any): JSX.Element {\n    return <ArrowLinkWidget link={event.model} diagramEngine={this.engine} />;\n  }\n}\n","import * as React from \"react\";\nimport { DiagramEngine, PortWidget } from \"@projectstorm/react-diagrams-core\";\nimport { DefaultPortModel } from \"../models/DefaultPortModel\";\nimport styled from \"@emotion/styled\";\n\nexport interface DefaultPortLabelProps {\n  port: DefaultPortModel;\n  engine: DiagramEngine;\n}\n\nnamespace S {\n  export const PortLabel = styled.div`\n  display: flex;\n  margin-top: 1px;\n  align-items: center;\n`;\n\n  export const Label = styled.div`\n  flex-grow: 1;\n`;\n\n  export const Port = styled.div`\n  width: 15px;\n  height: 15px;\n  background: rgba(255, 255, 255, 0.1);\n\n  &:hover {\n    background: rgb(192, 255, 0);\n  }\n  `;\n\n  export const PrimaryKeyIcon = styled.span`\n    padding:  3px 5px;\n    color: black;\n    font-weight: 800;\n  `;\n\n  export const PortContainer = styled.div`\n    display: flex;\n    justify-content: flex-end;\n  `;\n\n  export const PortItem = styled.div`\n    display: inline-block;\n    margin-right: 5px;\n  `;\n\n  export const HiddenPort = styled(PortItem)`\n    display: none;\n  `;\n\n  export const NamedPort = styled(PortItem)`\n   margin-right: 5px;\n  `;\n}\n\nexport const DefaultPortLabel = (props: DefaultPortLabelProps) => {\n  let { port, engine } = props;\n\n  if (!port.isNamePort) {\n    port.setLocked();\n  }\n\n  let portJSX: JSX.Element = (\n    <PortWidget engine={engine} port={port}>\n      <S.Port />\n    </PortWidget>\n  );\n\n  const label: JSX.Element = (\n    <S.PortLabel>\n      <div>\n        {port.label}\n        {' '}\n        {port.propertyType}\n      </div>\n    </S.PortLabel>\n  );\n\n  const isPrimaryKey = port.isPrimaryKey &&\n    <S.PrimaryKeyIcon className=\"mi mi-Permissions\"></S.PrimaryKeyIcon>\n\n  if (port.isNamePort) {\n    return <S.NamedPort>{portJSX}</S.NamedPort>;\n  } else {\n    return (\n      <S.PortContainer>\n        <S.PortItem>{isPrimaryKey}</S.PortItem>\n        <S.PortItem>{label}</S.PortItem>\n        <S.HiddenPort>{portJSX}</S.HiddenPort>\n      </S.PortContainer>\n    );\n  }\n}\n","import * as React from \"react\";\nimport * as _ from \"lodash\";\nimport { DiagramEngine } from \"@projectstorm/react-diagrams-core\";\nimport { DefaultNodeModel } from \"../models/DefaultNodeModel\";\nimport { DefaultPortLabel } from \"../widgets/DefaultPortLabelWidget\";\nimport styled from \"@emotion/styled\";\nimport { DefaultPortModel } from \"../models/DefaultPortModel\";\n\n\nnamespace S {\n  export const Node = styled.div<{ background: string; selected: boolean }>`\n    background-color: ${(p) => p.background};\n    border-radius: 5px;\n    font-family: sans-serif;\n    color: white;\n    border: solid 2px black;\n    overflow: visible;\n    font-size: 11px;\n    border: solid 2px ${(p) => (p.selected ? \"rgb(0,192,255)\" : \"black\")};\n  `;\n\n  export const Title = styled.div`\n    background: rgba(0, 0, 0, 0.3);\n    display: flex;\n    white-space: nowrap;\n\n    justify-items: center;\n  `;\n\n  export const TitleName = styled.div`\n    flex-grow: 1;\n    padding: 5px 5px;\n  `;\n\n  export const Ports = styled.div`\n    display: flex;\n    background-image: linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.2));\n  `;\n\n  export const PortsContainer = styled.div`\n    flex-grow: 1;\n    display: flex;\n    flex-direction: column;\n\n    &:first-of-type {\n      margin-right: 10px;\n    }\n\n    &:only-child {\n      margin-right: 0px;\n    }\n  `;\n\n  export const NamedPortLeft = styled.div`\n    margin-top: 5px;\n    margin-left: 5px\n  `;\n\n  export const NamedPortRight = styled.div`\n    margin-top: 5px\n  `;\n}\n\n\nexport interface DefaultNodeProps {\n  node: DefaultNodeModel;\n  engine: DiagramEngine;\n}\n\nexport const DefaultNodeWidget = (props: DefaultNodeProps) => {\n  const generatePort = (port) => {\n    return (\n      <DefaultPortLabel\n        engine={props.engine}\n        port={port}\n        key={port.options.id}\n      />\n    );\n  };\n\n    let { node } = props;\n    let ports = node.getPorts() as { [s: string]: DefaultPortModel };\n    let portsJSX = _.map(ports, generatePort);\n    let namedPortsJSX = portsJSX.filter((p) => p.props.port.isNamePort);\n    let notNamedPortsJSX = portsJSX.filter((p) => !p.props.port.isNamePort);\n\n    return (\n      <S.Node\n        data-default-node-name={node.getOptions().name}\n        selected={node.isSelected()}\n        background={node.getOptions().color}\n      >\n        <S.Title>\n          {namedPortsJSX.length !== 0 && (\n            <S.NamedPortLeft>\n              {generatePort(namedPortsJSX[1].props.port)}\n            </S.NamedPortLeft>\n          )}\n\n          <S.TitleName>{node.getOptions().name}</S.TitleName>\n\n          {namedPortsJSX.length !== 0 && (\n            <S.NamedPortRight>\n              {generatePort(namedPortsJSX[0].props.port)}\n            </S.NamedPortRight>\n          )}\n        </S.Title>\n        <S.Ports>\n          <S.PortsContainer>{notNamedPortsJSX}</S.PortsContainer>\n        </S.Ports>\n      </S.Node>\n    );\n}\n","import * as React from \"react\";\nimport { DefaultNodeModel } from \"../models/DefaultNodeModel\";\nimport { DefaultNodeWidget } from \"../widgets/DefaultNodeWidget\";\nimport { AbstractReactFactory } from \"@projectstorm/react-canvas-core\";\nimport { DiagramEngine } from \"@projectstorm/react-diagrams-core\";\n\nexport class DefaultNodeFactory extends AbstractReactFactory<\n  DefaultNodeModel,\n  DiagramEngine\n> {\n  constructor() {\n    super(\"default\");\n  }\n\n  generateReactWidget(event): JSX.Element {\n    return <DefaultNodeWidget engine={this.engine} node={event.model} />;\n  }\n\n  generateModel(event): DefaultNodeModel {\n    return new DefaultNodeModel(false, \"Entity\", \"rgb(0,192,255)\");\n  }\n}\n","import * as React from \"react\";\nimport { DefaultLabelModel } from \"../models/DefaultLabelModel\";\nimport styled from \"@emotion/styled\";\n\nexport interface DefaultLabelWidgetProps {\n  model: DefaultLabelModel;\n}\n\nnamespace S {\n  export const Label = styled.div`\n  background: rgba(0, 0, 0, 0.8);\n  border-radius: 5px;\n  color: white;\n  font-size: 12px;\n  padding: 4px 8px;\n  font-family: sans-serif;\n  user-select: none;\n\n  max-width: 200px;\n  white-space: pre-wrap;\n`;\n}\n\n\nexport class DefaultLabelWidget extends React.Component<\n  DefaultLabelWidgetProps\n> {\n  render() {\n    return <S.Label>{this.props.model.getOptions().label}</S.Label>;\n  }\n}\n","import * as React from \"react\";\nimport { DefaultLabelModel } from \"../models/DefaultLabelModel\";\nimport { DefaultLabelWidget } from \"../widgets/DefaultLabelWidget\";\nimport { AbstractReactFactory } from \"@projectstorm/react-canvas-core\";\nimport { DiagramEngine } from \"@projectstorm/react-diagrams-core\";\n\nexport class DefaultLabelFactory extends AbstractReactFactory<\n  DefaultLabelModel,\n  DiagramEngine\n> {\n  constructor() {\n    super(\"default\");\n  }\n\n  generateReactWidget(event): JSX.Element {\n    return <DefaultLabelWidget model={event.model} />;\n  }\n\n  generateModel(event): DefaultLabelModel {\n    return new DefaultLabelModel();\n  }\n}\n","import { DefaultPortModel } from \"../models/DefaultPortModel\";\nimport { AbstractModelFactory } from \"@projectstorm/react-canvas-core\";\nimport { DiagramEngine } from \"@projectstorm/react-diagrams-core\";\n\nexport class DefaultPortFactory extends AbstractModelFactory<\n  DefaultPortModel,\n  DiagramEngine\n> {\n  constructor() {\n    super(\"default\");\n  }\n\n  generateModel(): DefaultPortModel {\n    return new DefaultPortModel(false, \"port\", true, false);\n  }\n}\n","import * as React from \"react\";\nimport { PointModel } from \"@projectstorm/react-diagrams-core\";\nimport styled from \"@emotion/styled\";\n\nexport interface DefaultLinkPointWidgetProps {\n  point: PointModel;\n  color?: string;\n  colorSelected: string;\n}\n\nexport interface DefaultLinkPointWidgetState {\n  selected: boolean;\n}\n\nexport const PointTop = styled.circle`\n  pointer-events: all;\n`;\n\nexport class DefaultLinkPointWidget extends React.Component<\n  DefaultLinkPointWidgetProps,\n  DefaultLinkPointWidgetState\n> {\n  constructor(props) {\n    super(props);\n    this.state = {\n      selected: false,\n    };\n  }\n\n  render() {\n    const { point } = this.props;\n    return (\n      <g>\n        <circle\n          cx={point.getPosition().x}\n          cy={point.getPosition().y}\n          r={5}\n          fill={\n            this.state.selected || this.props.point.isSelected()\n              ? this.props.colorSelected\n              : this.props.color\n          }\n        />\n        <PointTop\n          className=\"point\"\n          onMouseLeave={() => {\n            this.setState({ selected: false });\n          }}\n          onMouseEnter={() => {\n            this.setState({ selected: true });\n          }}\n          data-id={point.getID()}\n          data-linkid={point.getLink().getID()}\n          cx={point.getPosition().x}\n          cy={point.getPosition().y}\n          r={15}\n          opacity={0.0}\n        />\n      </g>\n    );\n  }\n}\n","import * as React from \"react\";\nimport { DefaultLinkFactory } from \"../factories/DefaultLinkFactory\";\nimport { DiagramEngine } from \"@projectstorm/react-diagrams-core\";\nimport { DefaultLinkModel } from \"../models/DefaultLinkModel\";\n\nexport interface DefaultLinkSegmentWidgetProps {\n  path: string;\n  link: DefaultLinkModel;\n  selected: boolean;\n  forwardRef: React.RefObject<SVGPathElement>;\n  factory: DefaultLinkFactory;\n  diagramEngine: DiagramEngine;\n  onSelection: (selected: boolean) => any;\n  extras: object;\n}\n\nexport class DefaultLinkSegmentWidget extends React.Component<\n  DefaultLinkSegmentWidgetProps\n> {\n  render() {\n    const Bottom = React.cloneElement(\n      this.props.factory.generateLinkSegment(\n        this.props.link,\n        this.props.selected || this.props.link.isSelected(),\n        this.props.path\n      ),\n      {\n        ref: this.props.forwardRef,\n      }\n    );\n\n    const Top = React.cloneElement(Bottom, {\n      strokeLinecap: \"round\",\n      onMouseLeave: () => {\n        this.props.onSelection(false);\n      },\n      onMouseEnter: () => {\n        this.props.onSelection(true);\n      },\n      ...this.props.extras,\n      ref: null,\n      \"data-linkid\": this.props.link.getID(),\n      strokeOpacity: this.props.selected ? 0.1 : 0,\n      strokeWidth: 20,\n      fill: \"none\",\n      onContextMenu: (event) => {\n        if (!this.props.link.isLocked()) {\n          event && event.preventDefault();\n          this.props.link.remove();\n        }\n      },\n    });\n\n    return (\n      <g>\n        {Bottom}\n        {Top}\n      </g>\n    );\n  }\n}\n","import * as React from \"react\";\nimport {\n  DiagramEngine,\n  LinkWidget,\n  PointModel,\n} from \"@projectstorm/react-diagrams-core\";\nimport { DefaultLinkModel } from \"../models/DefaultLinkModel\";\nimport { DefaultLinkPointWidget } from \"./DefaultLinkPointWidget\";\nimport { DefaultLinkSegmentWidget } from \"./DefaultLinkSegmentWidget\";\nimport { MouseEvent } from \"react\";\n\nexport interface DefaultLinkProps {\n  link: DefaultLinkModel;\n  diagramEngine: DiagramEngine;\n  pointAdded?: (point: PointModel, event: MouseEvent) => any;\n}\n\nexport interface DefaultLinkState {\n  selected: boolean;\n}\n\nexport class DefaultLinkWidget extends React.Component<\n  DefaultLinkProps,\n  DefaultLinkState\n> {\n  refPaths: React.RefObject<SVGPathElement>[];\n\n  constructor(props: DefaultLinkProps) {\n    super(props);\n    this.refPaths = [];\n    this.state = {\n      selected: false,\n    };\n  }\n\n  componentDidUpdate(): void {\n    this.props.link.setRenderedPaths(\n      this.refPaths.map((ref) => {\n        return ref.current;\n      })\n    );\n  }\n\n  componentDidMount(): void {\n    this.props.link.setRenderedPaths(\n      this.refPaths.map((ref) => {\n        return ref.current;\n      })\n    );\n  }\n\n  componentWillUnmount(): void {\n    this.props.link.setRenderedPaths([]);\n  }\n\n  addPointToLink(event: MouseEvent, index: number) {\n    if (\n      !event.shiftKey &&\n      !this.props.link.isLocked() &&\n      this.props.link.getPoints().length - 1 <=\n        this.props.diagramEngine.getMaxNumberPointsPerLink()\n    ) {\n      const point = new PointModel({\n        link: this.props.link,\n        position: this.props.diagramEngine.getRelativeMousePoint(event),\n      });\n      this.props.link.addPoint(point, index);\n      event.persist();\n      event.stopPropagation();\n      this.forceUpdate(() => {\n        this.props.diagramEngine.getActionEventBus().fireAction({\n          event,\n          model: point,\n        });\n      });\n    }\n  }\n\n  generatePoint(point: PointModel): JSX.Element {\n    return (\n      <DefaultLinkPointWidget\n        key={point.getID()}\n        point={point as any}\n        colorSelected={this.props.link.getOptions().selectedColor}\n        color={this.props.link.getOptions().color}\n      />\n    );\n  }\n\n  generateLink(\n    path: string,\n    extraProps: any,\n    id: string | number\n  ): JSX.Element {\n    const ref = React.createRef<SVGPathElement>();\n    this.refPaths.push(ref);\n    return (\n      <DefaultLinkSegmentWidget\n        key={`link-${id}`}\n        path={path}\n        selected={this.state.selected}\n        diagramEngine={this.props.diagramEngine}\n        factory={this.props.diagramEngine.getFactoryForLink(this.props.link)}\n        link={this.props.link}\n        forwardRef={ref}\n        onSelection={(selected) => {\n          this.setState({ selected: selected });\n        }}\n        extras={extraProps}\n      />\n    );\n  }\n\n  render() {\n    //ensure id is present for all points on the path\n    var points = this.props.link.getPoints();\n    var paths = [];\n    this.refPaths = [];\n\n    if (points.length === 2) {\n      paths.push(\n        this.generateLink(\n          this.props.link.getSVGPath(),\n          {\n            onMouseDown: (event) => {\n              this.addPointToLink(event, 1);\n            },\n          },\n          \"0\"\n        )\n      );\n\n      // draw the link as dangeling\n      if (this.props.link.getTargetPort() == null) {\n        paths.push(this.generatePoint(points[1]));\n      }\n    } else {\n      //draw the multiple anchors and complex line instead\n      for (let j = 0; j < points.length - 1; j++) {\n        paths.push(\n          this.generateLink(\n            LinkWidget.generateLinePath(points[j], points[j + 1]),\n            {\n              \"data-linkid\": this.props.link.getID(),\n              \"data-point\": j,\n              onMouseDown: (event: MouseEvent) => {\n                this.addPointToLink(event, j + 1);\n              },\n            },\n            j\n          )\n        );\n      }\n\n      //render the circles\n      for (let i = 1; i < points.length - 1; i++) {\n        paths.push(this.generatePoint(points[i]));\n      }\n\n      if (this.props.link.getTargetPort() == null) {\n        paths.push(this.generatePoint(points[points.length - 1]));\n      }\n    }\n\n    return (\n      <g data-default-link-test={this.props.link.getOptions().testName}>\n        {paths}\n      </g>\n    );\n  }\n}\n","import * as React from \"react\";\nimport { DefaultLinkModel } from \"../models/DefaultLinkModel\";\nimport { DefaultLinkWidget } from \"../widgets/DefaultLinkWidget\";\nimport styled from \"@emotion/styled\";\nimport { css, keyframes } from \"@emotion/core\";\nimport { AbstractReactFactory } from \"@projectstorm/react-canvas-core\";\nimport { DiagramEngine } from \"@projectstorm/react-diagrams-core\";\n\nexport const Keyframes = keyframes`\n\t\tfrom {\n\t\t\tstroke-dashoffset: 24;\n\t\t}\n\t\tto {\n\t\t\tstroke-dashoffset: 0;\n\t\t}\n\t`;\n\nconst selected = css`\n  stroke-dasharray: 10, 2;\n  animation: ${Keyframes} 1s linear infinite;\n`;\n\nexport const Path = styled.path<{ selected: boolean }>`\n  ${(p) => p.selected && selected};\n  fill: none;\n  pointer-events: all;\n`;\n\nexport class DefaultLinkFactory<\n  Link extends DefaultLinkModel = DefaultLinkModel\n> extends AbstractReactFactory<Link, DiagramEngine> {\n  constructor(type = \"default\") {\n    super(type);\n  }\n\n  generateReactWidget(event): JSX.Element {\n    return <DefaultLinkWidget link={event.model} diagramEngine={this.engine} />;\n  }\n\n  generateModel(event): Link {\n    return new DefaultLinkModel() as Link;\n  }\n\n  generateLinkSegment(model: Link, selected: boolean, path: string) {\n    return (\n      <Path\n        selected={selected}\n        stroke={\n          selected ? model.getOptions().selectedColor : model.getOptions().color\n        }\n        strokeWidth={model.getOptions().width}\n        d={path}\n      />\n    );\n  }\n}\n","import * as React from \"react\";\nimport { DiagramEngine } from \"@projectstorm/react-diagrams-core\";\nimport { DefaultNodeModel } from \"../models/DefaultNodeModel\";\nimport styled from \"@emotion/styled\";\n\nnamespace S {\n  export const Node = styled.div<{ background: string; selected: boolean }>`\n  background-color: ${(p) => p.background};\n  border-radius: 5px;\n  font-family: sans-serif;\n  color: white;\n  border: solid 2px black;\n  overflow: visible;\n  font-size: 11px;\n  border: solid 2px ${(p) => (p.selected ? \"rgb(0,192,255)\" : \"black\")};\n`;\n\n  export const Title = styled.div`\n  background: rgba(0, 0, 0, 0.3);\n  display: flex;\n  white-space: nowrap;\n  justify-items: center;\n`;\n\n  export const TitleName = styled.div`\n  flex-grow: 1;\n  padding: 5px 5px;\n`;\n}\n\nexport interface DefaultNodeProps {\n  node: DefaultNodeModel;\n  engine: DiagramEngine;\n}\n\nexport const CustomLabelWidget = (props: DefaultNodeProps) => {\n  let { node } = props;\n  \n  return (\n    <S.Node\n      data-default-node-name={node.getOptions().name}\n      selected={node.isSelected()}\n      background={node.getOptions().color}\n    >\n      <S.Title>\n        <S.TitleName>{node.getOptions().name}</S.TitleName>\n      </S.Title>\n    </S.Node>\n  );\n}\n","import * as React from \"react\";\nimport { DefaultNodeModel } from \"../models/DefaultNodeModel\";\nimport { CustomLabelWidget } from \"../widgets/CustomLabelWidget\";\nimport { AbstractReactFactory } from \"@projectstorm/react-canvas-core\";\nimport { DiagramEngine } from \"@projectstorm/react-diagrams-core\";\n\nexport class CustomLabelFactory extends AbstractReactFactory<\n  DefaultNodeModel,\n  DiagramEngine\n> {\n  constructor() {\n    super(\"label\");\n  }\n\n  generateReactWidget(event): JSX.Element {\n    return <CustomLabelWidget engine={this.engine} node={event.model} />;\n  }\n\n  generateModel(event): DefaultNodeModel {\n    return new DefaultNodeModel(true, \"Label\", \"rgb(192,255,0)\");\n  }\n}\n","import { AbstractModelFactory } from \"@projectstorm/react-canvas-core\";\nimport { DiagramEngine } from \"@projectstorm/react-diagrams-core\";\nimport { AdvancedPortModel } from \"../models/ArrowPortModel\";\n\nexport class ArrowPortFactory extends AbstractModelFactory<\n  AdvancedPortModel,\n  DiagramEngine\n> {\n  constructor() {\n    super(\"arrow\");\n  }\n\n  generateModel(): AdvancedPortModel {\n    return new AdvancedPortModel(\"port\", true, false);\n  }\n}\n","import createEngine, {\n  DiagramModel,\n  DiagramEngine,\n  LinkModel,\n  LinkModelGenerics,\n} from \"@projectstorm/react-diagrams\";\nimport { ArrowLinkFactory } from \"../infrastructure/factories/ArrowLinkFactory\";\nimport { DefaultNodeFactory } from \"../infrastructure/factories/DefaultNodeFactory\";\nimport { DefaultLabelFactory } from \"../infrastructure/factories/DefaultLabelFactory\";\nimport { DefaultPortFactory } from \"../infrastructure/factories/DefaultPortFactory\";\nimport { DefaultLinkFactory } from \"../infrastructure/factories/DefaultLinkFactory\";\nimport { CustomLabelFactory } from \"../infrastructure/factories/CustomLabelFactory\";\nimport { DefaultPortModel } from \"../infrastructure/models/DefaultPortModel\";\nimport { ArrowLinkModel } from \"../infrastructure/models/ArrowLinkModel\";\nimport { AdvancedPortModel } from \"../infrastructure/models/ArrowPortModel\";\nimport { DefaultNodeModel } from \"../infrastructure/models/DefaultNodeModel\";\nimport { DefaultLabelModel } from \"../infrastructure/models/DefaultLabelModel\";\nimport { DefaultLinkModel } from \"../infrastructure/models/DefaultLinkModel\";\nimport { DefaultDiagramState } from \"@projectstorm/react-diagrams\";\nimport { ArrowPortFactory } from \"../infrastructure/factories/ArrowPortFactory\";\nimport { Toolkit } from \"../infrastructure/Toolkit\";\nimport _ from \"lodash\";\n\nexport class Application {\n  protected activeModel!: DiagramModel;\n  protected logicModel!: DiagramModel;\n\n  protected diagramEngine: DiagramEngine;\n\n  constructor() {\n    this.diagramEngine = createEngine();\n\n    this.diagramEngine\n      .getNodeFactories()\n      .registerFactory(new CustomLabelFactory());\n    this.diagramEngine\n      .getNodeFactories()\n      .registerFactory(new DefaultNodeFactory());\n\n    this.diagramEngine\n      .getLabelFactories()\n      .registerFactory(new DefaultLabelFactory());\n\n    this.diagramEngine\n      .getPortFactories()\n      .registerFactory(new DefaultPortFactory());\n    this.diagramEngine\n      .getPortFactories()\n      .registerFactory(new ArrowPortFactory());\n\n    this.diagramEngine\n      .getLinkFactories()\n      .registerFactory(new ArrowLinkFactory());\n    this.diagramEngine\n      .getLinkFactories()\n      .registerFactory(new DefaultLinkFactory());\n\n    const state = this.diagramEngine.getStateMachine().getCurrentState();\n\n    if (state instanceof DefaultDiagramState) {\n      state.dragNewLink.config.allowLooseLinks = false;\n    }\n\n    this.newModel();\n  }\n\n  public newModel() {\n    this.activeModel = new DiagramModel();\n    this.logicModel = new DiagramModel();\n\n    this.diagramEngine.setModel(this.activeModel);\n  }\n\n  public getActiveDiagram(): DiagramModel {\n    return this.activeModel;\n  }\n\n  public getDiagramEngine(): DiagramEngine {\n    return this.diagramEngine;\n  }\n\n  public setLogicModel() {\n    let concNodes = this.activeModel.getNodes();\n\n    Object.keys(concNodes).forEach((k) => {\n      let node = concNodes[k].clone() as DefaultNodeModel;\n\n      let nodePorts = concNodes[k].getPorts();\n\n      Object.keys(nodePorts).filter(id => nodePorts[id].isNamePort).forEach((k) => {\n        let port = nodePorts[k] as DefaultPortModel;\n        let logicPort = new AdvancedPortModel(\n          port.label,\n          port.isNamePort,\n          port.isPrimaryKey,\n          port.isForeignKey,\n          port.isPartialKey,\n          port.isNotNull,\n          port.isAutoincremented,\n          port.isUnique,\n          port.propertyType\n        );\n        node.addPort(logicPort);\n      });\n\n      this.logicModel.addNode(node);\n    });\n\n    let nodes = this.logicModel.getNodes();\n\n    let nodesWithoutPK: DefaultNodeModel[] = [];\n    nodes.map(n => {\n      let ports = n.getPorts() as { [s: string]: DefaultPortModel; }\n\n      let portsWithPK = _.values(ports).filter(port => port.isPrimaryKey);\n\n      if (portsWithPK.length === 0) {\n        nodesWithoutPK.push(n as DefaultNodeModel);\n      }\n    })\n\n\n    let links = this.activeModel.getLinks();\n\n    let priorityLinks = [];\n\n    links.filter(link => {\n      let sourceNode = link.getSourcePort().getParent() as DefaultNodeModel\n      let targetNode = link.getTargetPort().getParent() as DefaultNodeModel\n\n      if (nodesWithoutPK.map(node => node.getOptions().name).includes(sourceNode.getOptions().name) || nodesWithoutPK.map(node => node.getOptions().name).includes(targetNode.getOptions().name)) {\n        priorityLinks.push(link);\n      }\n    })\n\n    console.log('priorityLinks ', priorityLinks)\n\n    let priom2mLinks = priorityLinks.filter(link => {\n      let sourceLabel = (link\n        .getLabels()[0] as DefaultLabelModel).getOptions().label;\n      let targetLabel = (link\n        .getLabels()[2] as DefaultLabelModel).getOptions().label;\n\n      return sourceLabel.includes('N') && targetLabel.includes('N')\n    })\n\n    let priosourceLinks = priorityLinks.filter(link => {\n      let sourceLabel = (link\n        .getLabels()[0] as DefaultLabelModel).getOptions().label;\n      let targetLabel = (link\n        .getLabels()[2] as DefaultLabelModel).getOptions().label;\n\n      return sourceLabel.includes('N') && !targetLabel.includes('N')\n    })\n\n    let priotargetLinks = priorityLinks.filter(link => {\n      let sourceLabel = (link\n        .getLabels()[0] as DefaultLabelModel).getOptions().label;\n      let targetLabel = (link\n        .getLabels()[2] as DefaultLabelModel).getOptions().label;\n\n      return !sourceLabel.includes('N') && targetLabel.includes('N')\n    })\n\n    let priooneToOneLinks = priorityLinks.filter(link => {\n      let sourceLabel = (link\n        .getLabels()[0] as DefaultLabelModel).getOptions().label;\n      let targetLabel = (link\n        .getLabels()[2] as DefaultLabelModel).getOptions().label;\n\n      return !sourceLabel.includes('N') && !targetLabel.includes('N')\n    })\n\n\n    // targetLinks\n    this.convertTargetPorts(priotargetLinks);\n\n    // sourceLinks\n    this.convertSourceLinks(priosourceLinks);\n\n    // M2M LINKS\n    this.convertM2MLink(priom2mLinks);\n\n    this.convertSourceLinks(priooneToOneLinks);\n\n\n\n    let concLinks = this.activeModel.getLinks().filter(link => !priorityLinks.includes(link));\n\n\n    let m2mLinks = concLinks.filter(link => {\n      let sourceLabel = (link\n        .getLabels()[0] as DefaultLabelModel).getOptions().label;\n      let targetLabel = (link\n        .getLabels()[2] as DefaultLabelModel).getOptions().label;\n\n      return sourceLabel.includes('N') && targetLabel.includes('N')\n    })\n\n    let sourceLinks = concLinks.filter(link => {\n      let sourceLabel = (link\n        .getLabels()[0] as DefaultLabelModel).getOptions().label;\n      let targetLabel = (link\n        .getLabels()[2] as DefaultLabelModel).getOptions().label;\n\n      return sourceLabel.includes('N') && !targetLabel.includes('N')\n    })\n\n    let targetLinks = concLinks.filter(link => {\n      let sourceLabel = (link\n        .getLabels()[0] as DefaultLabelModel).getOptions().label;\n      let targetLabel = (link\n        .getLabels()[2] as DefaultLabelModel).getOptions().label;\n\n      return !sourceLabel.includes('N') && targetLabel.includes('N')\n    })\n\n    let oneToOneLinks = concLinks.filter(link => {\n      let sourceLabel = (link\n        .getLabels()[0] as DefaultLabelModel).getOptions().label;\n      let targetLabel = (link\n        .getLabels()[2] as DefaultLabelModel).getOptions().label;\n\n      return !sourceLabel.includes('N') && !targetLabel.includes('N')\n    })\n\n\n\n    // targetLinks\n    this.convertTargetPorts(targetLinks);\n\n    // sourceLinks\n    this.convertSourceLinks(sourceLinks);\n\n    // M2M LINKS\n    this.convertM2MLink(m2mLinks);\n\n    this.convertSourceLinks(oneToOneLinks);\n\n\n    this.diagramEngine.setModel(this.logicModel);\n  }\n\n  public setConceptualModel() {\n    this.logicModel = null;\n    this.logicModel = new DiagramModel();\n\n    let activeModelCopy = new DiagramModel();\n\n    let nodes = this.activeModel.getNodes();\n\n    Object.keys(nodes).forEach((k) => {\n      activeModelCopy.addNode(nodes[k]);\n    });\n\n    let links = this.activeModel.getLinks();\n\n    Object.keys(links).forEach((k) => {\n      activeModelCopy.addLink(links[k]);\n    });\n\n    this.activeModel = activeModelCopy;\n\n    this.diagramEngine.setModel(this.activeModel);\n  }\n\n  public loadConceptualModel(model: DiagramModel) {\n    this.activeModel = model;\n\n    this.diagramEngine.setModel(this.activeModel);\n  }\n\n  public loadLogicModel(model: DiagramModel) {\n    this.logicModel = model;\n    this.diagramEngine.setModel(this.logicModel);\n  }\n\n  public convertM2MLink(m2mLinks: LinkModel<LinkModelGenerics>[]) {\n    Object.keys(m2mLinks).forEach((k) => {\n      let logicNodes = this.logicModel.getNodes() as DefaultNodeModel[];\n\n      let sourceNode = m2mLinks[k].sourcePort.getParent() as DefaultNodeModel;\n      let sourceNodeId = logicNodes\n        .filter(\n          (node) =>\n            (node as DefaultNodeModel).getOptions().name ===\n            sourceNode.getOptions().name\n        )[0]\n        .getOptions().id;\n\n      let targetNode = m2mLinks[k].targetPort.getParent() as DefaultNodeModel;\n      let targetNodeId = logicNodes\n        .filter(\n          (node) =>\n            (node as DefaultNodeModel).getOptions().name ===\n            targetNode.getOptions().name\n        )[0]\n        .getOptions().id;\n\n      let relNode = ((m2mLinks[k] as DefaultLinkModel)\n        .properties as DefaultNodeModel).clone() as DefaultNodeModel;\n\n      relNode.getOptions().name = relNode.getOptions().name = m2mLinks[k].relName;\n\n      relNode.setPosition(\n        sourceNode.getPosition().x + 150,\n        sourceNode.getPosition().y - 100\n      );\n\n      relNode.addPort(\n        new AdvancedPortModel(\n          \"Id\",\n          false,\n          true,\n          false,\n          false,\n          true,\n          true,\n          true,\n          \"INT\"\n        )\n      );\n      relNode.addPort(\n        new AdvancedPortModel(\n          \"\",\n          true,\n          false,\n          false,\n          false,\n          false,\n          false,\n          false,\n          \"INT\"\n        )\n      );\n      relNode.addPort(\n        new AdvancedPortModel(\n          \"1\",\n          true,\n          false,\n          false,\n          false,\n          false,\n          false,\n          false,\n          \"INT\"\n        )\n      );\n\n      let sourceNodeLogic = logicNodes.filter(\n        (n) => n.getOptions().id === sourceNodeId\n      )[0];\n      let sourceNodePorts = sourceNodeLogic.getPorts() as {\n        [s: string]: DefaultPortModel;\n      }\n      let sourceNodePKPort = _.keys(sourceNodePorts).filter(key => sourceNodePorts[key].isPrimaryKey || sourceNodePorts[key].isPartialKey).map(key => sourceNodePorts[key]);\n\n      let targetNodeLogic = logicNodes.filter(\n        (n) => n.getOptions().id === targetNodeId\n      )[0];\n      let targetNodePorts = targetNodeLogic.getPorts() as {\n        [s: string]: DefaultPortModel;\n      }\n      let targetNodePKPort = _.keys(targetNodePorts).filter(key => targetNodePorts[key].isPrimaryKey || targetNodePorts[key].isPartialKey).map(key => targetNodePorts[key]);\n\n      let targetNodePrimaryKeysPorts = _.keys(targetNodePorts).filter(key => targetNodePorts[key].isPrimaryKey).map(key => targetNodePorts[key]);\n      let sourceNodePrimaryKeysPorts = _.keys(sourceNodePorts).filter(key => sourceNodePorts[key].isPrimaryKey).map(key => sourceNodePorts[key]);\n\n      let x = 1\n      sourceNodePKPort.forEach(port => {\n        relNode.addPort(\n          new AdvancedPortModel(\n            sourceNode.getOptions().name + port.label + `${sourceNode === targetNode ? x : ''}`,\n            false,\n            sourceNodePrimaryKeysPorts.length > 0 ? false : true,\n            sourceNodePrimaryKeysPorts.length > 0 ? true : false,\n            false, // partial\n            true,\n            false,\n            false,\n            \"INT\",\n            Toolkit.UID(),\n            sourceNodeId\n          )\n        )\n        x++;\n      }\n      );\n\n\n      targetNodePKPort.forEach(port => {\n        relNode.addPort(\n          new AdvancedPortModel(\n            targetNode.getOptions().name + port.label,\n            false,\n            targetNodePrimaryKeysPorts.length > 0 ? false : true,\n            targetNodePrimaryKeysPorts.length > 0 ? true : false,\n            false,// partial\n            true,\n            false,\n            false,\n            \"INT\",\n            Toolkit.UID(),\n            targetNodeId\n          )\n        );\n      });\n\n      this.logicModel.addNode(relNode);\n\n      let node = logicNodes.filter(\n        (n) => n.getOptions().id === sourceNodeId\n      )[0];\n      let sourceP = node.getPorts()[\"1\"];\n      let targetP = relNode.getPorts()[\"\"];\n\n      let link = new ArrowLinkModel({ type: \"arrow\" });\n\n      link.setSourcePort(sourceP);\n      link.setTargetPort(targetP);\n\n      let node2 = logicNodes.filter(\n        (n) => n.getOptions().id === targetNodeId\n      )[0];\n      let targetP2 = relNode.getPorts()[\"1\"];\n      let sourceP2 = node2.getPorts()[\"\"];\n\n      let link2 = new ArrowLinkModel({ type: \"arrow\" });\n\n      link2.setSourcePort(sourceP2);\n      link2.setTargetPort(targetP2);\n\n      this.logicModel.addAll(link, link2);\n\n    });\n  }\n\n  public convertSourceLinks(sourceLinks: LinkModel<LinkModelGenerics>[]) {\n    Object.keys(sourceLinks).forEach((k) => {\n      let logicNodes = this.logicModel.getNodes() as DefaultNodeModel[];\n\n      let sourceNode = sourceLinks[k].sourcePort.getParent() as DefaultNodeModel;\n      let sourceNodeId = logicNodes\n        .filter(\n          (node) =>\n            (node as DefaultNodeModel).getOptions().name ===\n            sourceNode.getOptions().name\n        )[0]\n        .getOptions().id;\n\n      let targetNode = sourceLinks[k].targetPort.getParent() as DefaultNodeModel;\n      let targetNodeId = logicNodes\n        .filter(\n          (node) =>\n            (node as DefaultNodeModel).getOptions().name ===\n            targetNode.getOptions().name\n        )[0]\n        .getOptions().id;\n\n\n      /// source\n      let sourceNodeLogic = logicNodes.filter(\n        (n) => n.getOptions().id === targetNodeId\n      )[0];\n      let sourceNodePorts = sourceNodeLogic.getPorts() as {\n        [s: string]: DefaultPortModel;\n      }\n      let sourceNodePKPort = _.keys(sourceNodePorts).filter(key => sourceNodePorts[key].isPrimaryKey || sourceNodePorts[key].isPartialKey).map(key => sourceNodePorts[key]);\n      ///\n\n      /// target\n      let node = logicNodes.filter(\n        (n) => n.getOptions().id === sourceNodeId\n      )[0];\n\n      let targetNodePorts = node.getPorts() as {\n        [s: string]: DefaultPortModel;\n      }\n      let targetNodePrimaryKeysPorts = _.keys(targetNodePorts).filter(key => targetNodePorts[key].isPrimaryKey).map(key => targetNodePorts[key]);\n      ///\n      sourceNodePKPort.forEach(port => {\n        node.addPort(\n          new AdvancedPortModel(\n            targetNode.getOptions().name + port.label,\n            false,\n            targetNodePrimaryKeysPorts.length > 0 ? false : true,\n            targetNodePrimaryKeysPorts.length > 0 ? true : false,\n            false,//PARTIAL\n            true,\n            false,\n            false,\n            \"INT\",\n            Toolkit.UID(),\n            targetNodeId\n          )\n        );\n      })\n      // wez partialKeys z node i zmien je na PK\n      let nodePorts = node.getPorts() as { [s: string]: DefaultPortModel; }\n      let newPKPorts = _.keys(nodePorts).filter(key => nodePorts[key].isPartialKey).map(key => nodePorts[key]);\n\n      newPKPorts.map(port => port.isPrimaryKey = true);\n      // wez partialKeys z node i zmien je na PK\n\n      let relNode = ((sourceLinks[k] as DefaultLinkModel)\n      .properties as DefaultNodeModel).clone() as DefaultNodeModel;\n\n      let relPorts = relNode.getPorts() as { [s: string]: DefaultPortModel; }\n\n      _.values(relPorts).map(port => {\n        let logicPort = new AdvancedPortModel(\n          port.label,\n          port.isNamePort,\n          port.isPrimaryKey,\n          port.isForeignKey,\n          port.isPartialKey,\n          port.isNotNull,\n          port.isAutoincremented,\n          port.isUnique,\n          port.propertyType\n        );\n        node.addPort(logicPort);\n      })\n\n      let tNode = logicNodes.filter(\n        (n) => n.getOptions().id === targetNodeId\n      )[0];\n\n      let targetP = node.getPorts()[\"1\"];\n      let sourceP = tNode.getPorts()[\"\"];\n\n      let link = new ArrowLinkModel({ type: \"arrow\" });\n\n      link.setSourcePort(sourceP);\n      link.setTargetPort(targetP);\n      this.logicModel.addLink(link);\n    });\n  }\n\n  public convertTargetPorts(targetLinks: LinkModel<LinkModelGenerics>[]) {\n    Object.keys(targetLinks).forEach((k) => {\n      let logicNodes = this.logicModel.getNodes() as DefaultNodeModel[];\n\n      let sourceNode = targetLinks[k].sourcePort.getParent() as DefaultNodeModel;\n      let sourceNodeId = logicNodes\n        .filter(\n          (node) =>\n            (node as DefaultNodeModel).getOptions().name ===\n            sourceNode.getOptions().name\n        )[0]\n        .getOptions().id;\n\n      let targetNode = targetLinks[k].targetPort.getParent() as DefaultNodeModel;\n      let targetNodeId = logicNodes\n        .filter(\n          (node) =>\n            (node as DefaultNodeModel).getOptions().name ===\n            targetNode.getOptions().name\n        )[0]\n        .getOptions().id;\n\n\n\n      /// source\n      let sourceNodeLogic = logicNodes.filter(\n        (n) => n.getOptions().id === sourceNodeId\n      )[0];\n      let sourceNodePorts = sourceNodeLogic.getPorts() as {\n        [s: string]: DefaultPortModel;\n      }\n      let sourceNodePKPort = _.keys(sourceNodePorts).filter(key => sourceNodePorts[key].isPrimaryKey || sourceNodePorts[key].isPartialKey).map(key => sourceNodePorts[key]);\n      ///\n\n      /// target\n      let node = logicNodes.filter(\n        (n) => n.getOptions().id === targetNodeId\n      )[0];\n\n      let targetNodePorts = node.getPorts() as {\n        [s: string]: DefaultPortModel;\n      }\n      let targetNodePrimaryKeysPorts = _.keys(targetNodePorts).filter(key => targetNodePorts[key].isPrimaryKey).map(key => targetNodePorts[key]);\n      ///\n\n      sourceNodePKPort.forEach(port => {\n        node.addPort(\n          new AdvancedPortModel(\n            sourceNode.getOptions().name + port.label,\n            false,\n            targetNodePrimaryKeysPorts.length > 0 ? false : true,\n            targetNodePrimaryKeysPorts.length > 0 ? true : false,\n            false,//PARTIAL\n            true,\n            false,\n            false,\n            \"INT\",\n            Toolkit.UID(),\n            sourceNodeId\n          )\n        );\n      })\n      // wez partialKeys z node i zmien je na PK\n      let nodePorts = node.getPorts() as { [s: string]: DefaultPortModel; }\n      let newPKPorts = _.keys(nodePorts).filter(key => nodePorts[key].isPartialKey).map(key => nodePorts[key]);\n\n      newPKPorts.map(port => port.isPrimaryKey = true);\n      // wez partialKeys z node i zmien je na PK\n\n      let relNode = ((targetLinks[k] as DefaultLinkModel)\n      .properties as DefaultNodeModel).clone() as DefaultNodeModel;\n\n      let relPorts = relNode.getPorts() as { [s: string]: DefaultPortModel; }\n\n      _.values(relPorts).map(port => {\n        let logicPort = new AdvancedPortModel(\n          port.label,\n          port.isNamePort,\n          port.isPrimaryKey,\n          port.isForeignKey,\n          port.isPartialKey,\n          port.isNotNull,\n          port.isAutoincremented,\n          port.isUnique,\n          port.propertyType\n        );\n        node.addPort(logicPort);\n      })\n\n      let tNode = logicNodes.filter(\n        (n) => n.getOptions().id === sourceNodeId\n      )[0];\n\n      let targetP = node.getPorts()[\"\"];\n      let sourceP = tNode.getPorts()[\"1\"];\n\n      let link = new ArrowLinkModel({ type: \"arrow\" });\n\n      link.setSourcePort(sourceP);\n      link.setTargetPort(targetP);\n      this.logicModel.addLink(link);\n    });\n  }\n}\n","import * as React from \"react\";\nimport { BodyWidget } from \"./components/BodyWidget\";\nimport { Application } from \"./components/Application\";\n\nexport default () => {\n  var app = new Application();\n  return (\n    <div className=\"content\">\n      <BodyWidget app={app} />\n    </div>\n  );\n};\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === \"localhost\" ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === \"[::1]\" ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener(\"load\", () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            \"This web app is being served cache-first by a service \" +\n              \"worker. To learn more, visit https://bit.ly/CRA-PWA\"\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === \"installed\") {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                \"New content is available and will be used when all \" +\n                  \"tabs for this page are closed. See https://bit.ly/CRA-PWA.\"\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log(\"Content is cached for offline use.\");\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error(\"Error during service worker registration:\", error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { \"Service-Worker\": \"script\" },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get(\"content-type\");\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf(\"javascript\") === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        \"No internet connection found. App is running in offline mode.\"\n      );\n    });\n}\n\nexport function unregister() {\n  if (\"serviceWorker\" in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","import \"./icons/micon/css/micon.min.css\";\nimport \"react-bootstrap-table-next/dist/react-bootstrap-table2.min.css\";\n\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\n\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}