(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{139:function(e,t,a){},212:function(e,t,a){},214:function(e,t,a){},216:function(e,t,a){},218:function(e,t,a){},221:function(e,t,a){"use strict";a.r(t);a(74),a(76),a(78),a(80),a(20);var n,r=a(0),i=a.n(r),l=a(1),o=a(6),c=a(3),s=a(4),u=a(2),m=a(5),d=a(10),p=a(12),g=a.n(p),b=a(39),h=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,"custom"))).label=void 0,a.label=e,a.offsetY=-23,a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"setLabel",value:function(e){this.label=e}},{key:"deSerialize",value:function(e,a){Object(d.a)(Object(u.a)(t.prototype),"deSerialize",this).call(this,e,a),this.label=e.label}},{key:"serialize",value:function(){return p.merge(Object(d.a)(Object(u.a)(t.prototype),"serialize",this).call(this),{label:this.label})}}]),t}(c.LabelModel),f=function(e){function t(){var e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"custom";return Object(l.a)(this,t),(e=Object(s.a)(this,Object(u.a)(t).call(this,a))).width=void 0,e.color=void 0,e.curvyness=void 0,e.color="rgba(255,255,255,0.5)",e.width=3,e.curvyness=300,e.addLabel("0,N"),e.addLabel("relation name"),e.addLabel("0,N"),e}return Object(m.a)(t,e),Object(o.a)(t,[{key:"serialize",value:function(){return p.merge(Object(d.a)(Object(u.a)(t.prototype),"serialize",this).call(this),{width:this.width,color:this.color,curvyness:this.curvyness})}},{key:"deSerialize",value:function(e,a){Object(d.a)(Object(u.a)(t.prototype),"deSerialize",this).call(this,e,a),this.color=e.color,this.width=e.width,this.curvyness=e.curvyness}},{key:"addLabel",value:function(e){if(e instanceof c.LabelModel)return Object(d.a)(Object(u.a)(t.prototype),"addLabel",this).call(this,e);var a=new h("custom");return a.setLabel(e),Object(d.a)(Object(u.a)(t.prototype),"addLabel",this).call(this,a)}},{key:"setWidth",value:function(e){this.width=e,this.iterateListeners(function(t,a){t.widthChanged&&t.widthChanged(Object(b.a)({},a,{width:e}))})}},{key:"setColor",value:function(e){this.color=e,this.iterateListeners(function(t,a){t.colorChanged&&t.colorChanged(Object(b.a)({},a,{color:e}))})}}]),t}(c.LinkModel),v=function(e){function t(e,a,n,r,i,o,c,m,d){var p;return Object(l.a)(this,t),(p=Object(s.a)(this,Object(u.a)(t).call(this,e,"custom",d))).in=void 0,p.isNamePort=void 0,p.label=void 0,p.links=void 0,p.isPrimaryKey=void 0,p.isForeignKey=void 0,p.isAutoincremented=void 0,p.isNotNull=void 0,p.isUnique=void 0,p.propertyType=void 0,p.label=e,p.isNamePort=a,p.links={},p.isPrimaryKey=n,p.isForeignKey=r,p.isNotNull=i,p.isUnique=c,p.isAutoincremented=o,p.propertyType=m,p}return Object(m.a)(t,e),Object(o.a)(t,[{key:"deSerialize",value:function(e,a){Object(d.a)(Object(u.a)(t.prototype),"deSerialize",this).call(this,e,a),this.label=e.label,this.isNamePort=e.isNamePort,this.isPrimaryKey=e.isPrimaryKey,this.isForeignKey=e.isForeignKey,this.isNotNull=e.isNotNull,this.isUnique=e.isUnique,this.isAutoincremented=e.isAutoincremented,this.propertyType=e.propertyType}},{key:"serialize",value:function(){return p.merge(Object(d.a)(Object(u.a)(t.prototype),"serialize",this).call(this),{label:this.label,links:this.links,isNamePort:this.isNamePort,isPrimaryKey:this.isPrimaryKey,isForeignKey:this.isForeignKey,isNotNull:this.isNotNull,isUnique:this.isUnique,isAutoincremented:this.isAutoincremented,propertyType:this.propertyType})}},{key:"canLinkToPort",value:function(e){return!0}},{key:"createLinkModel",value:function(){return new f("custom")}}]),t}(c.PortModel),y=function(e){function t(e){var a,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Untitled",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"rgb(0,192,255)";return Object(l.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,"custom"))).name=void 0,a.color=void 0,a.ports=void 0,a.isLabel=void 0,a.name=n,a.color=r,a.ports={},a.isLabel=e,a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"addInPort",value:function(e,t,a,n,r,i,l,o){return this.addPort(new v(t,e,a,n,l,i,r,o,c.Toolkit.UID()))}},{key:"addOutPort",value:function(e,t,a,n,r,i,l,o){return this.addPort(new v(t,e,a,n,l,i,r,o,c.Toolkit.UID()))}},{key:"deSerialize",value:function(e,a){Object(d.a)(Object(u.a)(t.prototype),"deSerialize",this).call(this,e,a),this.name=e.name,this.color=e.color}},{key:"serialize",value:function(){return p.merge(Object(d.a)(Object(u.a)(t.prototype),"serialize",this).call(this),{name:this.name,color:this.color})}},{key:"getInPorts",value:function(){return p.filter(this.ports,function(e){return e.in})}},{key:"getOutPorts",value:function(){return p.filter(this.ports,function(e){return!e.in})}}]),t}(c.NodeModel),E=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,"srd-default-node",e))).state={},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.createElement("div",Object.assign({},this.getProps(),{style:{background:this.props.node.color}}),r.createElement("div",{className:this.bem("__title")},r.createElement("div",{className:this.bem("__name")},this.props.node.name)))}}]),t}(c.BaseWidget),O=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(u.a)(t).call(this,"label"))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"generateReactWidget",value:function(e,t){return r.createElement(E,{node:t,diagramEngine:e})}},{key:"getNewInstance",value:function(e){return new y(!1,null,"label")}}]),t}(c.AbstractNodeFactory),N=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(u.a)(t).call(this,"custom"))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"getNewInstance",value:function(e){return new v("custom",!0,!1)}}]),t}(c.AbstractPortFactory);!function(e){e.BIT="BIT",e.TINYINT="TINYINT",e.SMALLINT="SMALLINT",e.INT="INT",e.BIGINT="BIGINT",e.DECIMAL="DECIMAL",e.NUMERIC="NUMERIC",e.FLOAT="FLOAT",e.REAL="REAL",e.DATE="DATE",e.TIME="TIME",e.DATETIME="DATETIME",e.TIMESTAMP="TIMESTAMP",e.YEAR="YEAR",e.CHAR="CHAR",e.VARCHAR="VARCHAR",e.VARCHARMAX="VARCHARMAX",e.TEXT="TEXT",e.NCHAR="NCHAR",e.NVARCHAR="NVARCHAR",e.NVARCHARMAX="NVARCHARMAX",e.NTEXT="NTEXT",e.BINARY="BINARY",e.VARBINARY="VARBINARY",e.VARBINARYMAX="VARBINARYMAX",e.IMAGE="IMAGE",e.CLOB="CLOB",e.BLOB="BLOB",e.XML="XML",e.JSON="JSON"}(n||(n={}));var j=function(e){function t(e){return Object(l.a)(this,t),Object(s.a)(this,Object(u.a)(t).call(this,"custom",e))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"getClassName",value:function(){return Object(d.a)(Object(u.a)(t.prototype),"getClassName",this).call(this)+(this.props.model.in,this.bem("--in"))}},{key:"render",value:function(){var e,t={display:"inline-block",marginRight:"5px"};this.props.model.isNamePort?e=i.a.createElement(c.PortWidget,{node:this.props.model.getParent(),name:this.props.model.name}):(this.props.model.setLocked(),e=i.a.createElement(c.PortWidget,{node:this.props.model.getParent(),name:this.props.model.name}));var a=i.a.createElement("div",{className:"name"},i.a.createElement("div",null,this.props.model.label," ",void 0!==this.props.model.propertyType?n[this.props.model.propertyType]:null)),r=this.props.model.isPrimaryKey?i.a.createElement("span",{className:"mi mi-Permissions",style:{paddingLeft:5,paddingRight:5,color:"black",fontWeight:800}}):null;return this.props.model.isNamePort?i.a.createElement("div",{style:{marginRight:"5px"}},e):i.a.createElement("div",Object.assign({style:{display:"flex",justifyContent:"flex-end"}},this.getProps()),i.a.createElement("div",{style:t},r),i.a.createElement("div",{style:t},a),i.a.createElement("div",{style:{display:"none"}},e))}}]),t}(c.BaseWidget),k=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,"srd-default-node",e))).state={},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"generatePort",value:function(e){return i.a.createElement(j,{model:e,key:e.id})}},{key:"render",value:function(){var e=this.props.node.getPorts(),t=p.map(e,this.generatePort.bind(this)),a=t.filter(function(e){return e.props.model.isNamePort}),n=t.filter(function(e){return!e.props.model.isNamePort});return i.a.createElement("div",Object.assign({},this.getProps(),{style:{background:this.props.node.color}}),i.a.createElement("div",{className:this.bem("__title")},0!==a.length&&i.a.createElement("div",{style:{marginLeft:"5px"}},this.generatePort(a[1].props.model)),i.a.createElement("div",{className:this.bem("__name")},this.props.node.name),0!==a.length&&this.generatePort(a[0].props.model)),i.a.createElement("div",{className:this.bem("__ports")},i.a.createElement("div",{className:this.bem("__in")},n)))}}]),t}(c.BaseWidget),C=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(u.a)(t).call(this,"custom"))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"generateReactWidget",value:function(e,t){return i.a.createElement(k,{node:t,diagramEngine:e})}},{key:"getNewInstance",value:function(e){return new y(!1,null,"custom")}}]),t}(c.AbstractNodeFactory),A=function(e){function t(e){return Object(l.a)(this,t),Object(s.a)(this,Object(u.a)(t).call(this,"srd-default-label",e))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.createElement("div",this.getProps(),this.props.model.label)}}]),t}(c.BaseWidget),D=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(u.a)(t).call(this,"custom"))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"generateReactWidget",value:function(e,t){return r.createElement(A,{model:t})}},{key:"getNewInstance",value:function(e){return new h("")}}]),t}(c.AbstractLabelFactory),I=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(u.a)(t).call(this,"custom"))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"generateReactWidget",value:function(e,t){return r.createElement(c.DefaultLinkWidget,{link:t,diagramEngine:e})}},{key:"getNewInstance",value:function(e){return new f("custom")}},{key:"generateLinkSegment",value:function(e,t,a,n){return r.createElement("path",{className:a?t.bem("--path-selected"):"",strokeWidth:e.width,stroke:e.color,d:n})}}]),t}(c.AbstractLinkFactory),P=function(){function e(){Object(l.a)(this,e),this.activeModel=void 0,this.diagramEngine=void 0,this.diagramEngine=new c.DiagramEngine,this.diagramEngine.registerNodeFactory(new O),this.diagramEngine.registerLinkFactory(new I),this.diagramEngine.registerLabelFactory(new D),this.diagramEngine.registerNodeFactory(new C),this.diagramEngine.registerPortFactory(new N),this.diagramEngine.installDefaultFactories(),this.newModel()}return Object(o.a)(e,[{key:"newModel",value:function(){this.activeModel=new c.DiagramModel,this.diagramEngine.setDiagramModel(this.activeModel)}},{key:"getActiveDiagram",value:function(){return this.activeModel}},{key:"getDiagramEngine",value:function(){return this.diagramEngine}}]),e}(),w=a(8),S=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return r.createElement("div",{style:{borderColor:this.props.color},draggable:!0,onDragStart:function(t){t.dataTransfer.setData("storm-diagram-node",JSON.stringify(e.props.model))},className:"tray-item"},this.props.name)}}]),t}(r.Component),T=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.createElement("div",{className:"tray"},this.props.children)}}]),t}(r.Component);T.defaultProps={};a(86);var M=a(68),x=a.n(M),L=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.createElement("div",{style:this.props.style,className:this.buildClassNameString()},this.props.children)}},{key:"buildClassNameString",value:function(){var e="ms-Grid";return null!=this.props.className&&(e+=" ".concat(this.props.className)),e}}]),t}(r.Component),R=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.createElement("div",{className:this.buildClassNameString()},this.props.children)}},{key:"buildClassNameString",value:function(){var e="ms-Grid-row";return this.props.flex&&(e+=" grid-row-flex"),null!=this.props.className&&(e+=" ".concat(this.props.className)),e}}]),t}(r.Component),F=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.createElement("div",{className:this.buildClassNameString(),onDoubleClick:this.props.onDoubleClick},this.props.children)}},{key:"buildGridColConfigClassNames",value:function(e,t){if(null==t)return"";var a=" ms-".concat(e);return"string"===typeof t?a+=t:(a+=t.size,null!=t.pull&&(a+=" ms-".concat(e,"Pull").concat(t.pull)),null!=t.push&&(a+=" ms-".concat(e,"Push").concat(t.push)),null!=t.offset&&(a+=" ms-".concat(e,"Offset").concat(t.offset)),null!=t.order&&(a+=" grid-flex-order-".concat(e,"-").concat(t.order))),a}},{key:"buildClassNameString",value:function(){var e="ms-Grid-col";return null!=this.props.className&&(e+=" ".concat(this.props.className)),null!=this.props.hidden&&(e+=" ms-hidden".concat(this.props.hidden)),null!=this.props.order&&(e+=" grid-flex-order-".concat(this.props.order)),e+=this.buildGridColConfigClassNames("sm",this.props.sm),e+=this.buildGridColConfigClassNames("md",this.props.md),e+=this.buildGridColConfigClassNames("lg",this.props.lg),e+=this.buildGridColConfigClassNames("xl",this.props.xl),e+=this.buildGridColConfigClassNames("xxl",this.props.xxl),e+=this.buildGridColConfigClassNames("xxxl",this.props.xxxl)}}]),t}(r.Component);function B(){var e=r.useState(0),t=Object(w.a)(e,2),a=(t[0],t[1]);return function(){return a(function(e){return++e})}}var z=function(e){var t=r.useState(null),a=Object(w.a)(t,2),i=a[0],l=a[1],o=r.useState(""),c=Object(w.a)(o,2),s=c[0],u=c[1],m=r.useState(!1),d=Object(w.a)(m,2),p=d[0],g=d[1],b=B();r.useMemo(function(){l(e.selectedItem),u(e.selectedItem.name)},[e.selectedItem]);var h=[{dataField:"label",text:"Property Name",formatter:function(e,t){return r.createElement("div",{className:"input"},r.createElement("input",{className:"darkInput",type:"text",defaultValue:t.label,onChange:function(e){return function(e,t){e.persist(),i.getPortFromID(t.id).label=e.target.value}(e,t)}}))}},{style:{paddingLeft:0},dataField:"propertyType",text:"Property Type",formatter:function(e,t){return r.createElement("div",{className:"checkbox"},r.createElement("label",null,r.createElement("select",{className:"darkSelect",onChange:function(e){return function(e,t){e.persist(),i.getPortFromID(t.id).propertyType=e.target.value,b()}(e,t)},value:n[t.propertyType]},Object.values(n).map(function(e){return r.createElement("option",{key:e,value:e},e)}))))}},{dataField:"isPrimaryKey",text:"Is Primary Key",formatter:function(e,t){return r.createElement("div",{className:"checkbox"},r.createElement("label",null,r.createElement("input",{type:"checkbox",checked:t.isPrimaryKey,onChange:function(e){return function(e,t){e.persist(),i.getPortFromID(t.id).isPrimaryKey=!t.isPrimaryKey,b()}(e,t)}})))}},{dataField:"isNotNull",text:"Is Nullable",formatter:function(e,t){return r.createElement("div",{className:"checkbox"},r.createElement("label",null,r.createElement("input",{type:"checkbox",checked:t.isNotNull,onChange:function(e){return function(e,t){e.persist(),i.getPortFromID(t.id).isNotNull=!t.isNotNull,b()}(e,t)}})))}},{dataField:"isAutoincremented",text:"Is Auto Incremented",formatter:function(e,t){return r.createElement("div",{className:"checkbox"},r.createElement("label",null,r.createElement("input",{type:"checkbox",checked:t.isAutoincremented,onChange:function(e){return function(e,t){e.persist(),i.getPortFromID(t.id).isAutoincremented=!t.isAutoincremented,b()}(e,t)}})))}},{dataField:"isUnique",text:"Is Unique",formatter:function(e,t){return r.createElement("div",{className:"checkbox"},r.createElement("label",null,r.createElement("input",{type:"checkbox",checked:t.isUnique,onChange:function(e){return function(e,t){e.persist(),i.getPortFromID(t.id).isUnique=!t.isUnique,b()}(e,t)}})))}},{dataField:"remove",text:"Remove",formatter:function(t,a){return r.createElement("div",{className:"checkbox"},r.createElement("label",null,r.createElement("span",{onClick:function(){return function(t){0!==Object.entries(t.links).length&&t.links.constructor===Object&&Object.keys(t.links).map(function(e){return t.links[e]}).forEach(function(t){return e.diagramEngine.getDiagramModel().removeLink(t)});i.removePort(t),b()}(a)},className:"mi mi-Delete red"})))}}],f=i&&i.ports&&i.ports,v=f&&Object.keys(f).map(function(e){return f[e]}).filter(function(e){return!e.isNamePort});return i?r.createElement("div",{className:"trayBottom"},r.createElement(L,null,r.createElement(R,null,r.createElement(F,null,p?r.createElement("input",{className:"darkInput fs-24",defaultValue:s,onChange:function(t){return function(t){t.persist();var a=e.diagramEngine.diagramModel.getNodes(),n=Object.values(a).map(function(e){return a[e.id].name});i.name=n.includes(t.target.value)?t.target.value+" ALREADY TAKEN!!":t.target.value,b()}(t)}}):r.createElement("h1",{onDoubleClick:function(){return g(!0)}},s)),i.isLabel?null:r.createElement(F,{className:"tableFixHead"},r.createElement(x.a,{keyField:"id",data:v,columns:h,bordered:!1}),r.createElement("p",{className:"mouse-cursor",onClick:function(){return e=v.length,i.addInPort(!1,"new port ".concat(e),!1,!1,!1,!1,!1,n.INT),void b();var e}},"Add new prop"))))):null},q=a(38),K=a.n(q),U=a(69),W=(a(139),a(14)),G=a(70),V=a.n(G),H=a(29),X=a.n(H),Y=function(e){var t=Object(r.useState)("DatabaseName"),a=Object(w.a)(t,2),n=a[0],l=a[1],o=e.mssqlString&&V.a.format(e.mssqlString,{language:"sql",indent:"  "});return i.a.createElement(W.a,{modal:!0,closeOnDocumentClick:!0,open:e.isOpen,closeOnEscape:!0},i.a.createElement("div",{className:"sql-result-dialog"},i.a.createElement("input",{style:{marginRight:"10px"},type:"text",onChange:function(e){return l(e.target.value)},value:n}),i.a.createElement("button",{onClick:function(){return e.generateScript(n)}},"Generate"),i.a.createElement("textarea",{style:{marginTop:"5px"},readOnly:!0,value:o,contentEditable:!1}),i.a.createElement("button",{style:{marginRight:"10px"},onClick:function(){var t=new Blob([o],{type:"text/plain;charset=utf-8"});X.a.saveAs(t,"".concat(n,".sql")),e.update()}},"Download MSSQL")))},_=a(71),J=a.n(_),Q=function(e){var t=Object(r.useState)(""),a=Object(w.a)(t,2),n=a[0],l=a[1],o=function(){var t=Object(U.a)(K.a.mark(function t(a){var n,r;return K.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(e.serializeDiagram),n=JSON.stringify(e.serializeDiagram,null,2),t.next=4,J.a.post("http://localhost:5000/api/setjob",{SerializedModel:n,DatabaseName:a});case 4:200===(r=t.sent).status?l(r.data):console.log("there was an error while processing your request");case 6:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}();return i.a.createElement(Y,{update:e.update,mssqlString:n,generateScript:function(e){return o(e)},isOpen:e.isOpen})},$=(a(212),function(e){var t=Object(r.useState)("0, N"),a=Object(w.a)(t,2),n=a[0],l=a[1],o=Object(r.useState)("0, N"),c=Object(w.a)(o,2),s=c[0],u=c[1],m=Object(r.useState)("relation name"),d=Object(w.a)(m,2),p=d[0],g=d[1],b=e.link&&e.link.sourcePort&&e.link.sourcePort.parent,h=e.link&&e.link.targetPort&&e.link.targetPort.parent,f=i.a.createElement(i.a.Fragment,null,i.a.createElement("option",{value:"1, N"},"1, N"),i.a.createElement("option",{value:"0, N"},"0, N"),i.a.createElement("option",{value:"0, 1"},"0, 1"),i.a.createElement("option",{value:"1, 1"},"1, 1"),i.a.createElement("option",{value:"N, N"},"N, N")),v=function(e){return i.a.createElement("div",{className:"grid-item"},i.a.createElement("select",{className:"darkSelect",onChange:function(t){return"left"===e?l(t.target.value):u(t.target.value)},value:"left"===e?n:s},f))};return i.a.createElement(W.a,{modal:!0,closeOnDocumentClick:!0,open:e.isOpen,closeOnEscape:!0},i.a.createElement("div",{className:"SQLResultDialog"},i.a.createElement("div",{className:"grid-container"},i.a.createElement("div",{className:"grid-item"},i.a.createElement("p",null,b&&b.name)),i.a.createElement("div",{className:"grid-item"},i.a.createElement("input",{className:"darkInput",type:"text",defaultValue:p,onChange:function(e){return g(e.target.value)}})),i.a.createElement("div",{className:"grid-item"},i.a.createElement("p",null,h&&h.name)),v("left"),i.a.createElement("div",{className:"grid-item"},i.a.createElement("button",{onClick:function(){var t=e.link.labels;t[0].label=n,t[2].label=s,t[1].label=p;for(var a=e.link.points,r=1;r<a.length-1;r++)a[r].remove();e.update()}},"SAVE")),v("right"),i.a.createElement("div",{className:"grid-item"}),i.a.createElement("div",{className:"grid-item"},i.a.createElement("button",{onClick:function(){e.diagramModel.removeLink(e.link),e.update()}},"Remove")),i.a.createElement("div",{className:"grid-item"}))))}),Z=(a(214),function(e){var t,a=Object(r.useState)(""),n=Object(w.a)(a,2),l=n[0],o=n[1],c=function(e){var a=t.result;o(a)};return i.a.createElement(W.a,{modal:!0,closeOnDocumentClick:!0,open:e.isOpen,closeOnEscape:!0,onClose:function(){return e.update()}},i.a.createElement("div",{className:"sql-result-dialog"},i.a.createElement("input",{type:"file",onChange:function(e){return a=e.target.files[0],(t=new FileReader).onloadend=c,void t.readAsText(a);var a},accept:".dbjson"}),i.a.createElement("button",{onClick:function(){return e.loadDiagram(l)}},"Load")))}),ee=function(e){return i.a.createElement(Z,{update:e.update,loadDiagram:function(t){return function(t){var a=e.app.getDiagramEngine(),n=JSON.parse(t),r=new c.DiagramModel;r.deSerializeDiagram(n,a),Object.keys(r.links).map(function(e){return r.links[e]}).forEach(function(e){e.labels.splice(0,3)}),a.setDiagramModel(r),a.repaintCanvas(),console.log(a.diagramModel.serializeDiagram()),e.update()}(t)},isOpen:e.isOpen})},te=(a(216),function(e){var t=Object(r.useState)("diagram"),a=Object(w.a)(t,2),n=a[0],l=a[1];return i.a.createElement(W.a,{modal:!0,closeOnDocumentClick:!0,open:e.isOpen,closeOnEscape:!0,onClose:function(){return e.update()}},i.a.createElement("div",{className:"sql-result-dialog"},i.a.createElement("input",{type:"text",onChange:function(e){return l(e.target.value)},value:n}),i.a.createElement("button",{onClick:function(){var t=JSON.stringify(e.diagramModel.serializeDiagram()),a=new Blob([t],{type:"text/plain;charset=utf-8"});X.a.saveAs(a,"".concat(n,".dbjson")),e.update()}},"save")))}),ae=(a(218),a(72)),ne=a.n(ae),re=function(e){var t=Object(r.useState)("diagram"),a=Object(w.a)(t,2),n=a[0],l=a[1];return i.a.createElement(W.a,{modal:!0,closeOnDocumentClick:!0,open:e.isOpen,closeOnEscape:!0,onClose:function(){return e.update()}},i.a.createElement("div",{className:"sql-result-dialog"},i.a.createElement("input",{type:"text",onChange:function(e){return l(e.target.value)},value:n}),i.a.createElement("button",{onClick:function(){ne.a.toJpeg(document.getElementById("diagram-layer"),{quality:.95}).then(function(t){var a=document.createElement("a");a.download="".concat(n,".jpeg"),a.href=t,a.click(),e.update()})}},"save")))};a(67),a(20);var ie=function(e){var t=r.useState(!1),a=Object(w.a)(t,2),i=a[0],l=a[1],o=r.useState(!1),s=Object(w.a)(o,2),u=s[0],m=s[1],d=r.useState(!1),p=Object(w.a)(d,2),b=p[0],h=p[1],f=r.useState(!1),v=Object(w.a)(f,2),E=v[0],O=v[1],N=r.useState(!1),j=Object(w.a)(N,2),k=j[0],C=j[1],A=r.useState(!1),D=Object(w.a)(A,2),I=D[0],P=D[1],M=r.useState(null),x=Object(w.a)(M,2),L=x[0],R=x[1],F=r.useState(null),q=Object(w.a)(F,2),K=q[0],U=q[1],W=B();r.useEffect(function(){R(null),U(null)},[]);var G=function(){U(null),R(null),l(!1),O(!1),C(!1),P(!1),h(!1),m(!1)};return r.createElement("div",{className:"body"},r.createElement("div",{className:"header"},r.createElement("div",{className:"title"},"DB Diagram Scripter")),r.createElement("div",{className:"content",ref:null},r.createElement(T,null,r.createElement(S,{model:{type:"table"},name:"Entity",color:"rgb(0,192,255)"}),r.createElement(S,{model:{type:"label"},name:"Label",color:"rgb(192,255,0)"}),r.createElement("div",{style:{borderColor:"rgb(255,123,0)",marginTop:"100px"},className:"tray-item",onClick:function(){h(!0),R(null)}},"Load Diagram"),r.createElement("div",{style:{display:"flex",justifyContent:"space-between",borderColor:"rgb(255,123,0)"},className:"tray-item",onClick:function(){P(!I),R(null)}},"Save",r.createElement("span",{style:{display:"inline-block",paddingTop:3,paddingRight:5},className:"mi ".concat(I?"mi-ArrowUp8":"mi-ArrowDown8")})),I&&r.createElement("div",{style:{borderColor:"rgb(255,123,0)"},className:"tray-item",onClick:function(){O(!0),R(null)}},"File"),I&&r.createElement("div",{style:{borderColor:"rgb(255,123,0)"},className:"tray-item",onClick:function(){C(!0),R(null)}},"JPEG"),r.createElement("div",{style:{borderColor:"rgb(255,0,0)",marginTop:"100px"},className:"tray-item",onClick:function(){l(!0),R(null)}},"Create DB Code")),r.createElement("div",{id:"diagram-layer",className:"diagram-layer",onDrop:function(t){t.preventDefault();var a=JSON.parse(t.dataTransfer.getData("storm-diagram-node")),r=g.a.keys(e.app.getDiagramEngine().getDiagramModel().getNodes()).length,i=null;"table"===a.type?((i=new y(!1,"Entity".concat(r+1),"rgb(0,192,255)")).addInPort(!1,"Id",!0,!1,!1,!1,!1,n.INT),i.addInPort(!0,"",!1,!1,!1,!1,!1,n.INT),i.addInPort(!0,"1",!1,!1,!1,!1,!1,n.INT),i.addListener({})):i=new y(!0,"Label ","rgb(192,255,0)");var l=e.app.getDiagramEngine().getRelativeMousePoint(t);i.x=l.x,i.y=l.y,e.app.getDiagramEngine().getDiagramModel().addNode(i),W()},onDragOver:function(e){e.preventDefault()},onClick:function(e){e.preventDefault(),G()},onDoubleClick:function(t){t.preventDefault(),e.app.getDiagramEngine().getDiagramModel().getSelectedItems()[0]instanceof c.PointModel?(U(e.app.getDiagramEngine().getDiagramModel().getSelectedItems()[0].parent),m(!0),R(null)):e.app.getDiagramEngine().getDiagramModel().getSelectedItems()[0]instanceof y&&(G(),R(e.app.getDiagramEngine().getDiagramModel().getSelectedItems()[0]))}},r.createElement(c.DiagramWidget,{allowLooseLinks:!0,deleteKeys:[46],className:"srd-demo-canvas",diagramEngine:e.app.getDiagramEngine()})),null!=L?r.createElement(z,{selectedLink:K,selectedItem:L,diagramEngine:e.app.getDiagramEngine()}):null,r.createElement(Q,{update:G,isOpen:i,serializeDiagram:e.app.getDiagramEngine().diagramModel.serializeDiagram()}),r.createElement(ee,{update:G,isOpen:b,app:e.app}),r.createElement(te,{update:G,diagramModel:e.app.getActiveDiagram(),isOpen:E}),r.createElement(re,{update:G,diagramModel:e.app.getActiveDiagram(),isOpen:k}),r.createElement($,{diagramModel:e.app.getActiveDiagram(),update:G,isOpen:u,link:K})))};a(20),a(67);var le=function(){return r.createElement(ie,{app:new P})},oe=a(28);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));oe.render(r.createElement(le,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},73:function(e,t,a){e.exports=a(221)},74:function(e,t,a){},76:function(e,t,a){},78:function(e,t,a){},80:function(e,t,a){},86:function(e,t,a){}},[[73,2,1]]]);
//# sourceMappingURL=main.9ddd2ca9.chunk.js.map