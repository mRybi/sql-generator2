(this["webpackJsonpsql-gen2"]=this["webpackJsonpsql-gen2"]||[]).push([[0],{271:function(e,t,n){e.exports=n(576)},272:function(e,t,n){},277:function(e,t,n){},278:function(e,t,n){},497:function(e,t,n){},498:function(e,t,n){},537:function(e,t,n){},572:function(e,t,n){},573:function(e,t,n){},574:function(e,t,n){},575:function(e,t,n){},576:function(e,t,n){"use strict";n.r(t);n(272),n(148);var r=n(0),a=n.n(r),i=n(46),o=n.n(i),l=(n(277),n(278),n(10)),s=n(12),c=n(13),u=n(1),d=n(2),p=n(3),g=n(4),m=n(9);function f(){var e=Object(s.a)(["\n        min-width: 200px;\n\t\tbackground: rgb(20, 20, 20);\n\t\tflex-grow: 0;\n\t\tflex-shrink: 0;\n\t"]);return f=function(){return e},e}var h=m.default.div(f()),b=function(e){Object(p.a)(n,e);var t=Object(g.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){return r.createElement(h,null,this.props.children)}}]),n}(r.Component);function v(){var e=Object(s.a)(["\n\t\tcolor: white;\n\t\tfont-family: Helvetica, Arial;\n\t\tpadding: 5px;\n\t\tmargin: 0px 10px;\n\t\tborder: solid 1px ",";\n\t\tborder-radius: 5px;\n\t\tmargin-bottom: 2px;\n\t\tcursor: pointer;\n\t"]);return v=function(){return e},e}var y=m.default.div(v(),(function(e){return e.color})),O=function(e){Object(p.a)(n,e);var t=Object(g.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){var e=this;return r.createElement(y,{color:this.props.color,draggable:!0,onDragStart:function(t){t.dataTransfer.setData("storm-diagram-node",JSON.stringify(e.props.model))},className:"tray-item"},this.props.name)}}]),n}(r.Component),k=n(21),E=n.n(k),P=n(11);function j(){var e=Object(s.a)(["\n\theight: 100%;\n\tbackground-color: ",";\n\tbackground-size: 50px 50px;\n\tdisplay: flex;\n\t> * {\n\t\theight: 100%;\n\t\tmin-height: 100%;\n\t\twidth: 100%;\n\t}\n\tbackground-image: linear-gradient(\n\t\t\t0deg,\n\t\t\ttransparent 24%,\n\t\t\t"," 25%,\n\t\t\t"," 26%,\n\t\t\ttransparent 27%,\n\t\t\ttransparent 74%,\n\t\t\t"," 75%,\n\t\t\t"," 76%,\n\t\t\ttransparent 77%,\n\t\t\ttransparent\n\t\t),\n\t\tlinear-gradient(\n\t\t\t90deg,\n\t\t\ttransparent 24%,\n\t\t\t"," 25%,\n\t\t\t"," 26%,\n\t\t\ttransparent 27%,\n\t\t\ttransparent 74%,\n\t\t\t"," 75%,\n\t\t\t"," 76%,\n\t\t\ttransparent 77%,\n\t\t\ttransparent\n\t\t);\n"]);return j=function(){return e},e}var N=m.default.div(j(),(function(e){return e.background}),(function(e){return e.color}),(function(e){return e.color}),(function(e){return e.color}),(function(e){return e.color}),(function(e){return e.color}),(function(e){return e.color}),(function(e){return e.color}),(function(e){return e.color})),x=function(e){Object(p.a)(n,e);var t=Object(g.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){return r.createElement(N,{background:this.props.background||"rgb(60, 60, 60)",color:this.props.color||"rgba(255,255,255, 0.05)"},this.props.children)}}]),n}(r.Component),w=n(23),C=function(e){Object(p.a)(n,e);var t=Object(g.a)(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(u.a)(this,n),t.call(this,Object(w.a)({type:"arrow",width:e.width||3,color:e.color||"gray",selectedColor:e.selectedColor||"rgb(0,192,255)",curvyness:0},e))}return n}(k.DefaultLinkModel),L=n(24),I=n(20),M=n(15),T=n(147),S=function(e){Object(p.a)(n,e);var t=Object(g.a)(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(u.a)(this,n),t.call(this,Object(w.a)({offsetY:null==e.offsetY?-23:e.offsetY,type:"default"},e))}return Object(d.a)(n,[{key:"setLabel",value:function(e){this.options.label=e}},{key:"deserialize",value:function(e){Object(L.a)(Object(I.a)(n.prototype),"deserialize",this).call(this,e),this.options.label=e.data.label}},{key:"serialize",value:function(){return Object(w.a)(Object(w.a)({},Object(L.a)(Object(I.a)(n.prototype),"serialize",this).call(this)),{},{label:this.options.label})}}]),n}(M.LabelModel),D=n(32),A=function(e){Object(p.a)(n,e);var t=Object(g.a)(n);function n(e,r,a){var i;return Object(u.a)(this,n),(i=t.call(this,{type:"default",name:r,color:a})).isLabel=void 0,i.portsIn=void 0,i.isLabel=e,i.portsIn=[],i}return Object(d.a)(n,[{key:"doClone",value:function(e,t){t.portsIn=[],t.portsOut=[],Object(L.a)(Object(I.a)(n.prototype),"doClone",this).call(this,e,t)}},{key:"removePort",value:function(e){Object(L.a)(Object(I.a)(n.prototype),"removePort",this).call(this,e)}},{key:"addPort",value:function(e){return Object(L.a)(Object(I.a)(n.prototype),"addPort",this).call(this,e),e.getOptions().in&&-1===this.portsIn.indexOf(e)&&this.portsIn.push(e),e}},{key:"deserialize",value:function(e){var t=this;Object(L.a)(Object(I.a)(n.prototype),"deserialize",this).call(this,e),this.options.name=e.data.name,this.options.color=e.data.color,this.portsIn=c.map(e.data.portsInOrder,(function(e){return t.getPortFromID(e)})),this.isLabel=e.data.isLabel}},{key:"serialize",value:function(){return Object(w.a)(Object(w.a)({},Object(L.a)(Object(I.a)(n.prototype),"serialize",this).call(this)),{},{name:this.options.name,color:this.options.color,isLabel:this.isLabel})}},{key:"getInPorts",value:function(){return this.portsIn}}]),n}(M.NodeModel),F=function(e){Object(p.a)(n,e);var t=Object(g.a)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(u.a)(this,n),(e=t.call(this,Object(w.a)({type:"default",width:r.width||3,color:r.color||"gray",selectedColor:r.selectedColor||"rgb(0,192,255)",curvyness:0},r))).properties=void 0,e.addLabel("0,N"),e.addLabel("relation name"),e.addLabel("0,N"),e.properties=new A(!1,"relNode","rgb(0,192,255)"),e}return Object(d.a)(n,[{key:"calculateControlOffset",value:function(e){return e.getOptions().alignment===M.PortModelAlignment.RIGHT?[this.options.curvyness,0]:e.getOptions().alignment===M.PortModelAlignment.LEFT?[-this.options.curvyness,0]:e.getOptions().alignment===M.PortModelAlignment.TOP?[0,-this.options.curvyness]:[0,this.options.curvyness]}},{key:"getSVGPath",value:function(){if(2===this.points.length){var e,t,n=new D.BezierCurve;if(n.setSource(this.getFirstPoint().getPosition()),n.setTarget(this.getLastPoint().getPosition()),n.setSourceControl(this.getFirstPoint().getPosition().clone()),n.setTargetControl(this.getLastPoint().getPosition().clone()),this.sourcePort)(e=n.getSourceControl()).translate.apply(e,Object(T.a)(this.calculateControlOffset(this.getSourcePort())));if(this.targetPort)(t=n.getTargetControl()).translate.apply(t,Object(T.a)(this.calculateControlOffset(this.getTargetPort())));return n.getSVGCurve()}}},{key:"serialize",value:function(){var e=this.properties&&this.properties.getPorts()&&Object.values(this.properties.getPorts()),t=e&&e.map((function(e){return{label:e.label,propertyType:e.propertyType,isPrimaryKey:e.isPrimaryKey,isNotNull:e.isNotNull,isAutoincremented:e.isAutoincremented,isUnique:e.isUnique}}));return Object(w.a)(Object(w.a)({},Object(L.a)(Object(I.a)(n.prototype),"serialize",this).call(this)),{},{width:this.options.width,color:this.options.color,curvyness:this.options.curvyness,selectedColor:this.options.selectedColor,properties:t})}},{key:"deserialize",value:function(e){var t=new A(!1,"relNode","rgb(0,192,255)");e.data.properties.map((function(e){t.addPort(new U(!1,e.label,!1,e.isPrimaryKey,!1,!1,e.isNotNull,e.isAutoincremented,e.isUnique,e.propertyType))})),Object(L.a)(Object(I.a)(n.prototype),"deserialize",this).call(this,e),this.options.color=e.data.color,this.options.width=e.data.width,this.options.curvyness=e.data.curvyness,this.options.selectedColor=e.data.selectedColor,this.properties=t}},{key:"addLabel",value:function(e){if(e instanceof M.LabelModel)return Object(L.a)(Object(I.a)(n.prototype),"addLabel",this).call(this,e);var t=new S;return t.setLabel(e),Object(L.a)(Object(I.a)(n.prototype),"addLabel",this).call(this,t)}},{key:"setWidth",value:function(e){this.options.width=e,this.fireEvent({width:e},"widthChanged")}},{key:"setColor",value:function(e){this.options.color=e,this.fireEvent({color:e},"colorChanged")}}]),n}(M.LinkModel),K=n(144),R=function(){function e(){Object(u.a)(this,e)}return Object(d.a)(e,null,[{key:"UID",value:function(){return e.TESTING?(e.TESTING_UID++,"".concat(e.TESTING_UID)):"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}},{key:"closest",value:function(e,t){return document.body.closest?e.closest(t):K(e,t)}}]),e}();R.TESTING=!1,R.TESTING_UID=0;var U=function(e){Object(p.a)(n,e);var t=Object(g.a)(n);function n(e,r,a,i,o,l,s,c,d,p,g,m,f){var h;return Object(u.a)(this,n),(h=t.call(this,{id:g||R.UID(),in:!0,name:r,label:r,alignment:f,type:e?"arrow":"default"})).in=void 0,h.isNamePort=void 0,h.label=void 0,h.isPrimaryKey=void 0,h.isPartialKey=void 0,h.isForeignKey=void 0,h.isAutoincremented=void 0,h.isNotNull=void 0,h.isUnique=void 0,h.propertyType=void 0,h.fkPortId=void 0,h.label=r,h.isNamePort=a,h.links={},h.isPrimaryKey=i,h.isForeignKey=o,h.isPartialKey=l,h.isNotNull=s,h.isUnique=d,h.isAutoincremented=c,h.propertyType=p,h.fkPortId=m,h}return Object(d.a)(n,[{key:"deserialize",value:function(e){Object(L.a)(Object(I.a)(n.prototype),"deserialize",this).call(this,e),this.options.in=e.data.in,this.options.label=e.data.label,this.label=e.data.label,this.isNamePort=e.data.isNamePort,this.isPrimaryKey=e.data.isPrimaryKey,this.isPartialKey=e.data.isPartialKey,this.isForeignKey=e.data.isForeignKey,this.isNotNull=e.data.isNotNull,this.isUnique=e.data.isUnique,this.isAutoincremented=e.data.isAutoincremented,this.propertyType=e.data.propertyType,this.fkPortId=e.data.fkPortId}},{key:"serialize",value:function(){return Object(w.a)(Object(w.a)({},Object(L.a)(Object(I.a)(n.prototype),"serialize",this).call(this)),{},{in:this.in,label:this.label,isNamePort:this.isNamePort,isPrimaryKey:this.isPrimaryKey,isPartialKey:this.isPartialKey,isForeignKey:this.isForeignKey,isNotNull:this.isNotNull,isUnique:this.isUnique,isAutoincremented:this.isAutoincremented,propertyType:this.propertyType,fkPortId:this.fkPortId})}},{key:"link",value:function(e,t){var n=this.createLinkModel(t);return n.setSourcePort(this),n.setTargetPort(e),n}},{key:"canLinkToPort",value:function(e){return e!==this}},{key:"createLinkModel",value:function(e){var t=Object(L.a)(Object(I.a)(n.prototype),"createLinkModel",this).call(this);return!t&&e?e.generateModel({}):t||new F}}]),n}(M.PortModel),q=function(e){Object(p.a)(n,e);var t=Object(g.a)(n);function n(e,r,a,i,o,l,s,c,d,p,g,m){return Object(u.a)(this,n),t.call(this,!0,e,r,a,i,o,l,s,c,d,p,g,m)}return Object(d.a)(n,[{key:"link",value:function(e,t){var n=this.createLinkModel();return console.log("link arrow",n),n.setSourcePort(e),n.setTargetPort(this),n}},{key:"canLinkToPort",value:function(e){if(e===this)return!1;var t=this.getParent(),r=e.getParent(),a=r.getPorts(),i=t.getPorts(),o=Object.keys(i).filter((function(e){return i[e].fkPortId===r.getOptions().id}))[0],l=Object.keys(a).filter((function(e){return a[e].fkPortId===t.getOptions().id}))[0],s=Object.keys(i).filter((function(e){return i[e].isPrimaryKey}))[0]||"Id";return console.log("pk: ",s),o||l||(s?r.addPort(new n(t.getOptions().name+i[s].getOptions().name,!1,!1,!0,!0,!0,!1,!1,"INT",R.UID(),t.getOptions().id)):r.addPort(new n(t.getOptions().name+"Id",!1,!1,!0,!0,!0,!1,!1,"INT",R.UID(),t.getOptions().id))),!0}},{key:"createLinkModel",value:function(){return new C}}]),n}(U),z=n(36);function B(){var e=Object(s.a)(["\n            cursor: not-allowed !important;\n        "]);return B=function(){return e},e}function G(){var e=Object(s.a)(["\n            background-color: black;\n            border-width: 4px !important\n        "]);return G=function(){return e},e}function V(){var e=Object(s.a)(["\n\t\tcolor: white;\n\t\tfont-family: Helvetica, Arial;\n\t\tpadding: 5px;\n\t\tmargin: 0px 10px;\n\t\tborder: solid 1px ",";\n\t\tborder-radius: 5px;\n\t\tmargin-bottom: 2px;\n        cursor: pointer;\n        margin-top: ",";\n\n        ","\n\n        ","\n\t"]);return V=function(){return e},e}var W,H=m.default.div(V(),(function(e){return e.color}),(function(e){return e.marginTop}),(function(e){return e.isSelected&&Object(z.css)(G())}),(function(e){return e.isDisabled&&Object(z.css)(B())})),Y=function(e){Object(p.a)(n,e);var t=Object(g.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){return r.createElement(H,{isDisabled:this.props.isDisabled,isSelected:this.props.isSelected,marginTop:this.props.marginTop,color:this.props.color,onClick:this.props.onClick,className:"tray-item"},this.props.name)}}]),n}(r.Component),J=(n(497),function(e){Object(p.a)(n,e);var t=Object(g.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){return r.createElement("div",{style:this.props.style,className:this.buildClassNameString()},this.props.children)}},{key:"buildClassNameString",value:function(){var e="ms-Grid";return null!=this.props.className&&(e+=" ".concat(this.props.className)),e}}]),n}(r.Component)),Q=function(e){Object(p.a)(n,e);var t=Object(g.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){return r.createElement("div",{className:this.buildClassNameString()},this.props.children)}},{key:"buildClassNameString",value:function(){var e="ms-Grid-row";return this.props.flex&&(e+=" grid-row-flex"),null!=this.props.className&&(e+=" ".concat(this.props.className)),e}}]),n}(r.Component),X=function(e){Object(p.a)(n,e);var t=Object(g.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){return r.createElement("div",{className:this.buildClassNameString(),onDoubleClick:this.props.onDoubleClick},this.props.children)}},{key:"buildGridColConfigClassNames",value:function(e,t){if(null==t)return"";var n=" ms-".concat(e);return"string"===typeof t?n+=t:(n+=t.size,null!=t.pull&&(n+=" ms-".concat(e,"Pull").concat(t.pull)),null!=t.push&&(n+=" ms-".concat(e,"Push").concat(t.push)),null!=t.offset&&(n+=" ms-".concat(e,"Offset").concat(t.offset)),null!=t.order&&(n+=" grid-flex-order-".concat(e,"-").concat(t.order))),n}},{key:"buildClassNameString",value:function(){var e="ms-Grid-col";return null!=this.props.className&&(e+=" ".concat(this.props.className)),null!=this.props.hidden&&(e+=" ms-hidden".concat(this.props.hidden)),null!=this.props.order&&(e+=" grid-flex-order-".concat(this.props.order)),e+=this.buildGridColConfigClassNames("sm",this.props.sm),e+=this.buildGridColConfigClassNames("md",this.props.md),e+=this.buildGridColConfigClassNames("lg",this.props.lg),e+=this.buildGridColConfigClassNames("xl",this.props.xl),e+=this.buildGridColConfigClassNames("xxl",this.props.xxl),e+=this.buildGridColConfigClassNames("xxxl",this.props.xxxl)}}]),n}(r.Component);n(498);!function(e){e.BIT="BIT",e.TINYINT="TINYINT",e.SMALLINT="SMALLINT",e.INT="INT",e.BIGINT="BIGINT",e["DECIMAL()"]="DECIMAL()",e["NUMERIC()"]="NUMERIC()",e["FLOAT()"]="FLOAT()",e.REAL="REAL",e.DATE="DATE",e.TIME="TIME",e.DATETIME="DATETIME",e.TIMESTAMP="TIMESTAMP",e.YEAR="YEAR",e["CHAR()"]="CHAR()",e["VARCHAR()"]="VARCHAR()",e.TEXT="TEXT",e["NCHAR()"]="NCHAR()",e["NVARCHAR()"]="NVARCHAR()",e.NTEXT="NTEXT",e["BINARY()"]="BINARY()",e["VARBINARY()"]="VARBINARY()",e.IMAGE="IMAGE",e.CLOB="CLOB",e.BLOB="BLOB",e.XML="XML",e.JSON="JSON",e.MONEY="MONEY"}(W||(W={}));var _=n(267),$=n.n(_);var Z=function(e){var t=a.a.useState(null),n=Object(l.a)(t,2),r=n[0],i=n[1],o=function(){var e=a.a.useState(0),t=Object(l.a)(e,2),n=(t[0],t[1]);return function(){return n((function(e){return++e}))}}();a.a.useMemo((function(){i(e.selectedItem)}),[e.selectedItem]);var s=function(e,t){e.persist(),r.getPortFromID(t.getOptions().id).isPrimaryKey=!t.isPrimaryKey,r.getPortFromID(t.getOptions().id).isNotNull=!!t.isPrimaryKey,r.getPortFromID(t.getOptions().id).isAutoincremented=!!t.isPrimaryKey,r.getPortFromID(t.getOptions().id).isUnique=!!t.isPrimaryKey,function(){var e=r&&r.ports&&r.ports;Object.keys(e).map((function(t){return console.log(e[t].isPartialKey=!1)}))}(),o()},c=[{dataField:"label",text:"Property Name",formatter:function(e,t){return a.a.createElement("div",{className:"input"},a.a.createElement("input",{style:{width:"100px"},className:"darkInput",type:"text",defaultValue:t.label,onChange:function(e){return function(e,t){e.persist(),r.getPortFromID(t.getOptions().id).label=e.target.value}(e,t)}}))}},{style:{paddingLeft:0},dataField:"propertyType",text:"Property Type",formatter:function(e,t){return a.a.createElement("div",{className:"input"},a.a.createElement("input",{style:{width:"100px"},type:"text",list:"types",className:"darkInput",onChange:function(e){return function(e,t){e.persist(),r.getPortFromID(t.getOptions().id).propertyType=e.target.value}(e,t)},defaultValue:t.propertyType}),a.a.createElement("datalist",{id:"types"},Object.values(W).map((function(e){return a.a.createElement("option",{key:e,value:e},e)}))))}},{dataField:"isPrimaryKey",text:"Is Primary Key",formatter:function(e,t){return a.a.createElement("div",{className:"checkbox"},a.a.createElement("label",null,a.a.createElement("input",{type:"checkbox",checked:t.isPrimaryKey,onChange:function(e){return s(e,t)}})))}},{dataField:"isForeignKey",text:"Is Foreign Key",formatter:function(e,t){return a.a.createElement("div",{className:"checkbox"},a.a.createElement("label",null,a.a.createElement("input",{type:"checkbox",checked:t.isForeignKey,onChange:function(e){return function(e,t){e.persist(),r.getPortFromID(t.getOptions().id).isForeignKey=!t.isForeignKey,r.getPortFromID(t.getOptions().id).isNotNull=!!t.isForeignKey,o()}(e,t)}})))}},{dataField:"isPartialKey",text:"Is Partial Key",formatter:function(e,t){return a.a.createElement("div",{className:"checkbox"},a.a.createElement("label",null,a.a.createElement("input",{type:"checkbox",checked:t.isPartialKey,onChange:function(e){return function(e,t){e.persist(),r.getPortFromID(t.getOptions().id).isPartialKey=!t.isPartialKey,r.getPortFromID(t.getOptions().id).isNotNull=!!t.isPartialKey,o()}(e,t)}})))}},{dataField:"isNotNull",text:"Not Null",formatter:function(e,t){return a.a.createElement("div",{className:"checkbox"},a.a.createElement("label",null,a.a.createElement("input",{disabled:t.isPrimaryKey||t.isForeignKey,type:"checkbox",checked:t.isNotNull,onChange:function(e){return function(e,t){e.persist(),r.getPortFromID(t.getOptions().id).isNotNull=!t.isNotNull,o()}(e,t)}})))}},{dataField:"isAutoincremented",text:"Is Auto Incremented",formatter:function(e,t){return a.a.createElement("div",{className:"checkbox"},a.a.createElement("label",null,a.a.createElement("input",{disabled:t.isPrimaryKey,type:"checkbox",checked:t.isAutoincremented,onChange:function(e){return function(e,t){e.persist(),r.getPortFromID(t.getOptions().id).isAutoincremented=!t.isAutoincremented,o()}(e,t)}})))}},{dataField:"isUnique",text:"Is Unique",formatter:function(e,t){return a.a.createElement("div",{className:"checkbox"},a.a.createElement("label",null,a.a.createElement("input",{disabled:t.isPrimaryKey,type:"checkbox",checked:t.isUnique,onChange:function(e){return function(e,t){e.persist(),r.getPortFromID(t.getOptions().id).isUnique=!t.isUnique,o()}(e,t)}})))}},{dataField:"remove",text:"Remove",formatter:function(e,t){return a.a.createElement("div",{className:"checkbox"},a.a.createElement("label",null,a.a.createElement("span",{onClick:function(){return e=t,0!==Object.entries(e.links).length&&e.links.constructor,r.removePort(e),void o();var e},className:"mi mi-Delete red"})))}}],u=r&&r.ports&&r.ports,d=u&&Object.keys(u).map((function(e){return u[e]})).filter((function(e){return!e.isNamePort})),p=c;return!(!d||!d.find((function(e){return e.isPrimaryKey})))&&(p=p.filter((function(e){return"isPartialKey"!==e.dataField}))),e.isLogic||(p=p.filter((function(e){return"isForeignKey"!==e.dataField}))),a.a.createElement("div",null,a.a.createElement($.a,{keyField:"id",data:d,columns:e.relView?p.filter((function(e){return"isPrimaryKey"!==e.dataField&&"isPartialKey"!==e.dataField})):p,bordered:!1}),a.a.createElement("p",{className:"mouse-cursor",onClick:function(){return e=d.length,r.addPort(new q("new atribute ".concat(e),!1,!1,!1,!1,!1,!1,!1,"INT")),void o();var e}},"Add new atribute"))};function ee(){var e=r.useState(0),t=Object(l.a)(e,2),n=(t[0],t[1]);return function(){return n((function(e){return++e}))}}var te=function(e){var t=r.useState(null),n=Object(l.a)(t,2),a=n[0],i=n[1],o=r.useState(""),s=Object(l.a)(o,2),c=s[0],u=s[1],d=r.useState(""),p=Object(l.a)(d,2),g=p[0],m=p[1],f=r.useState(!1),h=Object(l.a)(f,2),b=h[0],v=h[1],y=ee();r.useMemo((function(){i(e.selectedItem),m(e.selectedItem.getOptions().name),u(e.selectedItem.getOptions().name)}),[e.selectedItem]),r.useEffect((function(){return e.selectedItem.setLocked(),function(){e.selectedItem.setLocked(!1)}}));var O=function(t){t.persist(),e.diagramEngine.getModel().getNodes().map((function(e){return e.getOptions().name.toLowerCase().trim()})).includes(t.target.value.toLowerCase().trim())?a.getOptions().name=c:a.getOptions().name=t.target.value.trim(),y()};return a?r.createElement("div",{className:"trayBottom"},r.createElement(J,null,r.createElement(Q,null,r.createElement(X,null,b?e.selectedItem.isLabel?r.createElement("textarea",{style:{height:"200px"},className:"darkInput fs-24",defaultValue:g,onChange:function(e){return O(e)}}):r.createElement("input",{className:"darkInput fs-24",defaultValue:g,onChange:function(e){return O(e)}}):r.createElement("h1",{style:{wordBreak:"break-all"},onDoubleClick:function(){return v(!0)}},g)),a.isLabel?null:r.createElement(Z,{selectedItem:e.selectedItem,diagramEngine:e.diagramEngine,isLogic:e.isLogic})))):null},ne=n(105),re=n.n(ne),ae=n(268),ie=(n(537),n(35)),oe=n(145),le=n.n(oe),se=n(73),ce=n.n(se),ue=function(e){var t=Object(r.useState)("DatabaseName"),n=Object(l.a)(t,2),i=n[0],o=n[1],s=Object(r.useState)(!1),c=Object(l.a)(s,2),u=c[0],d=c[1],p=e.mssqlString&&le.a.format(e.mssqlString,{language:"sql",indent:"  "}),g=e.mysqlString&&le.a.format(e.mysqlString,{language:"db2",indent:"  "});return a.a.createElement(ie.a,{modal:!0,closeOnDocumentClick:!0,open:e.isOpen,closeOnEscape:!0},a.a.createElement("div",{className:"sql-result-dialog"},a.a.createElement("input",{style:{marginRight:"10px"},type:"text",onChange:function(e){return o(e.target.value)},value:i}),a.a.createElement("button",{style:{marginRight:"10px"},onClick:function(){e.generateScript(i)}},"Generate"),a.a.createElement("button",{className:"".concat(u?"":"selected-sql"),onClick:function(){d(!1)}},"MSSQL"),a.a.createElement("button",{className:"".concat(u?"selected-sql":""),onClick:function(){d(!0)}},"MySQL"),a.a.createElement("textarea",{style:{marginTop:"5px"},readOnly:!0,value:u?g:p,contentEditable:!1}),a.a.createElement("button",{style:{marginRight:"10px"},onClick:function(){var t=new Blob([p],{type:"text/plain;charset=utf-8"});ce.a.saveAs(t,"".concat(i,".sql")),e.update()}},"Download MSSQL"),a.a.createElement("button",{style:{marginRight:"10px"},onClick:function(){var t=new Blob([g],{type:"text/plain;charset=utf-8"});ce.a.saveAs(t,"".concat(i,".sql")),e.update()}},"Download mySQL")))},de=n(146),pe=n.n(de),ge=function(e){var t=Object(r.useState)(""),n=Object(l.a)(t,2),i=n[0],o=n[1],s=Object(r.useState)(""),c=Object(l.a)(s,2),u=c[0],d=c[1];Object(r.useEffect)((function(){return o("")}),[e.isOpen]);var p=function(){var t=Object(ae.a)(re.a.mark((function t(n){var r,a,i,l,s,c,u,p,g;return re.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.serializeDiagram,a=r.layers[1].models,i=Object.keys(a).map((function(e){return a[e]})),l=r.layers[0].models,s=Object.keys(l).map((function(e){return l[e]})),c={nodes:i,links:s},u=JSON.stringify(c,null,2),console.log("diagram: ",u),t.next=10,pe.a.post("https://sql-generator.pl/api/setjob/mssql",{SerializedModel:u,DatabaseName:n,RelationType:e.isUml?"UML":"CHEN",DiagramType:e.isLogic?"Logic":"Conceptual"});case 10:return p=t.sent,t.next=13,pe.a.post("https://sql-generator.pl/api/setjob/mysql",{SerializedModel:u,DatabaseName:n,RelationType:e.isUml?"UML":"CHEN",DiagramType:e.isLogic?"Logic":"Conceptual"});case 13:g=t.sent,200===p.status&&200===g.status?(o(p.data),d(g.data)):(o("There was an error while processing your request"),d("There was an error while processing your request"),console.log("there was an error while processing your request"));case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return a.a.createElement(ue,{update:e.update,mssqlString:i,mysqlString:u,generateScript:function(e){return p(e)},isOpen:e.isOpen})},me=(n(572),function(e){var t,n=Object(r.useState)(""),i=Object(l.a)(n,2),o=i[0],s=i[1],c=function(e){var n=t.result;s(n)};return a.a.createElement(ie.a,{modal:!0,closeOnDocumentClick:!0,open:e.isOpen,closeOnEscape:!0,onClose:function(){return e.update()}},a.a.createElement("div",{className:"sql-result-dialog"},a.a.createElement("input",{type:"file",onChange:function(e){return n=e.target.files[0],(t=new FileReader).onloadend=c,void t.readAsText(n);var n},accept:".dbjson"}),a.a.createElement("button",{onClick:function(){return e.loadDiagram(o)}},"Load")))}),fe=function(e){return a.a.createElement(me,{update:e.update,loadDiagram:function(t){return function(t){var n=e.app.getDiagramEngine();try{var r=JSON.parse(t);e.setIsUml(r.isUml),r.isLogic?e.setIsLogic(r.isLogic):e.setIsLogic(!1);var a=new k.DiagramModel;a.deserializeModel(r.diagram,n),a.getLinks().forEach((function(e){e.getLabels().splice(0,3)})),r.isLogic?e.app.loadLogicModel(a):e.app.loadConceptualModel(a),n.repaintCanvas(),e.update()}catch(i){console.log(i)}}(t)},isOpen:e.isOpen})},he=(n(573),function(e){var t=Object(r.useState)("diagram"),n=Object(l.a)(t,2),i=n[0],o=n[1];return a.a.createElement(ie.a,{modal:!0,closeOnDocumentClick:!0,open:e.isOpen,closeOnEscape:!0,onClose:function(){return e.update()}},a.a.createElement("div",{className:"sql-result-dialog"},a.a.createElement("input",{type:"text",onChange:function(e){return o(e.target.value)},value:i}),a.a.createElement("button",{onClick:function(){var t=JSON.stringify({diagram:e.diagramModel.serialize(),isUml:e.isUml,isLogic:e.isLogic}),n=new Blob([t],{type:"text/plain;charset=utf-8"});ce.a.saveAs(n,"".concat(i,".dbjson")),e.update()}},"save")))}),be=(n(574),n(269)),ve=n.n(be),ye=function(e){var t=Object(r.useState)("diagram"),n=Object(l.a)(t,2),i=n[0],o=n[1];return a.a.createElement(ie.a,{modal:!0,closeOnDocumentClick:!0,open:e.isOpen,closeOnEscape:!0,onClose:function(){return e.update()}},a.a.createElement("div",{className:"sql-result-dialog"},a.a.createElement("input",{type:"text",onChange:function(e){return o(e.target.value)},value:i}),a.a.createElement("button",{onClick:function(){ve.a.toJpeg(document.getElementById("diagram-layer"),{quality:.95}).then((function(t){var n=document.createElement("a");n.download="".concat(i,".jpeg"),n.href=t,n.click(),e.update()}))}},"save")))},Oe=(n(575),function(e){var t=Object(r.useState)("1, N"),n=Object(l.a)(t,2),i=n[0],o=n[1],s=Object(r.useState)("1, N"),c=Object(l.a)(s,2),u=c[0],d=c[1],p=Object(r.useState)("relation name"),g=Object(l.a)(p,2),m=g[0],f=g[1];a.a.useEffect((function(){var t=e.link&&e.link.getLabels().length>2&&e.link.getLabels()[0].getOptions().label,n=e.link&&e.link.getLabels().length>2&&e.link.getLabels()[1].getOptions().label,r=e.link&&e.link.getLabels().length>2&&e.link.getLabels()[2].getOptions().label;o(t||"1, N"),f(n||"relation name"),d(r||"1, N")}),[e.link]);var h=e.link&&e.link.getSourcePort()&&e.link.getSourcePort().getParent(),b=e.link&&e.link.getTargetPort()&&e.link.getTargetPort().getParent(),v=function(){var t=e.link&&e.link.getSourcePort(),n=e.link&&e.link.getTargetPort();if(t.removeLink(e.link),n.removeLink(e.link),e.diagramEngine.getModel().removeLink(e.link),e.isLogic){var r=e.link.getTargetPort().getParent(),a=e.link.getSourcePort().getParent(),i=a.getPorts(),o=r.getPorts(),l=Object.keys(o).filter((function(e){return o[e].fkPortId===a.getOptions().id}))[0],s=Object.keys(i).filter((function(e){return i[e].fkPortId===r.getOptions().id}))[0];l?r.removePort(o[l]):a.removePort(i[s])}e.update()},y=a.a.createElement(a.a.Fragment,null,a.a.createElement("option",{value:"0, N"},"0, N"),a.a.createElement("option",{value:"1, N"},"1, N"),a.a.createElement("option",{value:"0, 1"},"0, 1"),a.a.createElement("option",{value:"1, 1"},"1, 1"),a.a.createElement("option",{value:"N, N"},"N, N")),O=function(e){return a.a.createElement("div",{className:"grid-item"},a.a.createElement("select",{className:"darkSelect",onChange:function(t){return"left"===e?o(t.target.value):d(t.target.value)},value:"left"===e?i:u},y))};return e.isLogic?a.a.createElement(ie.a,{modal:!0,closeOnDocumentClick:!0,open:e.isOpen,closeOnEscape:!0},a.a.createElement("div",{className:"SQLResultDialog"},a.a.createElement("div",{className:"grid-item"},a.a.createElement("button",{onClick:v},"Remove")),a.a.createElement("div",{className:"grid-item"},a.a.createElement("button",{onClick:function(){var t=e.link.getTargetPort().getParent(),n=e.link.getSourcePort().getParent(),r=n.getPorts(),a=t.getPorts(),i=Object.keys(a).filter((function(e){return a[e].fkPortId===n.getOptions().id}))[0],o=Object.keys(r).filter((function(e){return r[e].fkPortId===t.getOptions().id}))[0];if(i){t.removePort(a[i]);var l=Object.keys(a).filter((function(e){return a[e].isPrimaryKey}))[0];n.addPort(new q(t.getOptions().name+a[l].getOptions().name,!1,!1,!1,!0,!1,!0,!0,"INT",R.UID(),t.getOptions().id))}else{n.removePort(r[o]);var s=Object.keys(r).filter((function(e){return r[e].isPrimaryKey}))[0];n.addPort(new q(n.getOptions().name+r[s].getOptions().name,!1,!1,!1,!0,!1,!0,!0,"INT",R.UID(),n.getOptions().id))}var c=e.link.getTargetPort(),u=e.link.getSourcePort(),d=e.diagramEngine.getModel();d.removeLink(e.link);var p=new C({type:"arrow"});p.setSourcePort(c),p.setTargetPort(u),d.addLink(p),e.update()}},"Reverse")))):a.a.createElement(ie.a,{modal:!0,closeOnDocumentClick:!0,open:e.isOpen,closeOnEscape:!0},a.a.createElement("div",{className:"SQLResultDialog"},a.a.createElement("div",{className:"grid-container"},a.a.createElement("div",{className:"grid-item"},a.a.createElement("p",null,h&&h.getOptions().name)),a.a.createElement("div",{className:"grid-item"},a.a.createElement("input",{className:"darkInput",type:"text",defaultValue:m,onChange:function(e){return f(e.target.value)}})),a.a.createElement("div",{className:"grid-item"},a.a.createElement("p",null,b&&b.getOptions().name)),O("left"),a.a.createElement("div",{className:"grid-item"},a.a.createElement("button",{onClick:function(){var t=e.link.getLabels();t[0].getOptions().label=i,t[2].getOptions().label=u,t[1].getOptions().label=m;for(var n=e.link.getPoints(),r=1;r<n.length-1;r++){n[r].remove()}e.update()}},"SAVE")),O("right"),a.a.createElement("div",{className:"grid-item"}),a.a.createElement("div",{className:"grid-item"},a.a.createElement("button",{onClick:v},"Remove"))),e.link&&a.a.createElement("div",null,a.a.createElement("h3",{style:{margin:0}},"Atributes:"),a.a.createElement(Z,{relView:!0,diagramEngine:e.diagramEngine,selectedItem:e.link.properties,isLogic:e.isLogic}))))});function ke(){var e=Object(s.a)(["\n\t\tposition: relative;\n\t\tflex-grow: 1;\n\t"]);return ke=function(){return e},e}function Ee(){var e=Object(s.a)(["\n\t\tdisplay: flex;\n\t\tflex-grow: 1;\n\t"]);return Ee=function(){return e},e}function Pe(){var e=Object(s.a)(["\n\t\tdisplay: flex;\n\t\tbackground: rgb(30, 30, 30);\n\t\tflex-grow: 0;\n\t\tflex-shrink: 0;\n\t\tcolor: white;\n\t\tfont-family: Helvetica, Arial, sans-serif;\n\t\tpadding: 12px;\n        align-items: center;\n        \n\t"]);return Pe=function(){return e},e}function je(){var e=Object(s.a)(["\n\t\tflex-grow: 1;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tmin-height: 100%;\n\t"]);return je=function(){return e},e}var Ne=m.default.div(je()),xe=m.default.div(Pe()),we=m.default.div(Ee()),Ce=m.default.div(ke()),Le=function(e){var t=r.useState(!1),n=Object(l.a)(t,2),a=n[0],i=n[1],o=r.useState(!1),s=Object(l.a)(o,2),u=s[0],d=s[1],p=r.useState(!1),g=Object(l.a)(p,2),m=g[0],f=g[1],h=r.useState(!1),v=Object(l.a)(h,2),y=v[0],E=v[1],j=r.useState(!1),N=Object(l.a)(j,2),w=N[0],C=N[1],L=r.useState(!1),I=Object(l.a)(L,2),M=I[0],T=I[1],S=r.useState(null),D=Object(l.a)(S,2),F=D[0],K=D[1],R=r.useState(null),z=Object(l.a)(R,2),B=z[0],G=z[1],V=r.useState(!0),W=Object(l.a)(V,2),H=W[0],J=W[1],Q=r.useState(!1),X=Object(l.a)(Q,2),_=X[0],$=X[1],Z=ee();r.useEffect((function(){K(null),G(null)}),[]);var ne=function(){e.app.getDiagramEngine().getModel().getLinks().map((function(e){var t=e.getLabels()[0].getOptions().label.substring(0,1),n=e.getLabels()[2].getOptions().label.substring(0,1);e.getLabels()[0].getOptions().label=n+e.getLabels()[0].getOptions().label.substring(1),e.getLabels()[2].getOptions().label=t+e.getLabels()[2].getOptions().label.substring(1)}))},re=function(){G(null),K(null),i(!1),E(!1),C(!1),T(!1),f(!1),d(!1)};return r.createElement(Ne,null,r.createElement(xe,null,r.createElement("div",{className:"title"},"DB Diagram Scripter")),r.createElement(we,null,r.createElement(b,null,r.createElement(O,{model:{type:"default"},name:_?"Relation":"Entity",color:"rgb(0,192,255)"}),r.createElement(O,{model:{type:"label"},name:"Label",color:"rgb(192,255,0)"}),r.createElement(Y,{name:"Load Diagram",color:"rgb(255,123,0)",marginTop:"100px",onClick:function(){f(!0),K(null)}}),r.createElement("div",{style:{display:"flex",justifyContent:"space-between",borderColor:"rgb(255,123,0)"},className:"tray-item",onClick:function(){T(!M),K(null)}},"Save",r.createElement("span",{style:{display:"inline-block",paddingTop:3,paddingRight:5},className:"mi ".concat(M?"mi-ArrowUp8":"mi-ArrowDown8")})),M&&r.createElement("div",{style:{borderColor:"rgb(255,123,0)"},className:"tray-item",onClick:function(){E(!0),K(null)}},"File"),M&&r.createElement("div",{style:{borderColor:"rgb(255,123,0)"},className:"tray-item",onClick:function(){C(!0),K(null)}},"JPEG"),r.createElement(Y,{isSelected:!_,name:"Conceptual View",color:"rgb(0,50,100)",marginTop:"100px",onClick:function(){_&&(e.app.setConceptualModel(),$(!1))}}),r.createElement(Y,{isSelected:_,name:"Logical View",color:"rgb(0,50,100)",onClick:function(){_||(e.app.setLogicModel(),$(!0))}}),r.createElement(Y,{isDisabled:_,isSelected:H,name:"UML",color:"rgb(152,50,100)",marginTop:"100px",onClick:function(){_||H||(ne(),J(!0))}}),r.createElement(Y,{isDisabled:_,isSelected:!H,name:"Chen",color:"rgb(152,50,100)",onClick:function(){!_&&H&&(ne(),J(!1))}}),r.createElement(Y,{name:"Create DB Code",color:"rgb(255,0,0)",marginTop:"90px",onClick:function(){i(!0),K(null)}})),r.createElement(Ce,{id:"diagram-layer",onDrop:function(t){var n=JSON.parse(t.dataTransfer.getData("storm-diagram-node"));console.log("data ",n);var r,a=e.app.getDiagramEngine().getModel().getNodes().map((function(e){return e.getOptions().name.toLowerCase().trim()})),i=c.keys(e.app.getDiagramEngine().getModel().getNodes()).length,o=a.includes("Entity".concat(i+1).toLowerCase().trim())?"Entity".concat(i+1,"_").concat(i+1):"Entity".concat(i+1);"default"===n.type?(r=new A(!1,o,"rgb(0,192,255)"),_?(r.addPort(new q("Id",!1,!0,!1,!1,!0,!0,!0,"INT")),r.addPort(new q("",!0,!1,!1,!1,!1,!1,!1,"INT")),r.addPort(new q("1",!0,!1,!1,!1,!1,!1,!1,"INT"))):(r.addPort(new U(_,"Id",!1,!0,!1,!1,!0,!0,!0,"INT")),r.addPort(new U(_,"",!0,!1,!1,!1,!1,!1,!1,"INT")),r.addPort(new U(_,"1",!0,!1,!1,!1,!1,!1,!1,"INT")))):r=new A(!0,"Label ","rgb(192,255,0)");var l=e.app.getDiagramEngine().getRelativeMousePoint(t);r.setPosition(l),e.app.getDiagramEngine().getModel().addNode(r),Z()},onDragOver:function(e){e.preventDefault(),console.log("drag drag")},onClick:function(t){(t.preventDefault(),t.ctrlKey&&e.app.getDiagramEngine().getModel().getSelectedEntities()[0]instanceof k.PointModel)&&e.app.getDiagramEngine().getModel().getSelectedEntities()[0].remove();re()},onDoubleClick:function(t){if(t.preventDefault(),e.app.getDiagramEngine().getModel().getSelectedEntities()[0]instanceof k.PointModel)G(e.app.getDiagramEngine().getModel().getSelectedEntities()[0].getParent()),d(!0),K(null);else if(e.app.getDiagramEngine().getModel().getSelectedEntities()[0]instanceof A){re();var n=e.app.getDiagramEngine().getModel().getSelectedEntities()[0];K(n)}}},r.createElement(x,null,r.createElement(P.CanvasWidget,{className:"srd-demo-canvas",engine:e.app.getDiagramEngine()}))),null!=F?r.createElement(te,{isLogic:_,selectedItem:F,diagramEngine:e.app.getDiagramEngine()}):null,r.createElement(ge,{isUml:H,isLogic:_,update:re,isOpen:a,serializeDiagram:e.app.getDiagramEngine().getModel().serialize()}),r.createElement(fe,{update:re,isOpen:m,app:e.app,setIsUml:J,setIsLogic:$}),r.createElement(he,{isLogic:_,update:re,diagramModel:e.app.getDiagramEngine().getModel(),isOpen:y,isUml:H}),r.createElement(ye,{update:re,diagramModel:e.app.getActiveDiagram(),isOpen:w}),r.createElement(Oe,{diagramEngine:e.app.getDiagramEngine(),update:re,isOpen:u,link:B,isLogic:_})))},Ie=function(e){var t=e.point,n=e.previousPoint,r=a.a.useState(!1),i=Object(l.a)(r,2),o=(i[0],i[1]),s=90+180*Math.atan2(t.getPosition().y-n.getPosition().y,t.getPosition().x-n.getPosition().x)/Math.PI;return a.a.createElement("g",{className:"arrow",transform:"translate("+t.getPosition().x+", "+t.getPosition().y+")"},a.a.createElement("g",{style:{transform:"rotate("+s+"deg)"}},a.a.createElement("g",{transform:"translate(0, -3)"},a.a.createElement("polygon",{points:"0,10 8,30 -8,30",fill:e.color,onMouseLeave:function(){return o(!1)},onMouseEnter:function(){return o(!0)},"data-id":t.getID(),"data-linkid":t.getLink().getID()}))))},Me=function(e){Object(p.a)(n,e);var t=Object(g.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"generateArrow",value:function(e,t){return a.a.createElement(Ie,{key:e.getID(),point:e,previousPoint:t,colorSelected:this.props.link.getOptions().selectedColor,color:this.props.link.getOptions().color})}},{key:"render",value:function(){var e=this,t=this.props.link.getPoints(),n=[];this.refPaths=[];for(var r=function(r){n.push(e.generateLink(k.LinkWidget.generateLinePath(t[r],t[r+1]),{"data-linkid":e.props.link.getID(),"data-point":r,onMouseDown:function(t){e.addPointToLink(t,r+1)}},r))},i=0;i<t.length-1;i++)r(i);for(var o=0;o<t.length-1;o++)n.push(this.generateArrow(t[o],t[o+1]));return this.props.link.getTargetPort(),n.push(this.generatePoint(t[t.length-1])),a.a.createElement("g",{"data-default-link-test":this.props.link.getOptions().testName},n)}}]),n}(k.DefaultLinkWidget),Te=function(e){Object(p.a)(n,e);var t=Object(g.a)(n);function n(){return Object(u.a)(this,n),t.call(this,"arrow")}return Object(d.a)(n,[{key:"generateModel",value:function(){return new C}},{key:"generateReactWidget",value:function(e){return a.a.createElement(Me,{link:e.model,diagramEngine:this.engine})}}]),n}(k.DefaultLinkFactory);function Se(){var e=Object(s.a)(["\n\t\twidth: 15px;\n\t\theight: 15px;\n\t\tbackground: rgba(255,255,255,0.1);\n\n\t\t&:hover {\n\t\t\tbackground: rgb(192, 255, 0);\n\t\t}\n\t"]);return Se=function(){return e},e}function De(){var e=Object(s.a)(["\n\t\tpadding: 0 5px;\n\t\tflex-grow: 1;\n\t"]);return De=function(){return e},e}function Ae(){var e=Object(s.a)(["\n\t\tdisplay: flex;\n\t\tmargin-top: 1px;\n\t\talign-items: center;\n\t"]);return Ae=function(){return e},e}m.default.div(Ae()),m.default.div(De());var Fe=m.default.div(Se()),Ke={paddingLeft:5,paddingRight:5,color:"black",fontWeight:800},Re={display:"flex",justifyContent:"flex-end"},Ue={display:"inline-block",marginRight:"5px"},qe={display:"none"},ze={marginRight:"5px"},Be=function(e){Object(p.a)(n,e);var t=Object(g.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){var e;this.props.port.isNamePort||this.props.port.setLocked(),e=r.createElement(M.PortWidget,{engine:this.props.engine,port:this.props.port},r.createElement(Fe,null));var t=r.createElement("div",{className:"name"},r.createElement("div",null,this.props.port.label," ",void 0!==this.props.port.propertyType?this.props.port.propertyType:null)),n=this.props.port.isPrimaryKey?r.createElement("span",{className:"mi mi-Permissions",style:Ke}):null;return this.props.port.isNamePort?r.createElement("div",{style:ze},e):r.createElement("div",{style:Re},r.createElement("div",{style:Ue},n),r.createElement("div",{style:Ue},t),r.createElement("div",{style:qe},e))}}]),n}(r.Component);function Ge(){var e=Object(s.a)(["\n\t\tflex-grow: 1;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\n\t\t&:first-of-type {\n\t\t\tmargin-right: 10px;\n\t\t}\n\n\t\t&:only-child {\n\t\t\tmargin-right: 0px;\n\t\t}\n\t"]);return Ge=function(){return e},e}function Ve(){var e=Object(s.a)(["\n\t\tdisplay: flex;\n\t\tbackground-image: linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.2));\n\t"]);return Ve=function(){return e},e}function We(){var e=Object(s.a)(["\n\t\tflex-grow: 1;\n\t\tpadding: 5px 5px;\n\t"]);return We=function(){return e},e}function He(){var e=Object(s.a)(["\n\t\tbackground: rgba(0, 0, 0, 0.3);\n\t\tdisplay: flex;\n\t\twhite-space: nowrap;\n\n\t\tjustify-items: center;\n\t"]);return He=function(){return e},e}function Ye(){var e=Object(s.a)(["\n\t\tbackground-color: ",";\n\t\tborder-radius: 5px;\n\t\tfont-family: sans-serif;\n\t\tcolor: white;\n\t\tborder: solid 2px black;\n\t\toverflow: visible;\n\t\tfont-size: 11px;\n\t\tborder: solid 2px ",";\n\n\t"]);return Ye=function(){return e},e}var Je=m.default.div(Ye(),(function(e){return e.background}),(function(e){return e.selected?"rgb(0,192,255)":"black"})),Qe=m.default.div(He()),Xe=m.default.div(We()),_e=m.default.div(Ve()),$e=m.default.div(Ge()),Ze=function(e){Object(p.a)(n,e);var t=Object(g.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).generatePort=function(t){return r.createElement(Be,{engine:e.props.engine,port:t,key:t.options.id})},e}return Object(d.a)(n,[{key:"render",value:function(){var e=this.props.node.getPorts(),t=c.map(e,this.generatePort.bind(this)),n=t.filter((function(e){return e.props.port.isNamePort})),a=t.filter((function(e){return!e.props.port.isNamePort}));return r.createElement(Je,{"data-default-node-name":this.props.node.getOptions().name,selected:this.props.node.isSelected(),background:this.props.node.getOptions().color},r.createElement(Qe,null,0!==n.length&&r.createElement("div",{style:{margin:"3px"}},this.generatePort(n[1].props.port)),(this.props.node.isLabel,r.createElement(Xe,null,this.props.node.getOptions().name)),0!==n.length&&r.createElement("div",{style:{marginTop:"3px"}},this.generatePort(n[0].props.port))),r.createElement(_e,null,r.createElement($e,null,a)))}}]),n}(r.Component),et=function(e){Object(p.a)(n,e);var t=Object(g.a)(n);function n(){return Object(u.a)(this,n),t.call(this,"default")}return Object(d.a)(n,[{key:"generateReactWidget",value:function(e){return r.createElement(Ze,{engine:this.engine,node:e.model})}},{key:"generateModel",value:function(e){return new A(!1,"Entity","rgb(0,192,255)")}}]),n}(P.AbstractReactFactory);function tt(){var e=Object(s.a)(["\n\t\tbackground: rgba(0, 0, 0, 0.8);\n\t\tborder-radius: 5px;\n\t\tcolor: white;\n\t\tfont-size: 12px;\n\t\tpadding: 4px 8px;\n\t\tfont-family: sans-serif;\n\t\tuser-select: none;\n\t"]);return tt=function(){return e},e}var nt=m.default.div(tt()),rt=function(e){Object(p.a)(n,e);var t=Object(g.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){return r.createElement(nt,null,this.props.model.getOptions().label)}}]),n}(r.Component),at=function(e){Object(p.a)(n,e);var t=Object(g.a)(n);function n(){return Object(u.a)(this,n),t.call(this,"default")}return Object(d.a)(n,[{key:"generateReactWidget",value:function(e){return r.createElement(rt,{model:e.model})}},{key:"generateModel",value:function(e){return new S}}]),n}(P.AbstractReactFactory),it=function(e){Object(p.a)(n,e);var t=Object(g.a)(n);function n(){return Object(u.a)(this,n),t.call(this,"default")}return Object(d.a)(n,[{key:"generateModel",value:function(){return new U(!1,"port",!0,!1)}}]),n}(P.AbstractModelFactory);function ot(){var e=Object(s.a)(["\n\t\tpointer-events: all;\n\t"]);return ot=function(){return e},e}var lt=m.default.circle(ot()),st=function(e){Object(p.a)(n,e);var t=Object(g.a)(n);function n(e){var r;return Object(u.a)(this,n),(r=t.call(this,e)).state={selected:!1},r}return Object(d.a)(n,[{key:"render",value:function(){var e=this,t=this.props.point;return r.createElement("g",null,r.createElement("circle",{cx:t.getPosition().x,cy:t.getPosition().y,r:5,fill:this.state.selected||this.props.point.isSelected()?this.props.colorSelected:this.props.color}),r.createElement(lt,{className:"point",onMouseLeave:function(){e.setState({selected:!1})},onMouseEnter:function(){e.setState({selected:!0})},"data-id":t.getID(),"data-linkid":t.getLink().getID(),cx:t.getPosition().x,cy:t.getPosition().y,r:15,opacity:0}))}}]),n}(r.Component),ct=function(e){Object(p.a)(n,e);var t=Object(g.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){var e=this,t=r.cloneElement(this.props.factory.generateLinkSegment(this.props.link,this.props.selected||this.props.link.isSelected(),this.props.path),{ref:this.props.forwardRef}),n=r.cloneElement(t,Object(w.a)(Object(w.a)({strokeLinecap:"round",onMouseLeave:function(){e.props.onSelection(!1)},onMouseEnter:function(){e.props.onSelection(!0)}},this.props.extras),{},{ref:null,"data-linkid":this.props.link.getID(),strokeOpacity:this.props.selected?.1:0,strokeWidth:20,fill:"none",onContextMenu:function(t){e.props.link.isLocked()||(t&&t.preventDefault(),e.props.link.remove())}}));return r.createElement("g",null,t,n)}}]),n}(r.Component),ut=function(e){Object(p.a)(n,e);var t=Object(g.a)(n);function n(e){var r;return Object(u.a)(this,n),(r=t.call(this,e)).refPaths=void 0,r.refPaths=[],r.state={selected:!1},r}return Object(d.a)(n,[{key:"componentDidUpdate",value:function(){this.props.link.setRenderedPaths(this.refPaths.map((function(e){return e.current})))}},{key:"componentDidMount",value:function(){this.props.link.setRenderedPaths(this.refPaths.map((function(e){return e.current})))}},{key:"componentWillUnmount",value:function(){this.props.link.setRenderedPaths([])}},{key:"addPointToLink",value:function(e,t){var n=this;if(!e.shiftKey&&!this.props.link.isLocked()&&this.props.link.getPoints().length-1<=this.props.diagramEngine.getMaxNumberPointsPerLink()){var r=new M.PointModel({link:this.props.link,position:this.props.diagramEngine.getRelativeMousePoint(e)});this.props.link.addPoint(r,t),e.persist(),e.stopPropagation(),this.forceUpdate((function(){n.props.diagramEngine.getActionEventBus().fireAction({event:e,model:r})}))}}},{key:"generatePoint",value:function(e){return r.createElement(st,{key:e.getID(),point:e,colorSelected:this.props.link.getOptions().selectedColor,color:this.props.link.getOptions().color})}},{key:"generateLink",value:function(e,t,n){var a=this,i=r.createRef();return this.refPaths.push(i),r.createElement(ct,{key:"link-".concat(n),path:e,selected:this.state.selected,diagramEngine:this.props.diagramEngine,factory:this.props.diagramEngine.getFactoryForLink(this.props.link),link:this.props.link,forwardRef:i,onSelection:function(e){a.setState({selected:e})},extras:t})}},{key:"render",value:function(){var e=this,t=this.props.link.getPoints(),n=[];if(this.refPaths=[],2===t.length)n.push(this.generateLink(this.props.link.getSVGPath(),{onMouseDown:function(t){e.addPointToLink(t,1)}},"0")),null==this.props.link.getTargetPort()&&n.push(this.generatePoint(t[1]));else{for(var a=function(r){n.push(e.generateLink(M.LinkWidget.generateLinePath(t[r],t[r+1]),{"data-linkid":e.props.link.getID(),"data-point":r,onMouseDown:function(t){e.addPointToLink(t,r+1)}},r))},i=0;i<t.length-1;i++)a(i);for(var o=1;o<t.length-1;o++)n.push(this.generatePoint(t[o]));null==this.props.link.getTargetPort()&&n.push(this.generatePoint(t[t.length-1]))}return r.createElement("g",{"data-default-link-test":this.props.link.getOptions().testName},n)}}]),n}(r.Component);function dt(){var e=Object(s.a)(["\n\t\t",";\n\t\tfill: none;\n\t\tpointer-events: all;\n\t"]);return dt=function(){return e},e}function pt(){var e=Object(s.a)(["\n\t\tstroke-dasharray: 10, 2;\n\t\tanimation: "," 1s linear infinite;\n\t"]);return pt=function(){return e},e}function gt(){var e=Object(s.a)(["\n\t\tfrom {\n\t\t\tstroke-dashoffset: 24;\n\t\t}\n\t\tto {\n\t\t\tstroke-dashoffset: 0;\n\t\t}\n\t"]);return gt=function(){return e},e}var mt=Object(z.keyframes)(gt()),ft=Object(z.css)(pt(),mt),ht=m.default.path(dt(),(function(e){return e.selected&&ft})),bt=function(e){Object(p.a)(n,e);var t=Object(g.a)(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";return Object(u.a)(this,n),t.call(this,e)}return Object(d.a)(n,[{key:"generateReactWidget",value:function(e){return r.createElement(ut,{link:e.model,diagramEngine:this.engine})}},{key:"generateModel",value:function(e){return new F}},{key:"generateLinkSegment",value:function(e,t,n){return r.createElement(ht,{selected:t,stroke:t?e.getOptions().selectedColor:e.getOptions().color,strokeWidth:e.getOptions().width,d:n})}}]),n}(P.AbstractReactFactory);function vt(){var e=Object(s.a)(["\n\t\tflex-grow: 1;\n\t\tpadding: 5px 5px;\n\t"]);return vt=function(){return e},e}function yt(){var e=Object(s.a)(["\n\t\tbackground: rgba(0, 0, 0, 0.3);\n\t\tdisplay: flex;\n\t\twhite-space: nowrap;\n\t\tjustify-items: center;\n\t"]);return yt=function(){return e},e}function Ot(){var e=Object(s.a)(["\n\t\tbackground-color: ",";\n\t\tborder-radius: 5px;\n\t\tfont-family: sans-serif;\n\t\tcolor: white;\n\t\tborder: solid 2px black;\n\t\toverflow: visible;\n\t\tfont-size: 11px;\n\t\tborder: solid 2px ",";\n\t"]);return Ot=function(){return e},e}var kt=m.default.div(Ot(),(function(e){return e.background}),(function(e){return e.selected?"rgb(0,192,255)":"black"})),Et=m.default.div(yt()),Pt=m.default.div(vt()),jt=function(e){Object(p.a)(n,e);var t=Object(g.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){return r.createElement(kt,{"data-default-node-name":this.props.node.getOptions().name,selected:this.props.node.isSelected(),background:this.props.node.getOptions().color},r.createElement(Et,null,r.createElement(Pt,null,this.props.node.getOptions().name)))}}]),n}(r.Component),Nt=function(e){Object(p.a)(n,e);var t=Object(g.a)(n);function n(){return Object(u.a)(this,n),t.call(this,"label")}return Object(d.a)(n,[{key:"generateReactWidget",value:function(e){return r.createElement(jt,{engine:this.engine,node:e.model})}},{key:"generateModel",value:function(e){return new A(!0,"Label","rgb(192,255,0)")}}]),n}(P.AbstractReactFactory),xt=function(e){Object(p.a)(n,e);var t=Object(g.a)(n);function n(){return Object(u.a)(this,n),t.call(this,"arrow")}return Object(d.a)(n,[{key:"generateModel",value:function(){return new q("port",!0,!1)}}]),n}(P.AbstractModelFactory),wt=function(){function e(){Object(u.a)(this,e),this.activeModel=void 0,this.logicModel=void 0,this.diagramEngine=void 0,this.diagramEngine=E()({}),this.diagramEngine.getNodeFactories().registerFactory(new Nt),this.diagramEngine.getNodeFactories().registerFactory(new et),this.diagramEngine.getLabelFactories().registerFactory(new at),this.diagramEngine.getPortFactories().registerFactory(new it),this.diagramEngine.getPortFactories().registerFactory(new xt),this.diagramEngine.getLinkFactories().registerFactory(new Te),this.diagramEngine.getLinkFactories().registerFactory(new bt);var t=this.diagramEngine.getStateMachine().getCurrentState();t instanceof k.DefaultDiagramState&&(t.dragNewLink.config.allowLooseLinks=!1),this.newModel()}return Object(d.a)(e,[{key:"newModel",value:function(){this.activeModel=new k.DiagramModel,this.logicModel=new k.DiagramModel,this.diagramEngine.setModel(this.activeModel)}},{key:"getActiveDiagram",value:function(){return this.activeModel}},{key:"getDiagramEngine",value:function(){return this.diagramEngine}},{key:"setLogicModel",value:function(){var e=this,t=this.activeModel.getNodes();Object.keys(t).map((function(n){var r=t[n].clone(),a=t[n].getPorts();Object.keys(a).map((function(e){var t=a[e],n=new q(t.getOptions().name,t.isNamePort,t.isPrimaryKey,t.isForeignKey,t.isPartialKey,t.isNotNull,t.isAutoincremented,t.isUnique,t.propertyType);r.addPort(n)})),e.logicModel.addNode(r)}));var n=this.activeModel.getLinks();Object.keys(n).map((function(t){var r=e.logicModel.getNodes(),a=n[t].sourcePort.getParent(),i=r.filter((function(e){return e.getOptions().name===a.getOptions().name}))[0].getOptions().id,o=n[t].targetPort.getParent(),l=r.filter((function(e){return e.getOptions().name===o.getOptions().name}))[0].getOptions().id,s=n[t].labels[0].getOptions().label,c=n[t].labels[2].getOptions().label;if(s.includes("N")&&c.includes("N")){var u=n[t].properties.clone();u.getOptions().name=n[t].labels[1].getOptions().label,u.setPosition(a.getPosition().x+150,a.getPosition().y-100),u.addPort(new q("Id",!1,!0,!1,!1,!0,!0,!0,"INT")),u.addPort(new q("",!0,!1,!1,!1,!1,!1,!1,"INT")),u.addPort(new q("1",!0,!1,!1,!1,!1,!1,!1,"INT")),u.addPort(new q(a.getOptions().name+"Id",!1,!1,!1,!0,!0,!1,!1,"INT",R.UID(),i)),u.addPort(new q(o.getOptions().name+"Id",!1,!1,!1,!0,!0,!1,!1,"INT",R.UID(),l)),e.logicModel.addNode(u);var d=r.filter((function(e){return e.getOptions().id===i}))[0].getPorts()[1],p=u.getPorts()[""],g=new C({type:"arrow"});g.setSourcePort(d),g.setTargetPort(p);var m=r.filter((function(e){return e.getOptions().id===l}))[0],f=u.getPorts()[1],h=m.getPorts()[""],b=new C({type:"arrow"});b.setSourcePort(h),b.setTargetPort(f),e.logicModel.addAll(g,b)}else if(s.includes("N")){var v=r.filter((function(e){return e.getOptions().id===i}))[0];v.addPort(new q(o.getOptions().name+"Id",!1,!1,!1,!0,!0,!1,!1,"INT",R.UID(),l));var y=r.filter((function(e){return e.getOptions().id===l}))[0],O=v.getPorts()[1],k=y.getPorts()[""],E=new C({type:"arrow"});E.setSourcePort(k),E.setTargetPort(O),e.logicModel.addLink(E)}else if(c.includes("N")){var P=r.filter((function(e){return e.getOptions().id===l}))[0];P.addPort(new q(a.getOptions().name+"Id",!1,!1,!1,!0,!0,!1,!1,"INT",R.UID(),i));var j=r.filter((function(e){return e.getOptions().id===i}))[0],N=P.getPorts()[""],x=j.getPorts()[1],w=new C({type:"arrow"});w.setSourcePort(x),w.setTargetPort(N),e.logicModel.addLink(w)}else{var L=r.filter((function(e){return e.getOptions().id===l}))[0];L.addPort(new q(a.getOptions().name+"Id",!1,!1,!1,!0,!0,!1,!1,"INT",R.UID(),i));var I=r.filter((function(e){return e.getOptions().id===i}))[0],M=L.getPorts()[""],T=I.getPorts()[1],S=new C({type:"arrow"});S.setSourcePort(T),S.setTargetPort(M),e.logicModel.addLink(S)}})),this.diagramEngine.setModel(this.logicModel)}},{key:"setConceptualModel",value:function(){this.logicModel=null,this.logicModel=new k.DiagramModel;var e=new k.DiagramModel,t=this.activeModel.getNodes();Object.keys(t).map((function(n){e.addNode(t[n])}));var n=this.activeModel.getLinks();Object.keys(n).map((function(t){e.addLink(n[t])})),this.activeModel=e,this.diagramEngine.setModel(this.activeModel)}},{key:"loadConceptualModel",value:function(e){this.activeModel=e,this.diagramEngine.setModel(this.activeModel)}},{key:"loadLogicModel",value:function(e){this.logicModel=e,this.diagramEngine.setModel(this.logicModel)}}]),e}(),Ct=function(){var e=new wt;return r.createElement("div",{className:"content"},r.createElement(Le,{app:e}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(Ct,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[271,1,2]]]);
//# sourceMappingURL=main.17ccde7d.chunk.js.map