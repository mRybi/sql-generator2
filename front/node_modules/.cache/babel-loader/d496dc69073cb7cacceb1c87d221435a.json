{"ast":null,"code":"import _objectSpread from \"/home/dell/Dokumenty/sql-gen2/sql-gen2/sql-generator2/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/home/dell/Dokumenty/sql-gen2/sql-gen2/sql-generator2/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/dell/Dokumenty/sql-gen2/sql-gen2/sql-generator2/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/dell/Dokumenty/sql-gen2/sql-gen2/sql-generator2/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/dell/Dokumenty/sql-gen2/sql-gen2/sql-generator2/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _get from \"/home/dell/Dokumenty/sql-gen2/sql-gen2/sql-generator2/node_modules/@babel/runtime/helpers/esm/get\";\nimport _inherits from \"/home/dell/Dokumenty/sql-gen2/sql-gen2/sql-generator2/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport * as _ from \"lodash\";\nimport { LinkModel, LabelModel } from \"storm-react-diagrams\";\nimport { Label } from \"./Label\";\nexport var Link =\n/*#__PURE__*/\nfunction (_LinkModel) {\n  _inherits(Link, _LinkModel);\n\n  function Link() {\n    var _this;\n\n    var type = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"default\";\n    var diagramEngine = arguments.length > 1 ? arguments[1] : undefined;\n\n    _classCallCheck(this, Link);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Link).call(this, type));\n    _this.width = void 0;\n    _this.color = void 0;\n    _this.curvyness = void 0;\n    _this.color = \"rgba(255,255,255,0.5)\";\n    _this.width = 3;\n    _this.curvyness = 50;\n\n    _this.addLabel('1,N');\n\n    _this.addLabel('relation name');\n\n    _this.addLabel('1,N');\n\n    return _this;\n  }\n\n  _createClass(Link, [{\n    key: \"serialize\",\n    value: function serialize() {\n      return _.merge(_get(_getPrototypeOf(Link.prototype), \"serialize\", this).call(this), {\n        width: this.width,\n        color: this.color,\n        curvyness: this.curvyness\n      });\n    }\n  }, {\n    key: \"deSerialize\",\n    value: function deSerialize(ob, engine) {\n      _get(_getPrototypeOf(Link.prototype), \"deSerialize\", this).call(this, ob, engine);\n\n      this.color = ob.color;\n      this.width = ob.width;\n      this.curvyness = ob.curvyness;\n    }\n  }, {\n    key: \"addLabel\",\n    value: function addLabel(label) {\n      // this.diagramEngine.recalculatePortsVisually();\n      if (label instanceof LabelModel) {\n        return _get(_getPrototypeOf(Link.prototype), \"addLabel\", this).call(this, label);\n      }\n\n      var labelOb = new Label('custom');\n      labelOb.setLabel(label);\n      return _get(_getPrototypeOf(Link.prototype), \"addLabel\", this).call(this, labelOb);\n    }\n  }, {\n    key: \"setWidth\",\n    value: function setWidth(width) {\n      this.width = width;\n      this.iterateListeners(function (listener, event) {\n        if (listener.widthChanged) {\n          listener.widthChanged(_objectSpread({}, event, {\n            width: width\n          }));\n        }\n      });\n    }\n  }, {\n    key: \"setColor\",\n    value: function setColor(color) {\n      this.color = color;\n      this.iterateListeners(function (listener, event) {\n        if (listener.colorChanged) {\n          listener.colorChanged(_objectSpread({}, event, {\n            color: color\n          }));\n        }\n      });\n    }\n  }]);\n\n  return Link;\n}(LinkModel);","map":{"version":3,"sources":["/home/dell/Dokumenty/sql-gen2/sql-gen2/sql-generator2/src/components/models/Link.ts"],"names":["_","LinkModel","LabelModel","Label","Link","type","diagramEngine","width","color","curvyness","addLabel","merge","ob","engine","label","labelOb","setLabel","iterateListeners","listener","event","widthChanged","colorChanged"],"mappings":";;;;;;;AACA,OAAO,KAAKA,CAAZ,MAAmB,QAAnB;AACA,SAAuCC,SAAvC,EAAsGC,UAAtG,QAAwH,sBAAxH;AACA,SAASC,KAAT,QAAsB,SAAtB;AAUA,WAAaC,IAAb;AAAA;AAAA;AAAA;;AAKC,kBAAoE;AAAA;;AAAA,QAAxDC,IAAwD,uEAAzC,SAAyC;AAAA,QAA9BC,aAA8B;;AAAA;;AACnE,8EAAMD,IAAN;AADmE,UAJpEE,KAIoE;AAAA,UAHpEC,KAGoE;AAAA,UAFpEC,SAEoE;AAEnE,UAAKD,KAAL,GAAa,uBAAb;AACA,UAAKD,KAAL,GAAa,CAAb;AACA,UAAKE,SAAL,GAAiB,EAAjB;;AACA,UAAKC,QAAL,CAAc,KAAd;;AACA,UAAKA,QAAL,CAAc,eAAd;;AACA,UAAKA,QAAL,CAAc,KAAd;;AAPmE;AAQnE;;AAbF;AAAA;AAAA,gCAea;AACX,aAAOV,CAAC,CAACW,KAAF,sEAA2B;AACjCJ,QAAAA,KAAK,EAAE,KAAKA,KADqB;AAEjCC,QAAAA,KAAK,EAAE,KAAKA,KAFqB;AAGjCC,QAAAA,SAAS,EAAE,KAAKA;AAHiB,OAA3B,CAAP;AAKA;AArBF;AAAA;AAAA,gCAuBaG,EAvBb,EAuBsBC,MAvBtB,EAuB6C;AAC3C,4EAAkBD,EAAlB,EAAsBC,MAAtB;;AACA,WAAKL,KAAL,GAAaI,EAAE,CAACJ,KAAhB;AACA,WAAKD,KAAL,GAAaK,EAAE,CAACL,KAAhB;AACA,WAAKE,SAAL,GAAiBG,EAAE,CAACH,SAApB;AACA;AA5BF;AAAA;AAAA,6BA8BUK,KA9BV,EA8BsC;AACpC;AAEA,UAAIA,KAAK,YAAYZ,UAArB,EAAiC;AAChC,kFAAsBY,KAAtB;AACA;;AACD,UAAIC,OAAO,GAAG,IAAIZ,KAAJ,CAAU,QAAV,CAAd;AACAY,MAAAA,OAAO,CAACC,QAAR,CAAiBF,KAAjB;AACA,gFAAsBC,OAAtB;AACA;AAvCF;AAAA;AAAA,6BAyCUR,KAzCV,EAyCyB;AACvB,WAAKA,KAAL,GAAaA,KAAb;AACA,WAAKU,gBAAL,CAAsB,UAACC,QAAD,EAAqCC,KAArC,EAA0D;AAC/E,YAAID,QAAQ,CAACE,YAAb,EAA2B;AAC1BF,UAAAA,QAAQ,CAACE,YAAT,mBAA2BD,KAA3B;AAAkCZ,YAAAA,KAAK,EAAEA;AAAzC;AACA;AACD,OAJD;AAKA;AAhDF;AAAA;AAAA,6BAkDUC,KAlDV,EAkDyB;AACvB,WAAKA,KAAL,GAAaA,KAAb;AACA,WAAKS,gBAAL,CAAsB,UAACC,QAAD,EAAqCC,KAArC,EAA0D;AAC/E,YAAID,QAAQ,CAACG,YAAb,EAA2B;AAC1BH,UAAAA,QAAQ,CAACG,YAAT,mBAA2BF,KAA3B;AAAkCX,YAAAA,KAAK,EAAEA;AAAzC;AACA;AACD,OAJD;AAKA;AAzDF;;AAAA;AAAA,EAA0BP,SAA1B","sourcesContent":["\nimport * as _ from \"lodash\";\nimport { LinkModelListener, BaseEvent, LinkModel, DefaultLinkModel, DiagramEngine, DefaultLabelModel, LabelModel } from \"storm-react-diagrams\";\nimport { Label } from \"./Label\";\nimport AppContext from \"../../context/appContext/AppContext\";\n\n\nexport interface DefaultLinkModelListener extends LinkModelListener {\n\tcolorChanged?(event: BaseEvent<DefaultLinkModel> & { color: null | string }): void;\n\n\twidthChanged?(event: BaseEvent<DefaultLinkModel> & { width: 0 | number }): void;\n}\n\nexport class Link extends LinkModel<DefaultLinkModelListener> {\n\twidth: number;\n\tcolor: string;\n\tcurvyness: number;\n\n\tconstructor(type: string = \"default\", diagramEngine: DiagramEngine) {\n\t\tsuper(type);\n\t\tthis.color = \"rgba(255,255,255,0.5)\";\n\t\tthis.width = 3;\n\t\tthis.curvyness = 50;\n\t\tthis.addLabel('1,N');\n\t\tthis.addLabel('relation name');\n\t\tthis.addLabel('1,N');\n\t}\n\n\tserialize() {\n\t\treturn _.merge(super.serialize(), {\n\t\t\twidth: this.width,\n\t\t\tcolor: this.color,\n\t\t\tcurvyness: this.curvyness\n\t\t});\n\t}\n\n\tdeSerialize(ob: any, engine: DiagramEngine) {\n\t\tsuper.deSerialize(ob, engine);\n\t\tthis.color = ob.color;\n\t\tthis.width = ob.width;\n\t\tthis.curvyness = ob.curvyness;\n\t}\n\n\taddLabel(label: LabelModel | string) {\n\t\t// this.diagramEngine.recalculatePortsVisually();\n\n\t\tif (label instanceof LabelModel) {\n\t\t\treturn super.addLabel(label);\n\t\t}\n\t\tlet labelOb = new Label('custom');\n\t\tlabelOb.setLabel(label);\n\t\treturn super.addLabel(labelOb);\n\t}\n\n\tsetWidth(width: number) {\n\t\tthis.width = width;\n\t\tthis.iterateListeners((listener: DefaultLinkModelListener, event: BaseEvent) => {\n\t\t\tif (listener.widthChanged) {\n\t\t\t\tlistener.widthChanged({ ...event, width: width });\n\t\t\t}\n\t\t});\n\t}\n\n\tsetColor(color: string) {\n\t\tthis.color = color;\n\t\tthis.iterateListeners((listener: DefaultLinkModelListener, event: BaseEvent) => {\n\t\t\tif (listener.colorChanged) {\n\t\t\t\tlistener.colorChanged({ ...event, color: color });\n\t\t\t}\n\t\t});\n\t}\n}"]},"metadata":{},"sourceType":"module"}