{"ast":null,"code":"import _classCallCheck from \"/home/dell/Dokumenty/sql-gen2/sql-gen2/sql-generator2/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/dell/Dokumenty/sql-gen2/sql-gen2/sql-generator2/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/dell/Dokumenty/sql-gen2/sql-gen2/sql-generator2/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/dell/Dokumenty/sql-gen2/sql-gen2/sql-generator2/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _get from \"/home/dell/Dokumenty/sql-gen2/sql-gen2/sql-generator2/node_modules/@babel/runtime/helpers/esm/get\";\nimport _inherits from \"/home/dell/Dokumenty/sql-gen2/sql-gen2/sql-generator2/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport * as _ from \"lodash\";\nimport { Link } from \"./Link\";\nimport { PortModel } from \"storm-react-diagrams\";\nimport { PropertyType } from \"./PropertyType\";\nexport var Port =\n/*#__PURE__*/\nfunction (_PortModel) {\n  _inherits(Port, _PortModel);\n\n  function Port(diagramEngine, isInput, name, isPrimaryKey, isForeignKey, isNotNull, isAutoincremented, isUnique, propertyType, id) {\n    var _this;\n\n    _classCallCheck(this, Port);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Port).call(this, name, \"custom\", id));\n    _this.in = void 0;\n    _this.label = void 0;\n    _this.links = void 0;\n    _this.firstTime = true;\n    _this.isPrimaryKey = void 0;\n    _this.isForeignKey = void 0;\n    _this.isAutoincremented = void 0;\n    _this.isNotNull = void 0;\n    _this.isUnique = void 0;\n    _this.propertyType = void 0;\n    _this.diagramEngine = void 0;\n    _this.in = isInput;\n    _this.label = name;\n    _this.links = {};\n    _this.isPrimaryKey = isPrimaryKey;\n    _this.isForeignKey = isForeignKey;\n    _this.isNotNull = isNotNull;\n    _this.isUnique = isUnique;\n    _this.isAutoincremented = isAutoincremented;\n    _this.propertyType = propertyType;\n    _this.diagramEngine = diagramEngine;\n    return _this;\n  }\n\n  _createClass(Port, [{\n    key: \"deSerialize\",\n    value: function deSerialize(object, engine) {\n      _get(_getPrototypeOf(Port.prototype), \"deSerialize\", this).call(this, object, engine);\n\n      this.in = object.in;\n      this.label = object.label;\n    }\n  }, {\n    key: \"serialize\",\n    value: function serialize() {\n      return _.merge(_get(_getPrototypeOf(Port.prototype), \"serialize\", this).call(this), {\n        in: this.in,\n        label: this.label,\n        links: this.links,\n        isPrimaryKey: this.isPrimaryKey,\n        isForeignKey: this.isForeignKey,\n        isNotNull: this.isNotNull,\n        isUnique: this.isUnique,\n        isAutoincremented: this.isAutoincremented,\n        propertyType: this.propertyType\n      });\n    }\n  }, {\n    key: \"link\",\n    value: function link(port) {\n      var node = port.getParent();\n      console.log('QQQQnode', node);\n      var targetPort = node.addInPort(this.getParent().name + 'Id', false, true, false, false, false, PropertyType.INT);\n      var link = this.createLinkModel();\n      link.setSourcePort(this);\n      console.log('QQQQtport', targetPort);\n      link.setTargetPort(targetPort);\n      console.log('QQQQlink', link, this.diagramEngine);\n      this.diagramEngine.recalculatePortsVisually();\n      return true; // return link;\n    }\n  }, {\n    key: \"canLinkToPort\",\n    value: function canLinkToPort(port) {\n      return this.link(port);\n    }\n  }, {\n    key: \"createLinkModel\",\n    value: function createLinkModel() {\n      // let link = super.createLinkModel();\n      // return link || new Link();\n      return new Link('custom');\n    }\n  }]);\n\n  return Port;\n}(PortModel);","map":{"version":3,"sources":["/home/dell/Dokumenty/sql-gen2/sql-gen2/sql-generator2/src/components/models/Port.ts"],"names":["_","Link","PortModel","PropertyType","Port","diagramEngine","isInput","name","isPrimaryKey","isForeignKey","isNotNull","isAutoincremented","isUnique","propertyType","id","in","label","links","firstTime","object","engine","merge","port","node","getParent","console","log","targetPort","addInPort","INT","link","createLinkModel","setSourcePort","setTargetPort","recalculatePortsVisually"],"mappings":"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","sourcesContent":["import * as _ from \"lodash\";\nimport { Link } from \"./Link\";\nimport { Node } from \"./Node\";\nimport { PortModel, DiagramEngine, LinkModel } from \"storm-react-diagrams\";\nimport { PropertyType } from \"./PropertyType\";\nimport { Label } from \"./Label\";\n\nexport class Port extends PortModel {\n\tin: boolean;\n\tlabel: string;\n\tlinks: { [id: string]: Link };\n\tfirstTime: boolean = true;\n\n\n\tisPrimaryKey: boolean;\n\tisForeignKey: boolean;\n\tisAutoincremented: boolean;\n\tisNotNull: boolean;\n\tisUnique: boolean;\n\tpropertyType: PropertyType;\n\n\tdiagramEngine: DiagramEngine;\n\n\tconstructor(diagramEngine: DiagramEngine, isInput: boolean, name: string, isPrimaryKey?: boolean, isForeignKey?: boolean, isNotNull?: boolean, isAutoincremented?: boolean, isUnique?: boolean, propertyType?: PropertyType, id?: string) {\n\t\tsuper(name, \"custom\", id);\n\t\tthis.in = isInput;\n\t\tthis.label = name;\n\t\tthis.links = {};\n\n\t\tthis.isPrimaryKey = isPrimaryKey;\n\t\tthis.isForeignKey = isForeignKey;\n\n\t\tthis.isNotNull = isNotNull;\n\t\tthis.isUnique = isUnique;\n\t\tthis.isAutoincremented = isAutoincremented;\n\n\t\tthis.propertyType = propertyType;\n\n\t\tthis.diagramEngine = diagramEngine;\n\t}\n\n\tdeSerialize(object: any, engine: DiagramEngine) {\n\t\tsuper.deSerialize(object, engine);\n\t\tthis.in = object.in;\n\t\tthis.label = object.label;\n\t}\n\n\tserialize() {\n\t\treturn _.merge(super.serialize(), {\n\t\t\tin: this.in,\n\t\t\tlabel: this.label,\n\n\t\t\tlinks: this.links,\n\n\t\tisPrimaryKey: this.isPrimaryKey,\n\t\tisForeignKey: this.isForeignKey,\n\t\tisNotNull: this.isNotNull,\n\t\tisUnique: this.isUnique,\n\t\tisAutoincremented: this.isAutoincremented,\n\n\t\tpropertyType: this.propertyType,\n\t\t});\n\t}\n\n\tlink(port: Port): boolean {\n\t\tlet node = port.getParent() as Node;\n\t\tconsole.log('QQQQnode', node);\n\t\tlet targetPort = node.addInPort((this.getParent() as Node).name + 'Id', false, true, false, false, false, PropertyType.INT);\n\t\tlet link = this.createLinkModel();\n\t\tlink.setSourcePort(this);\n\t\tconsole.log('QQQQtport', targetPort);\n\t\tlink.setTargetPort(targetPort);\n\t\tconsole.log('QQQQlink', link, this.diagramEngine);\n\t\tthis.diagramEngine.recalculatePortsVisually();\nreturn true;\n\t\t// return link;\n\t}\n\n\tcanLinkToPort(port: Port): boolean {\n\t\t\n\t\t\treturn this.link(port);\n\n\n\t}\n\n\tcreateLinkModel(): Link {\n\t\t// let link = super.createLinkModel();\n\t\t// return link || new Link();\n\t\treturn new Link('custom');\n\t}\n}"]},"metadata":{},"sourceType":"module"}